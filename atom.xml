<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é»˜</title>
  
  <subtitle>æ˜Ÿè¾°å¤§æµ·</subtitle>
  <link href="https://yingliyu.github.io/atom.xml" rel="self"/>
  
  <link href="https://yingliyu.github.io/"/>
  <updated>2022-01-19T03:08:56.659Z</updated>
  <id>https://yingliyu.github.io/</id>
  
  <author>
    <name>Lillian</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Storybookä»é›¶åˆ°ä¸€æ­å»ºç»„ä»¶åº“(ä¸Šç¯‡)</title>
    <link href="https://yingliyu.github.io/2022/01/19/storybook-js/"/>
    <id>https://yingliyu.github.io/2022/01/19/storybook-js/</id>
    <published>2022-01-19T03:08:56.659Z</published>
    <updated>2022-01-19T03:08:56.659Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Storybook æ˜¯ä¸€ä¸ªç»å¦™çš„ ç»„ä»¶é©±åŠ¨å¼€å‘ç¯å¢ƒã€‚å®ƒé€šè¿‡éš”ç¦»ç»„ä»¶ä½¿å¼€å‘æ›´å¿«æ›´å®¹æ˜“ï¼Œå®ƒå¯ä»¥ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªç»„ä»¶ã€‚åœ¨ web åº”ç”¨ç¨‹åºä¸­æ„å»ºå°çš„åŸå­ç»„ä»¶å’Œå¤æ‚çš„é¡µé¢ï¼Œä½¿ç”¨ Storybook å¯ä»¥è®©ä½ ä¸“æ³¨äºç»„ä»¶å¼€å‘ï¼Œæ— éœ€å»å…³æ³¨ API æ–‡æ¡£çš„ç¼–å†™ã€‚</p><blockquote><p>Storybook å¯ä»¥åšä»€ä¹ˆï¼Ÿ</p></blockquote><p>å·¥ä½œä¸­å¼€å‘çš„ UI ç»„ä»¶æˆ–é¡µé¢å¯ä»¥ç”¨ Storybook å¸®åŠ©ä½ è®°å½•å¹¶ç”Ÿæˆ API æ–‡æ¡£ï¼Œå¢å¼ºä»£ç é‡ç”¨æ€§ï¼Œå¤§å¤§çš„æé«˜å·¥ä½œæ•ˆç‡ï¼Œå¹¶è‡ªåŠ¨å¯è§†åŒ–åœ°æµ‹è¯•ç»„ä»¶ä»¥é˜²æ­¢ bugã€‚<br>åŒæ—¶ä¸å—é™äºæ¡†æ¶ï¼Œå®ƒåŒæ—¶æ”¯æŒ Vueã€Reactã€Angularã€‚æ‰€ä»¥å·¥ä½œçš„åŒæ—¶ï¼Œä¸å¦¨ç”¨å®ƒæ¥æ²‰æ·€ä¸€ä¸ªè‡ªå·±çš„ç»„ä»¶åº“ï¼Œé¢è¯•çš„æ—¶å€™ä¹Ÿæ˜¯ä¸€ä¸ªè°ˆèµ„ã€‚<br><img src="/2022/01/19/storybook-js/image.png" alt="image"></p><h2 id="ä¾èµ–æŠ€æœ¯æ ˆ"><a href="#ä¾èµ–æŠ€æœ¯æ ˆ" class="headerlink" title="ä¾èµ–æŠ€æœ¯æ ˆ"></a>ä¾èµ–æŠ€æœ¯æ ˆ</h2><p>é¦–å…ˆï¼Œå…ˆæ¥äº†è§£ä¸€ä¸‹æ­å»ºä¸€ä¸ªç®€å•çš„ UI ç»„ä»¶åº“éœ€è¦ä½¿ç”¨å“ªäº›æŠ€æœ¯æ ˆï¼š</p><ol><li>Node ç¯å¢ƒï¼šv14.16.1</li><li>React@17ï¼šç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“</li><li>TypeScript@^4.5.4ï¼šJavascript ç±»å‹çš„è¶…é›†ï¼Œæœ‰å¼ºå¤§çš„ç¼–ç æç¤ºåŠŸèƒ½</li><li>Ant-design@^4.17.4ï¼šæœ€æµè¡Œçš„ React é¡¹ç›® UI ç»„ä»¶åº“ï¼Œè¦æ­å»ºçš„åŸºç¡€ç»„ä»¶åº“æ˜¯åŸºäº Ant Design åšçš„äºŒæ¬¡å°è£…</li><li>Create React Appï¼šReact è„šæ‰‹æ¶å¿«æ·æ­å»ºé¡¹ç›®æ¶æ„</li><li>Storybookï¼ˆ@storybook/react@^6.4.9ï¼‰ï¼šè¾…åŠ© UI æ§ä»¶å¼€å‘çš„å·¥å…·ï¼Œé€šè¿‡ story åˆ›å»ºç‹¬ç«‹çš„æ§ä»¶ï¼Œè®©æ¯ä¸ªæ§ä»¶å¼€å‘éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å¼€å‘è°ƒè¯•ç¯å¢ƒï¼›</li><li>Prettier&amp;Eslint&amp;huskyï¼šç»Ÿä¸€è§„èŒƒä»£ç é£æ ¼äº¤ç»™ Prettierã€Eslint æ ¡éªŒè¯­æ³•é”™è¯¯ï¼Œhusky é¢„é˜²å°†å¸¦æœ‰è¯­æ³•ç­‰é”™è¯¯æäº¤åˆ°è¿œç¨‹ä»“åº“é€ æˆæ±¡æŸ“</li><li>Webpack@^5.0.0ï¼šé™æ€æ¨¡å—æ‰“åŒ…å·¥å…·</li></ol><h2 id="é¡¹ç›®å‡†å¤‡"><a href="#é¡¹ç›®å‡†å¤‡" class="headerlink" title="é¡¹ç›®å‡†å¤‡"></a>é¡¹ç›®å‡†å¤‡</h2><span id="more"></span><p>è¿™é‡Œä½¿ç”¨ React + Antd + TypeScript ä¸ºä¾‹</p><h3 id="æ„å»ºé¡¹ç›®"><a href="#æ„å»ºé¡¹ç›®" class="headerlink" title="æ„å»ºé¡¹ç›®"></a>æ„å»ºé¡¹ç›®</h3><p>ä½¿ç”¨ <a href="https://create-react-app.dev/docs/adding-typescript/">Creat React App</a> æ„å»ºé¡¹ç›®ï¼Œä½¿ç”¨å®˜æ–¹æ¨èè„šæ‰‹æ¶æ­å»º~</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨create-react-appåˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®</span></span><br><span class="line">npx create-react-app my-app --typescript</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›å…¥é¡¹ç›®æ ¹ç›®å½•</span></span><br><span class="line">cd my-app</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¯æŒts</span></span><br><span class="line">npm install --save typescript @types/node @types/react @types/react-dom @types/jest</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ React åˆå§‹é¡µé¢ï¼Œè¯´æ˜é¡¹ç›®æ„å»ºæˆåŠŸã€‚<br><img src="/2022/01/19/storybook-js/2.png" alt="image"></p><h3 id="å®‰è£…-storybook"><a href="#å®‰è£…-storybook" class="headerlink" title="å®‰è£… storybook"></a>å®‰è£… storybook</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®‰è£…storybook/cliè„šæ‰‹æ¶å¹¶å®‰è£…ä¾èµ–</span></span><br><span class="line">npx -p @storybook/cli sb init --type react_scripts</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯åŠ¨ä½ çš„storybookç»„ä»¶åº“é¡¹ç›®</span></span><br><span class="line">npm run storybook</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œèƒ½çœ‹åˆ°ä¸€ä¸ªç®€å•çš„ç»„ä»¶åº“é›å½¢ï¼Œå¦‚ä¸‹ã€‚<br><img src="/2022/01/19/storybook-js/3.png" alt="image"><br>è‡³æ­¤ï¼ŒåŸºæœ¬çš„ç»„ä»¶åº“æ­å»ºå®Œæˆï¼Œä¸‹é¢ç»§ç»­å®Œå–„ä¸€ä¸‹å…¶å‰ç«¯ç”Ÿæ€ç³»ç»Ÿï¼Œé›†æˆä¸€äº›å¼€å‘ä¸­å¿…ä¸å¯ç¼ºçš„å·¥å…·åº“ï¼Œæœ‰åŠ©äºæé«˜å¼€å‘æ•ˆç‡ï¼Œè®©æˆ‘ä»¬çš„å¼€å‘å·¥ä½œäº‹åŠåŠŸå€ã€‚</p><h2 id="é¡¹ç›®é›†æˆ"><a href="#é¡¹ç›®é›†æˆ" class="headerlink" title="é¡¹ç›®é›†æˆ"></a>é¡¹ç›®é›†æˆ</h2><h3 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h3><p>é»˜è®¤çš„ Webpack é…ç½®å¯èƒ½æ— æ³•è§£æ tsconfig æ–‡ä»¶ä¸­å®šä¹‰çš„æ¨¡å—åˆ«åï¼Œéœ€è¦ tsconfig-paths-webpack-plugin æ¥å¸®åŠ©ã€‚</p><h4 id="install"><a href="#install" class="headerlink" title="install"></a>install</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install tsconfig-paths-webpack-plugin</span><br></pre></td></tr></table></figure><h4 id="storybook-main-js"><a href="#storybook-main-js" class="headerlink" title=".storybook/main.js"></a>.storybook/main.js</h4><p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼ŒStorybook é¢„è®¾äº† babelã€webpack æ’ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ main.js ä¸­åŠ æ‰©å±• webpack é…ç½®ã€‚<br>åœ¨ main.js ä¸­ webpackFinal å±æ€§ç”¨æ¥è‡ªå®šä¹‰ webpack é…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨æ ¹ç›®å½•å®šä¹‰ä¸€ä¸ª webpack.config.js æ–‡ä»¶åŠ é…ç½®åœ¨ main.js å¯¼å…¥ä½¿ç”¨ï¼Œè¿™é‡Œå…ˆåœ¨ main.js ä¸­é…ç½®.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .storybook/main.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TsconfigPathsPlugin = <span class="built_in">require</span>(<span class="string">&#x27;tsconfig-paths-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">webpackFinal</span>: <span class="keyword">async</span> (config) =&gt; &#123;</span><br><span class="line">    config.resolve.plugins = [</span><br><span class="line">      ...(config.resolve.plugins || []),</span><br><span class="line">      <span class="keyword">new</span> TsconfigPathsPlugin(&#123;</span><br><span class="line">        <span class="attr">extensions</span>: config.resolve.extensions</span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// /tsconfig.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;lib&quot;</span>: [<span class="string">&quot;dom&quot;</span>, <span class="string">&quot;dom.iterable&quot;</span>, <span class="string">&quot;esnext&quot;</span>],</span><br><span class="line">    <span class="string">&quot;allowJs&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;skipLibCheck&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;allowSyntheticDefaultImports&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;strict&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;baseUrl&quot;</span>: <span class="string">&quot;.&quot;</span>,</span><br><span class="line">    <span class="string">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;noFallthroughCasesInSwitch&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;module&quot;</span>: <span class="string">&quot;esnext&quot;</span>,</span><br><span class="line">    <span class="string">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">    <span class="string">&quot;resolveJsonModule&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;isolatedModules&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;noEmit&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;jsx&quot;</span>: <span class="string">&quot;react-jsx&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;include&quot;</span>: [<span class="string">&quot;src&quot;</span>],</span><br><span class="line">  <span class="string">&quot;exclude&quot;</span>: [<span class="string">&quot;node_modules&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id><a href="#" class="headerlink" title></a></h3><h3 id="Less"><a href="#Less" class="headerlink" title="Less"></a>Less</h3><p>â€‹</p><p>å› ä¸ºæ˜¯åŸºäº Antd åšçš„äºŒæ¬¡å¼€å‘ï¼ŒAntd æ˜¯åŸºäº Less æ‰€ä»¥éœ€è¦å®‰è£… Less</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less less-loader --save-dev</span><br></pre></td></tr></table></figure><p>æ·»åŠ é…ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//.storybook/main.js</span></span><br><span class="line"><span class="attr">webpackFinal</span>: <span class="keyword">async</span> (webpackConfig, &#123; configType &#125;) =&gt; &#123;</span><br><span class="line">    webpackConfig.module.rules.push(&#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;less-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">lessOptions</span>: &#123;</span><br><span class="line">              <span class="attr">javascriptEnabled</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">include</span>: [path.resolve(__dirname, <span class="string">&#x27;../&#x27;</span>), <span class="regexp">/[\\/]node_modules[\\/].*antd/</span>],</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> webpackConfig;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><strong>å‡ºç°é—®é¢˜ï¼šstorybook æ— æ³•è§£æ lessï¼ŒAntd æ ·å¼ä¸ç”Ÿæ•ˆ</strong><br>åŸå› æ˜¯ file loader å…ˆ resolve äº† less æ–‡ä»¶ï¼Œå¯¼è‡´ less-loader æ²¡æœ‰è§£æ<br>è§£å†³ï¼š@storybook/preset-create-react-app å¾— file load æ’é™¤æ‰ less æ–‡ä»¶ï¼Œè®© less-loader å»è§£æ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// .storybook/main.js</span></span><br><span class="line"><span class="attr">addons</span>: [</span><br><span class="line">    <span class="string">&#x27;@storybook/addon-links&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@storybook/addon-essentials&#x27;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;@storybook/preset-create-react-app&#x27;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">craOverrides</span>: &#123;</span><br><span class="line">          <span class="attr">fileLoaderExcludes</span>: [<span class="string">&#x27;less&#x27;</span>],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>äº†è§£æ›´å¤šï¼š<a href="https://github.com/storybookjs/storybook/issues/9796">issue#9796</a></p><h3 id="Antd"><a href="#Antd" class="headerlink" title="Antd"></a>Antd</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install antd</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶ä¸­å¯¼å…¥ antd æ ·å¼æ–‡ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .storybook/preview.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd/dist/antd.less&#x27;</span> <span class="comment">// å¼•å…¥ antd æ ·å¼</span></span><br></pre></td></tr></table></figure><h3 id="Eslint-amp-Prettier-amp-husky"><a href="#Eslint-amp-Prettier-amp-husky" class="headerlink" title="Eslint&amp;Prettier&amp;husky"></a>Eslint&amp;Prettier&amp;husky</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D eslint eslint-config-prettier eslint-config-react-app eslint-plugin-<span class="keyword">import</span> eslint-plugin-prettier eslint-plugin-react eslint-plugin-react-hooks lint-staged prettier husky</span><br></pre></td></tr></table></figure><p><strong>â€‹</strong></p><p><strong>å‡ºç°æŠ¥é”™ï¼šæ·»åŠ äº† Eslintï¼Œæ ¼å¼æ ¡éªŒæœªé€šè¿‡</strong><br><img src="/2022/01/19/storybook-js/4.png" alt="1640246532(1).png"><br>è§£å†³ï¼šä¿®æ”¹ package.json æ–‡ä»¶ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> package.json</span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">&quot;lint&quot;</span>: <span class="string">&quot;eslint --ext .ts --ext .tsx src/  --fix&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå‘½ä»¤è¡Œæ‰§è¡Œä¿®å¤æŒ‡ä»¤ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run lint</span><br></pre></td></tr></table></figure><p><strong>å‡ºç°æŠ¥é”™ï¼šParsing error: The keyword â€˜importâ€™ is reserved</strong><br>ä¸ªåˆ«ç»„ä»¶ç¬¬ä¸€è¡Œ import å‡ºç°è­¦å‘Šï¼Œè¯•äº†åŠ  babel æ— æ•ˆï¼Œæœ€åæŠŠ vscode å…³é—­å†æ‰“å¼€å¥½äº†ï¼Œç›®å‰è¿˜æ²¡æœ‰å¤ç°ã€‚</p><h2 id="ç¼–å†™ç»„ä»¶"><a href="#ç¼–å†™ç»„ä»¶" class="headerlink" title="ç¼–å†™ç»„ä»¶"></a>ç¼–å†™ç»„ä»¶</h2><p>Button.tsx</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">&#x27;prop-types&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Button <span class="keyword">as</span> AntButton &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Button: React.FC&lt;any&gt; = <span class="function">(<span class="params">&#123;</span></span></span><br><span class="line"><span class="params"><span class="function">  primary,</span></span></span><br><span class="line"><span class="params"><span class="function">  type,</span></span></span><br><span class="line"><span class="params"><span class="function">  backgroundColor,</span></span></span><br><span class="line"><span class="params"><span class="function">  size,</span></span></span><br><span class="line"><span class="params"><span class="function">  label,</span></span></span><br><span class="line"><span class="params"><span class="function">  danger,</span></span></span><br><span class="line"><span class="params"><span class="function">  ...props</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> mode = primary ? <span class="string">&#x27;storybook-button--primary&#x27;</span> : <span class="string">&#x27;storybook-button--secondary&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;warpper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">AntButton</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">type</span>=<span class="string">&#123;type&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">size</span>=<span class="string">&#123;size&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">danger</span>=<span class="string">&#123;danger&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">className</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">storybook-button</span>&#x27;, `<span class="attr">storybook-button--</span>$&#123;<span class="attr">size</span>&#125;`, <span class="attr">mode</span>]<span class="attr">.join</span>(&#x27; &#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">style</span>=<span class="string">&#123;backgroundColor</span> &amp;&amp; &#123; <span class="attr">backgroundColor</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">        &#123;<span class="attr">...props</span>&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">      &gt;</span></span></span><br><span class="line"><span class="xml">        &#123;label&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">AntButton</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Button.propTypes = &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Is this the principal call to action on the page?</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">primary</span>: PropTypes.bool,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * What background color to use</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">backgroundColor</span>: PropTypes.string,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * How large should the button be?</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">size</span>: PropTypes.oneOf([<span class="string">&#x27;small&#x27;</span>, <span class="string">&#x27;medium&#x27;</span>, <span class="string">&#x27;large&#x27;</span>]),</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Button contents</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">label</span>: PropTypes.string.isRequired,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Optional click handler</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onClick</span>: PropTypes.func</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Button.defaultProps = &#123;</span><br><span class="line">  <span class="attr">backgroundColor</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">primary</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">size</span>: <span class="string">&#x27;medium&#x27;</span>,</span><br><span class="line">  <span class="attr">onClick</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Button.stories.tsx</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ComponentStory, ComponentMeta &#125; <span class="keyword">from</span> <span class="string">&#x27;@storybook/react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Button &#125; <span class="keyword">from</span> <span class="string">&#x27;../components/Button&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;Design System/General/Button&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: Button,</span><br><span class="line">  <span class="attr">argTypes</span>: &#123;</span><br><span class="line">    <span class="attr">backgroundColor</span>: &#123; <span class="attr">control</span>: <span class="string">&#x27;color&#x27;</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125; <span class="keyword">as</span> ComponentMeta&lt;<span class="keyword">typeof</span> Button&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Template = <span class="function">(<span class="params">args: any</span>) =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Button</span> &#123;<span class="attr">...args</span>&#125; /&gt;</span></span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Primary: ComponentStory&lt;<span class="keyword">typeof</span> Button&gt; = Template.bind(&#123;&#125;);</span><br><span class="line">Primary.args = &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;primary&#x27;</span>,</span><br><span class="line">  <span class="comment">// primary: true,</span></span><br><span class="line">  <span class="attr">label</span>: <span class="string">&#x27;Button&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Danger: ComponentStory&lt;<span class="keyword">typeof</span> Button&gt; = Template.bind(&#123;&#125;);</span><br><span class="line">Danger.args = &#123;</span><br><span class="line">  <span class="attr">label</span>: <span class="string">&#x27;Button&#x27;</span>,</span><br><span class="line">  <span class="attr">danger</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Large: ComponentStory&lt;<span class="keyword">typeof</span> Button&gt; = Template.bind(&#123;&#125;);</span><br><span class="line">Large.args = &#123;</span><br><span class="line">  <span class="attr">size</span>: <span class="string">&#x27;large&#x27;</span>,</span><br><span class="line">  <span class="attr">label</span>: <span class="string">&#x27;Button&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Small: ComponentStory&lt;<span class="keyword">typeof</span> Button&gt; = Template.bind(&#123;&#125;);</span><br><span class="line">Small.args = &#123;</span><br><span class="line">  <span class="attr">size</span>: <span class="string">&#x27;small&#x27;</span>,</span><br><span class="line">  <span class="attr">label</span>: <span class="string">&#x27;Button&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é¡µé¢æ•ˆæœï¼š<br><img src="/2022/01/19/storybook-js/5.png" alt="image.png"></p><h2 id="é¡¹ç›®éƒ¨ç½²"><a href="#é¡¹ç›®éƒ¨ç½²" class="headerlink" title="é¡¹ç›®éƒ¨ç½²"></a>é¡¹ç›®éƒ¨ç½²</h2><blockquote><p>ä½¿ç”¨ â€‹<a href="https://github.com/features/actions">Github Actions</a>æ‰˜ç®¡ç»„ä»¶åº“ï¼Œå¹¶å®ç°æŒç»­é›†æˆ CI æœåŠ¡</p></blockquote><h5 id="æ­¥éª¤å¦‚ä¸‹"><a href="#æ­¥éª¤å¦‚ä¸‹" class="headerlink" title="æ­¥éª¤å¦‚ä¸‹"></a>æ­¥éª¤å¦‚ä¸‹</h5><h6 id="1-é¦–å…ˆæ˜ç¡®é¡¹ç›®è‡³å°‘æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä»¥masterå’Œgh-pagesä¸ºä¾‹ã€‚"><a href="#1-é¦–å…ˆæ˜ç¡®é¡¹ç›®è‡³å°‘æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä»¥masterå’Œgh-pagesä¸ºä¾‹ã€‚" class="headerlink" title="1.é¦–å…ˆæ˜ç¡®é¡¹ç›®è‡³å°‘æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä»¥masterå’Œgh-pagesä¸ºä¾‹ã€‚"></a>1.é¦–å…ˆæ˜ç¡®é¡¹ç›®è‡³å°‘æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä»¥<code>master</code>å’Œ<code>gh-pages</code>ä¸ºä¾‹ã€‚</h6><p><code>master</code>åˆ†æ”¯æ˜¯æºç ï¼Œå¼€å‘åœ¨æ­¤åˆ†æ”¯ï¼Œ<code>gh-pages</code>æ˜¯é¡¹ç›®æ‰“åŒ…åç”Ÿæˆçš„é™æ€èµ„æºæ–‡ä»¶ã€‚<br>ç„¶åï¼Œåœ¨æ­¤é¡¹ç›®ä»“åº“<code>Settings-&gt;Pages</code>é¡µé¢é€‰æ‹© gh-pages ä½œä¸ºé™æ€èµ„æºåˆ†æ”¯ï¼Œç›´æ¥åœ¨<code>root</code>ï¼Œå³æ ¹ç›®å½•ä¸‹ã€‚<br>å¦‚æœæœ‰è‡ªå·±çš„åŸŸåçš„è¯ä¹Ÿå¯ä»¥è®¾ç½® Custom domainã€‚<br>â€‹</p><h6 id="2-ç„¶åç”Ÿæˆä¸€ä¸ªgithub-secretså¯†é’¥ï¼Œç„¶åå°†å¯†é’¥è‡³ä»“åº“ã€‚"><a href="#2-ç„¶åç”Ÿæˆä¸€ä¸ªgithub-secretså¯†é’¥ï¼Œç„¶åå°†å¯†é’¥è‡³ä»“åº“ã€‚" class="headerlink" title="2.ç„¶åç”Ÿæˆä¸€ä¸ªgithub secretså¯†é’¥ï¼Œç„¶åå°†å¯†é’¥è‡³ä»“åº“ã€‚"></a>2.ç„¶åç”Ÿæˆä¸€ä¸ª<a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets">github secrets</a>å¯†é’¥ï¼Œç„¶åå°†å¯†é’¥è‡³ä»“åº“ã€‚</h6><blockquote><p>step1. ç”Ÿæˆä¸€ä¸ª github å¯†é’¥ã€‚</p></blockquote><p>ç‚¹å‡» github çš„ <code>Github Settings</code>-&gt;<code>Developer settings</code>-&gt;<code>Personal access tokens</code>-&gt;<code>Generate new token</code>-&gt;<code>Generate token</code>-&gt;<code>Copy token</code></p><blockquote><p>step2. å°†å¯†é’¥æ·»åŠ åˆ°å½“å‰ä»“åº“ä¸­ã€‚</p></blockquote><p>æ‰“å¼€å½“å‰ github ä»“åº“ç‚¹å‡»è¿›å…¥<code>Settings-&gt;Secrets</code>-&gt;<code>New repository secret</code>-&gt;<code>Paste token from step1</code></p><h6 id="3-ä¿®æ”¹-package-json-æ–‡ä»¶-scripts"><a href="#3-ä¿®æ”¹-package-json-æ–‡ä»¶-scripts" class="headerlink" title="3.ä¿®æ”¹ package.json æ–‡ä»¶ scripts"></a>3.ä¿®æ”¹ package.json æ–‡ä»¶ scripts</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;storybook&quot;</span>: <span class="string">&quot;start-storybook -p 6006 -s public&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build-storybook&quot;</span>: <span class="string">&quot;rm -rf ./dist/docs &amp;&amp; build-storybook -o ./dist/docs&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="4-æ·»åŠ -actionï¼Œç¼–å†™è„šæœ¬"><a href="#4-æ·»åŠ -actionï¼Œç¼–å†™è„šæœ¬" class="headerlink" title="4. æ·»åŠ  actionï¼Œç¼–å†™è„šæœ¬"></a>4. æ·»åŠ  actionï¼Œç¼–å†™è„šæœ¬</h6><p>åœ¨æ­¤é¡¹ç›®ä»“åº“ç‚¹å‡» Action-&gt; New workflow-&gt;Node.js<br>deploy.yml</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">name: Deployer # Actions åå­—</span><br><span class="line"></span><br><span class="line"><span class="attr">on</span>: # è§¦å‘æ¡ä»¶</span><br><span class="line">  <span class="attr">push</span>:</span><br><span class="line">    branches:</span><br><span class="line">      - master # ä»…å‘ master åˆ†æ”¯ push æ—¶è§¦å‘</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs</span>:</span><br><span class="line">  build: # job id</span><br><span class="line">    <span class="attr">name</span>: Build and publish # job åï¼Œä¸å†™é»˜è®¤ä½¿ç”¨ job id</span><br><span class="line">    runs-on: ubuntu-latest # è¿è¡Œç¯å¢ƒï¼Œå¯é€‰ ubuntu-latest, ubuntu-<span class="number">18.04</span>, ubuntu-<span class="number">16.04</span>, windows-latest, windows-<span class="number">2019</span>, windows-<span class="number">2016</span>, macOS-latest, macOS-<span class="number">10.14</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps</span>:</span><br><span class="line">      - uses: actions/checkout@v2</span><br><span class="line"></span><br><span class="line">      - name: Use Node.js <span class="number">14.</span>x</span><br><span class="line">        <span class="attr">uses</span>: actions/setup-node@v2</span><br><span class="line">        <span class="attr">with</span>:</span><br><span class="line">          node-version: <span class="number">14.</span>x</span><br><span class="line"></span><br><span class="line">      - name: Setup  env</span><br><span class="line">        <span class="attr">run</span>: |</span><br><span class="line">          npm install</span><br><span class="line">      - name: Generate public files</span><br><span class="line">        <span class="attr">run</span>: |</span><br><span class="line">          npm run build-storybook</span><br><span class="line"></span><br><span class="line">      - name: Deploy</span><br><span class="line">        <span class="attr">env</span>:</span><br><span class="line">          GH_REF: github.com/xxx/my-app.git # ä»“åº“åœ°å€</span><br><span class="line">          <span class="attr">ACCESS_TOKEN</span>: $&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125; # github token</span><br><span class="line">        <span class="attr">run</span>: |</span><br><span class="line">          git config --<span class="built_in">global</span> user.name <span class="string">&quot;your name&quot;</span></span><br><span class="line">          git config --<span class="built_in">global</span> user.email <span class="string">&quot;your email&quot;</span></span><br><span class="line">          git clone https:<span class="comment">//$&#123;GH_REF&#125; .deploy_git</span></span><br><span class="line">          cd .deploy_git</span><br><span class="line">          git checkout gh-pages</span><br><span class="line">          cd ../</span><br><span class="line">          mv .deploy_git/.git/ ./dist/docs</span><br><span class="line">          cd ./dist/docs</span><br><span class="line">          git add .</span><br><span class="line">          git commit -m <span class="string">&quot;:construction_worker:CI built at `date +&quot;</span>%Y-%m-%d %H:%M:%S<span class="string">&quot;`&quot;</span></span><br><span class="line">          # GitHub Pages</span><br><span class="line">          git push --force --quiet <span class="string">&quot;https://$&#123;ACCESS_TOKEN&#125;@$&#123;GH_REF&#125;&quot;</span> gh-pages:gh-pages</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ›å»ºæˆåŠŸä¼šåœ¨é¡¹ç›®ä¸­ç”Ÿæˆ<code> .github/workflows/deploy.yml</code> ã€‚<br>è®¾ç½®äº† GitHub action åï¼Œå½“æ¨é€ä»£ç æ—¶ï¼Œä½ çš„ç»„ä»¶åº“å°†è‡ªåŠ¨éƒ¨ç½²åˆ° Github é™æ€ç«™ç‚¹æ‰˜ç®¡ã€‚è‡³æ­¤å°±å®ç°äº†ï¼Œæ¯å½“æˆ‘ä»¬æ›´æ–°æ¨é€ä»£ç æ—¶å¯ä»¥è‡ªåŠ¨å‘å¸ƒç»„ä»¶çš„æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å†éƒ¨ç½²ï¼ŒGitHub action ä¼šå¸®æˆ‘ä»¬å®Œæˆã€‚</p><h3 id="Github-Pages-è®¿é—®ç»„ä»¶åº“"><a href="#Github-Pages-è®¿é—®ç»„ä»¶åº“" class="headerlink" title="Github Pages è®¿é—®ç»„ä»¶åº“"></a>Github Pages è®¿é—®ç»„ä»¶åº“</h3><p>åœ¨ master åˆ†æ”¯ä¿®æ”¹æºä»£ç ï¼Œç„¶å push åˆ°è¿œç¨‹ä»“åº“æ—¶ï¼Œæ­¤æ—¶ action ä¼šè‡ªåŠ¨æ‰§è¡Œå¹¶æ‰“åŒ…éƒ¨ç½²ï¼Œé€šè¿‡ä»“åº“ Settings-&gt;Pages é‡Œæ˜¾ç¤ºçš„ Your site è®¿é—®å³å¯ã€‚</p><h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><blockquote><p>ä¸‹ä¸€ç¯‡è®°å½•å°†ç»„ä»¶åº“å‘å¸ƒ npm åŒ…çš„å®è·µè¿‡ç¨‹</p></blockquote><blockquote><p>é¢„è§ˆæˆ‘çš„ç»„ä»¶åº“ï¼š<a href="https://yingliyu.github.io/fish-design">Fish-Design</a></p></blockquote><blockquote><p>å…³äºæˆ‘çš„åšå®¢ï¼š<a href="https://yingliyu.github.io/">æˆ‘çš„åšå®¢</a></p></blockquote><h2 id="å°¾å·´"><a href="#å°¾å·´" class="headerlink" title="å°¾å·´"></a>å°¾å·´</h2><p>æœ¬æ–‡å†…å®¹å‚è€ƒ: <a href="https://reactjs.org/docs/create-a-new-react-app.html#create-react-app">React</a> ã€<a href="https://storybook.js.org/">storybook</a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">Storybookä»é›¶åˆ°ä¸€æ­å»ºç»„ä»¶åº“(ä¸Šç¯‡)</summary>
    
    
    
    
    <category term="æ¡†æ¶å­¦ä¹ " scheme="https://yingliyu.github.io/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="Storybook" scheme="https://yingliyu.github.io/tags/Storybook/"/>
    
  </entry>
  
  <entry>
    <title>dumiæ­å»ºç»„ä»¶åº“</title>
    <link href="https://yingliyu.github.io/2022/01/19/dumi/"/>
    <id>https://yingliyu.github.io/2022/01/19/dumi/</id>
    <published>2022-01-19T03:08:56.647Z</published>
    <updated>2022-01-19T03:08:56.647Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¹‹å‰æœ‰ç”¨ storybook å°è¯•æ­å»ºä¸€å¥—ç»„ä»¶åº“<a href="https://yingliyu.github.io/2021/12/24/storybook-js/">ã€ŠStorybook ä»é›¶åˆ°ä¸€æ­å»ºç»„ä»¶åº“(ä¸Šç¯‡)ã€‹</a>ï¼Œä½†æ˜¯ä¸€é¡¿æ“ä½œä¸‹æ¥ä¹‹åï¼Œå‘ç° storybook å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜ä¸”é…ç½®å¤æ‚ï¼Œæœ€é‡è¦çš„æ˜¯é¡µé¢æœ‰è¢«ä¸‘åˆ°ã€‚ç„¶åå¼€å§‹ä½¿ç”¨ dumiï¼Œå‘ç°çœŸé¦™ï¼Œä¸ä»…ä¸Šæ‰‹ç®€å•å°±åƒæ­£å¸¸å¼€å‘ä¸€ä¸ªæ™®é€šçš„é¡¹ç›®ä¸€æ ·ï¼Œè€Œä¸”æ²¡æœ‰ç¹æ‚çš„é…ç½®ï¼Œæœ€é‡è¦çš„æ˜¯é¡µé¢ç¾è§‚ç®€æ´å¤§æ–¹ã€‚ä¸€ä¸ªåƒ antd ä¸€æ ·çš„ç»„ä»¶åº“ï¼Œä½ å€¼å¾—æ‹¥æœ‰ã€‚</p><blockquote><p>æœ¬æ–‡å°†å¸¦ä½ å­¦ä¹ æ­å»ºä¸€ä¸ª React+TS ç»„ä»¶åº“ï¼Œç¼–å†™ä¸€ä¸ªå®Œæ•´ç»„ä»¶ã€éƒ¨ç½²è‡³ github é™æ€ web ç«™ç‚¹åŠå‘å¸ƒ npm ã€‚</p></blockquote><p>ä½¿ç”¨æŠ€æœ¯ï¼š<br><code>dumi</code>ï¼šè´Ÿè´£ç»„ä»¶å¼€å‘åŠç»„ä»¶æ–‡æ¡£ç”Ÿæˆï¼ˆåŸºäº umiï¼Œä½¿ç”¨è¿‡<code>umi</code>çš„åŒå­¦æ¯”è¾ƒå‹å¥½æ˜“ä¸Šæ‰‹ï¼‰<br><code>github</code>ï¼šé…ç½®è‡ªåŠ¨åŒ–éƒ¨ç½²é™æ€ web<br><code>gitee</code>ï¼šåŒæ­¥ github gh pages</p><blockquote><p>ç‰¹æ€§ï¼š</p><ul><li>ğŸ“¦ å¼€ç®±å³ç”¨ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­åœ¨ç»„ä»¶å¼€å‘å’Œæ–‡æ¡£ç¼–å†™ä¸Š</li><li>ğŸ“‹ ä¸°å¯Œçš„ Markdown æ‰©å±•ï¼Œä¸æ­¢äºæ¸²æŸ“ç»„ä»¶ demo</li><li>ğŸ· åŸºäº TypeScript ç±»å‹å®šä¹‰ï¼Œè‡ªåŠ¨ç”Ÿæˆç»„ä»¶ API</li><li>ğŸ¨ ä¸»é¢˜è½»æ¾è‡ªå®šä¹‰ï¼Œè¿˜å¯åˆ›å»ºè‡ªå·±çš„ Markdown ç»„ä»¶</li><li>ğŸ“± æ”¯æŒç§»åŠ¨ç«¯ç»„ä»¶åº“ç ”å‘ï¼Œå†…ç½®ç§»åŠ¨ç«¯é«˜æ¸…æ¸²æŸ“æ–¹æ¡ˆ</li><li>ğŸ“¡ ä¸€è¡Œå‘½ä»¤å°†ç»„ä»¶èµ„äº§æ•°æ®åŒ–ï¼Œä¸ä¸‹æ¸¸ç”Ÿäº§åŠ›å·¥å…·ä¸²è”</li></ul></blockquote><span id="more"></span><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><ul><li><code>node</code>: v10.13.0 åŠä»¥ä¸Šç‰ˆæœ¬</li></ul><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æ­å»ºä¸€ä¸ªç«™ç‚¹æ¨¡å¼çš„ç»„ä»¶åº“</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="string">npx</span> @<span class="string">umijs</span>/<span class="built_in">create-dumi-lib</span> <span class="built_in">--site</span> <span class="comment"># åˆå§‹åŒ–ä¸€ä¸ªç«™ç‚¹æ¨¡å¼çš„ç»„ä»¶åº“å¼€å‘è„šæ‰‹æ¶</span></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">$ <span class="string">yarn</span> <span class="string">create</span> @<span class="string">umijs</span>/<span class="string">dumi-lib</span> <span class="built_in">--site</span></span><br></pre></td></tr></table></figure><p>é¡¹ç›®ç›®å½•ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p><p><img src="/2022/01/19/dumi/image1.png" alt="image"></p><p>å®‰è£…ä¾èµ–ï¼Œå¯åŠ¨ï¼Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼å®˜ç½‘çš„é¦–é¡µå’Œç®€æ´æ˜äº†çš„ç»„ä»¶é¡µã€‚<br><strong>é¦–é¡µï¼š</strong></p><blockquote><p><strong>é¦–é¡µå¯¹åº”é¡¹ç›®ä¸­çš„ root/docs/index.md</strong></p></blockquote><p><img src="/2022/01/19/dumi/image2.png" alt="image"></p><p><strong>ç»„ä»¶é¡µï¼š</strong></p><blockquote><p><strong>ç»„ä»¶é¡µå¯¹åº”é¡¹ç›®ä¸­çš„ root/src/index.ts</strong></p></blockquote><p><img src="/2022/01/19/dumi/image3.png" alt="image"></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä¸»è¦æ˜¯å¯¼èˆªå’Œèœå•çš„é…ç½®ï¼š<br>.umirc.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;dumi&#x27;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getMenus</span>(<span class="params">opts: &#123; lang?: <span class="built_in">string</span>; base: <span class="string">&#x27;/components&#x27;</span> | <span class="string">&#x27;/docs&#x27;</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> menus = &#123;</span><br><span class="line">    <span class="string">&#x27;/docs&#x27;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;Introduce&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;title_zh-CN&#x27;</span>: <span class="string">&#x27;ä»‹ç»&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/docs/guide&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;FAQ&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;title_zh-CN&#x27;</span>: <span class="string">&#x27;é—®é¢˜&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/docs/faq&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&#x27;/components&#x27;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;Common&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;title_zh-CN&#x27;</span>: <span class="string">&#x27;é€šç”¨&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [<span class="string">&#x27;/components/button&#x27;</span>, <span class="string">&#x27;/components/icon&#x27;</span>, <span class="string">&#x27;/components/typography&#x27;</span>],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;Layout&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;title_zh-CN&#x27;</span>: <span class="string">&#x27;å¸ƒå±€&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          <span class="string">&#x27;/components/layout/Divider&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;/components/layout/Grid&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;/components/layout/Layout&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;/components/space&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (menus[opts.base] <span class="keyword">as</span> [])?.map(<span class="function">(<span class="params">menu: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!opts.lang) <span class="keyword">return</span> menu;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...menu,</span><br><span class="line">      <span class="attr">title</span>: menu[<span class="string">`title_<span class="subst">$&#123;opts.lang&#125;</span>`</span>] || menu.title,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;fish-ui&#x27;</span>,</span><br><span class="line">  <span class="attr">hash</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">base</span>: <span class="string">&#x27;/fish-ui&#x27;</span>,</span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&#x27;/fish-ui/&#x27;</span>,</span><br><span class="line">  <span class="attr">favicon</span>: <span class="string">&#x27;https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg&#x27;</span>,</span><br><span class="line">  <span class="attr">logo</span>: <span class="string">&#x27;https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg&#x27;</span>,</span><br><span class="line">  <span class="attr">outputPath</span>: <span class="string">&#x27;docs-dist&#x27;</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;site&#x27;</span>,</span><br><span class="line">  <span class="attr">mfsu</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">dynamicImport</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">navs</span>: [</span><br><span class="line">    <span class="comment">// null,</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;æ–‡æ¡£&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/docs&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;ç»„ä»¶&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/components&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;GitHub&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;https://github.com/yingliyu/fish-ui&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">menus</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;/zh-CN/docs&#x27;</span>: getMenus(&#123; <span class="attr">lang</span>: <span class="string">&#x27;zh-CN&#x27;</span>, <span class="attr">base</span>: <span class="string">&#x27;/docs&#x27;</span> &#125;),</span><br><span class="line">    <span class="string">&#x27;/docs&#x27;</span>: getMenus(&#123; <span class="attr">base</span>: <span class="string">&#x27;/docs&#x27;</span> &#125;),</span><br><span class="line">    <span class="string">&#x27;/zh-CN/components&#x27;</span>: getMenus(&#123; <span class="attr">lang</span>: <span class="string">&#x27;zh-CN&#x27;</span>, <span class="attr">base</span>: <span class="string">&#x27;/components&#x27;</span> &#125;),</span><br><span class="line">    <span class="string">&#x27;/components&#x27;</span>: getMenus(&#123; <span class="attr">base</span>: <span class="string">&#x27;/components&#x27;</span> &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// more config: https://d.umijs.org/config</span></span><br><span class="line">  <span class="attr">lessLoader</span>: &#123; <span class="attr">javascriptEnabled</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  <span class="comment">//  æŒ‰éœ€åŠ è½½ antd</span></span><br><span class="line">  <span class="attr">extraBabelPlugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;babel-plugin-import&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">libraryName</span>: <span class="string">&#x27;antd&#x27;</span>,</span><br><span class="line">        <span class="attr">libraryDirectory</span>: <span class="string">&#x27;es&#x27;</span>,</span><br><span class="line">        <span class="attr">style</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ­¤é…ç½®ä¸­çš„ menus å’Œ navs å¯¹åº”åˆ°é¡µé¢å¸ƒå±€å¦‚ä¸‹ï¼š</p><p><img src="/2022/01/19/dumi/image4.png" alt="image"></p><h2 id="å®Œæˆä¸€ä¸ªç»„ä»¶"><a href="#å®Œæˆä¸€ä¸ªç»„ä»¶" class="headerlink" title="å®Œæˆä¸€ä¸ªç»„ä»¶"></a>å®Œæˆä¸€ä¸ªç»„ä»¶</h2><p>åŸºäº Ant Design ä»¥ Button ç»„ä»¶ä¸ºä¾‹ï¼š<br>/components/button/index.tsxï¼ˆå†™ç»„ä»¶ï¼‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Button <span class="keyword">as</span> AntdButton &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.less&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">type</span> ButtonHTMLType = <span class="string">&#x27;submit&#x27;</span> | <span class="string">&#x27;button&#x27;</span> | <span class="string">&#x27;reset&#x27;</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> ButtonTypes: [<span class="string">&#x27;default&#x27;</span>, <span class="string">&#x27;primary&#x27;</span>, <span class="string">&#x27;ghost&#x27;</span>, <span class="string">&#x27;dashed&#x27;</span>, <span class="string">&#x27;link&#x27;</span>, <span class="string">&#x27;text&#x27;</span>];</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">declare</span> <span class="keyword">type</span> ButtonType = <span class="keyword">typeof</span> ButtonTypes[<span class="built_in">number</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> IABSButtonProps &#123;</span><br><span class="line">  loading?: <span class="built_in">boolean</span>;</span><br><span class="line">  danger?: <span class="built_in">boolean</span>;</span><br><span class="line">  className?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">type</span>?: ButtonType;</span><br><span class="line">  style?: React.CSSProperties;</span><br><span class="line">  icon?: React.ReactNode;</span><br><span class="line">  children?: React.ReactNode;</span><br><span class="line">  disabled?: <span class="built_in">boolean</span>;</span><br><span class="line">  block?: <span class="built_in">boolean</span>;</span><br><span class="line">  large?: <span class="built_in">boolean</span>;</span><br><span class="line">  htmlType?: ButtonHTMLType;</span><br><span class="line">  color?: <span class="string">&#x27;blue&#x27;</span> | <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span> | <span class="string">&#x27;white&#x27;</span>;</span><br><span class="line">  onClick?: React.MouseEventHandler&lt;HTMLButtonElement&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Button: React.FC&lt;IABSButtonProps&gt; = <span class="function">(<span class="params">props: IABSButtonProps</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    danger,</span><br><span class="line">    loading,</span><br><span class="line">    style,</span><br><span class="line">    children,</span><br><span class="line">    large = <span class="literal">false</span>,</span><br><span class="line">    className,</span><br><span class="line">    onClick,</span><br><span class="line">    <span class="keyword">type</span> = <span class="string">&#x27;primary&#x27;</span>,</span><br><span class="line">    icon,</span><br><span class="line">    block = <span class="literal">false</span>,</span><br><span class="line">    disabled,</span><br><span class="line">    htmlType,</span><br><span class="line">    color,</span><br><span class="line">  &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> classes = classNames(<span class="string">&#x27;fish-btn&#x27;</span>, className, &#123;</span><br><span class="line">    <span class="string">&#x27;fish-btn-large&#x27;</span>: large,</span><br><span class="line">    <span class="string">&#x27;fish-btn-block&#x27;</span>: block,</span><br><span class="line">    <span class="string">&#x27;fish-btn-link&#x27;</span>: <span class="keyword">type</span> === <span class="string">&#x27;link&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">const</span> displayStyle = block ? <span class="string">&#x27;block&#x27;</span> : <span class="string">&#x27;inline-block&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> newTpye = <span class="keyword">type</span>;</span><br><span class="line">  <span class="keyword">let</span> isDanger = danger;</span><br><span class="line">  <span class="keyword">if</span> (color) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;blue&#x27;</span>:</span><br><span class="line">        newTpye = <span class="string">&#x27;primary&#x27;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;red&#x27;</span>:</span><br><span class="line">        isDanger = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;white&#x27;</span>:</span><br><span class="line">        newTpye = <span class="string">&#x27;default&#x27;</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;yellow&#x27;</span>:</span><br><span class="line">        classes = classNames(classes, <span class="string">&#x27;fish-yellow-btn&#x27;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;green&#x27;</span>:</span><br><span class="line">        classes = classNames(classes, <span class="string">&#x27;fish-green-btn&#x27;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classes&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">display:</span> <span class="attr">displayStyle</span>, <span class="attr">...style</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">AntdButton</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">icon</span>=<span class="string">&#123;icon&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">disabled</span>=<span class="string">&#123;disabled&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">type</span>=<span class="string">&#123;newTpye&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">block</span>=<span class="string">&#123;block&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">htmlType</span>=<span class="string">&#123;htmlType&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">danger</span>=<span class="string">&#123;isDanger&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">loading</span>=<span class="string">&#123;loading&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      &gt;</span></span></span><br><span class="line"><span class="xml">        &#123;children&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">AntdButton</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Button;</span><br></pre></td></tr></table></figure><p>/components/button/index.lessï¼ˆç»„ä»¶æ ·å¼ï¼‰</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color</span>(<span class="variable">@bg</span>, <span class="variable">@bgHover</span>, <span class="variable">@bgActive</span>) <span class="keyword">when</span> (default()) &#123;</span><br><span class="line">  <span class="selector-class">.ant-btn</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">@text-color-inverse</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="variable">@bg</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="variable">@bg</span>;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="variable">@text-color-inverse</span>;</span><br><span class="line">      <span class="attribute">background</span>: <span class="variable">@bgHover</span>;</span><br><span class="line">      <span class="attribute">border-color</span>: <span class="variable">@bgHover</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">&amp;</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">      <span class="attribute">color</span>: <span class="variable">@text-color-inverse</span>;</span><br><span class="line">      <span class="attribute">background</span>: <span class="variable">@bgActive</span>;</span><br><span class="line">      <span class="attribute">border-color</span>: <span class="variable">@bgActive</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fish-btn</span> &#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.fish-btn-block</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.fish-btn-link</span> &#123;</span><br><span class="line">    <span class="selector-class">.ant-btn-link</span> &#123;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.fish-yellow-btn</span> &#123;</span><br><span class="line">    <span class="selector-class">.color</span>(<span class="variable">@warning-color</span>, <span class="variable">@gold-5</span>, <span class="variable">@gold-7</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.fish-green-btn</span> &#123;</span><br><span class="line">    <span class="selector-class">.color</span>(<span class="variable">@success-color</span>, <span class="variable">@green-5</span>, <span class="variable">@green-7</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>/components/button/index.mdï¼ˆç»„ä»¶æ–‡æ¡£ï¼‰</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Button</span></span><br><span class="line"></span><br><span class="line"><span class="attr">group:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/components</span></span><br><span class="line">  <span class="attr">order:</span> <span class="number">1</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="comment">## Button æŒ‰é’®</span></span><br><span class="line"></span><br><span class="line"><span class="string">å“åº”ç”¨æˆ·ç‚¹å‡»è¡Œä¸ºï¼Œè§¦å‘ç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="string">ä»£ç æ¼”ç¤º</span></span><br><span class="line"></span><br><span class="line"><span class="string">```tsx</span></span><br><span class="line"><span class="string">import</span> <span class="string">React</span> <span class="string">from</span> <span class="string">&#x27;react&#x27;</span><span class="string">;</span></span><br><span class="line"><span class="string">import</span> &#123; <span class="string">Button</span>, <span class="string">Space</span> &#125; <span class="string">from</span> <span class="string">&#x27;fish-ui&#x27;</span><span class="string">;</span></span><br><span class="line"></span><br><span class="line"><span class="string">export</span> <span class="string">default</span> <span class="string">()</span> <span class="string">=&gt;</span> <span class="string">(</span></span><br><span class="line">  <span class="string">&lt;Space&gt;</span></span><br><span class="line">    <span class="string">&lt;Button&gt;Button&lt;/Button&gt;</span></span><br><span class="line">    <span class="string">&lt;Button</span> <span class="string">danger&gt;Button&lt;/Button&gt;</span></span><br><span class="line">    <span class="string">&lt;Button</span> <span class="string">large&gt;Button&lt;/Button&gt;</span></span><br><span class="line">  <span class="string">&lt;/Space&gt;</span></span><br><span class="line"><span class="string">);</span></span><br></pre></td></tr></table></figure><h3 id="æŒ‰é’®é¢œè‰²"><a href="#æŒ‰é’®é¢œè‰²" class="headerlink" title="æŒ‰é’®é¢œè‰²"></a>æŒ‰é’®é¢œè‰²</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import &#123; Button, Space &#125; from &#x27;fish-ui&#x27;</span><br><span class="line"></span><br><span class="line">export default () =&gt; (</span><br><span class="line">  &lt;Space&gt;</span><br><span class="line">    &lt;Button color=&quot;white&quot;&gt;Button&lt;/Button&gt;</span><br><span class="line">    &lt;Button color=&quot;blue&quot;&gt;Button&lt;/Button&gt;</span><br><span class="line">    &lt;Button color=&quot;red&quot;&gt;Button&lt;/Button&gt;</span><br><span class="line">    &lt;Button color=&quot;yellow&quot;&gt;Button&lt;/Button&gt;</span><br><span class="line">    &lt;Button color=&quot;green&quot;&gt;Button&lt;/Button&gt;</span><br><span class="line">    &lt;Button&gt;Button&lt;/Button&gt;</span><br><span class="line">  &lt;/Space&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>é¡µé¢å±•ç¤ºï¼š</p><p><img src="/2022/01/19/dumi/image5.png" alt="image"></p><p>åˆ°è¿™é‡Œï¼ŒåŸºäº antd çš„ Button ç»„ä»¶åŠæ–‡æ¡£çš„ç¼–å†™å·²ç»æœ‰äº†é›å½¢ï¼Œä½†æ˜¯æ–‡æ¡£å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ† API è¿˜æ²¡æœ‰åŠ ä¸Šï¼Œä½¿ç”¨ md è¯­æ³•ç¼–å†™ API æ˜¾å¾—ç¹çä¹Ÿè¿èƒŒäº†ä¸“æ³¨ç»„ä»¶å¼€å‘çš„åˆè¡·ã€‚æˆ‘ä»¬ä½¿ç”¨çš„ TSï¼Œå¦‚æœ API èƒ½æ ¹æ®ç±»å‹å£°æ˜åŠä»£ç æ³¨é‡Šè‡ªåŠ¨ç”Ÿæˆé‚£å²‚ä¸ç¾å“‰ï¼Œæ˜¯çš„å®ƒå¯ä»¥ï¼Œå³é€šè¿‡ JS Doc æ³¨è§£ + TypeScript ç±»å‹å®šä¹‰çš„æ–¹å¼å®ç°ç»„ä»¶ API çš„è‡ªåŠ¨ç”Ÿæˆã€‚</p><h2 id="è‡ªåŠ¨ç”Ÿæˆ-API"><a href="#è‡ªåŠ¨ç”Ÿæˆ-API" class="headerlink" title="è‡ªåŠ¨ç”Ÿæˆ API"></a>è‡ªåŠ¨ç”Ÿæˆ API</h2><blockquote><p>å‰æï¼šç¡®ä¿ dumi èƒ½å¤Ÿé€šè¿‡ TypeScript ç±»å‹å®šä¹‰ + æ³¨è§£æ¨å¯¼å‡º API çš„å†…å®¹<br>dumi èƒŒåçš„ç±»å‹è§£æå·¥å…·æ˜¯ react-docgen-typescriptï¼Œæ›´å¤šç±»å‹å’Œæ³¨è§£çš„ç”¨æ³•å¯å‚è€ƒ <a href="https://github.com/styleguidist/react-docgen-typescript#example">å®ƒçš„æ–‡æ¡£</a></p></blockquote><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> react-docgen-typescript</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶ styleguide.config.js</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = &#123;</span><br><span class="line">propsParser: <span class="built_in">require</span>(<span class="string">&#x27;react-docgen-typescript&#x27;</span>).withDefaultConfig([parserOptions]).parse,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹ç»„ä»¶ä»£ç "><a href="#ä¿®æ”¹ç»„ä»¶ä»£ç " class="headerlink" title="ä¿®æ”¹ç»„ä»¶ä»£ç "></a>ä¿®æ”¹ç»„ä»¶ä»£ç </h3><p>components/button/index.tsx åŠ æ³¨é‡Šå¦‚ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface IABSButtonProps &#123;</span><br><span class="line"><span class="comment">/**è®¾ç½®æŒ‰é’®è½½å…¥çŠ¶æ€ */</span></span><br><span class="line">loading?: boolean;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*è®¾ç½®å±é™©æŒ‰é’®</span></span><br><span class="line"><span class="comment">*@default false</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  danger?: boolean;</span><br><span class="line">  className?: string;</span><br><span class="line">  <span class="comment">/**æŒ‰é’®ç±»å‹ */</span></span><br><span class="line">  type?: ButtonType;</span><br><span class="line">  style?: React.CSSProperties;</span><br><span class="line">  <span class="comment">/**è®¾ç½®æŒ‰é’®çš„å›¾æ ‡ç»„ä»¶ */</span></span><br><span class="line">  <span class="attribute">icon</span>?: React.ReactNode;</span><br><span class="line">  children?: React.ReactNode;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">* æŒ‰é’®å¤±æ•ˆçŠ¶æ€</span></span><br><span class="line"><span class="comment">* @default false</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  disabled?: boolean;</span><br><span class="line">  block?: boolean;</span><br><span class="line">  large?: boolean;</span><br><span class="line">  htmlType?: ButtonHTMLType;</span><br><span class="line">  <span class="comment">/**æŒ‰é’®é¢œè‰² */</span></span><br><span class="line">  <span class="attribute">color</span>?: <span class="string">&#x27;blue&#x27;</span> | <span class="string">&#x27;red&#x27;</span> | <span class="string">&#x27;yellow&#x27;</span> | <span class="string">&#x27;green&#x27;</span> | <span class="string">&#x27;white&#x27;</span>;</span><br><span class="line">  onClick?: React.MouseEventHandler&lt;HTMLButtonElement&gt;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>components/button/index.md åœ¨ä½ æƒ³è¦æ˜¾ç¤º API çš„é¡µé¢ä½ç½®å¼•ç”¨ API æ ‡ç­¾</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">&lt;API&gt;</span><span class="section">&lt;/API&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h3><p>åŸºäºä»¥ä¸Šä»£ç ï¼Œè‡ªåŠ¨ç”Ÿæˆå¦‚ä¸‹ API è¡¨æ ¼ï¼š</p><p><img src="/2022/01/19/dumi/image6.png" alt="image"></p><h1 id="è‡ªåŠ¨åŒ–éƒ¨ç½²"><a href="#è‡ªåŠ¨åŒ–éƒ¨ç½²" class="headerlink" title="è‡ªåŠ¨åŒ–éƒ¨ç½²"></a>è‡ªåŠ¨åŒ–éƒ¨ç½²</h1><blockquote><p>å°†ç»„ä»¶åº“è‡ªåŠ¨åŒ–éƒ¨ç½²è‡³ Github gh-pagesï¼Œç”±äº github è®¿é—®æ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥åœ¨ Gitee gh-pages ä¹Ÿéƒ¨ç½²ä¸€ä»½ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œè®¿é—®æˆ‘çš„ç»„ä»¶åº“ï¼š<a href="https://yingliyu.github.io/fish-ui">https://yingliyu.github.io/fish-ui</a> ã€ <a href="http://ylyubook.gitee.io/fish-ui">http://ylyubook.gitee.io/fish-ui</a><br>å¦‚æœä¸æ˜¯éƒ¨ç½²åœ¨æ ¹ç›®å½•éœ€è¦ä¿®æ”¹.umirc.ts é…ç½®ï¼Œä»¥ fish-ui ä¸ºä¾‹ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// .umirc.ts</span></span><br><span class="line"><span class="function">export <span class="literal">default</span> <span class="title">defineConfig</span>(<span class="params">&#123;</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">base</span>: <span class="string">&#x27;/fish-ui&#x27;</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">publicPath: <span class="string">&#x27;/fish-ui/&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">...</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span>)</span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º<code>.github/workflows/gh-pages.yml</code></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">name:</span> Deploy Github Pages <span class="meta"># Actions åå­—</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">on:</span> <span class="meta"># è§¦å‘æ¡ä»¶</span></span><br><span class="line"><span class="symbol">push:</span></span><br><span class="line"><span class="symbol">branches:</span> - master <span class="meta"># ä»…å‘ master åˆ†æ”¯ push æ—¶è§¦å‘</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">jobs:</span></span><br><span class="line"><span class="symbol">build:</span> <span class="meta"># job id</span></span><br><span class="line"><span class="symbol">name:</span> Build and publish <span class="meta"># job åï¼Œä¸å†™é»˜è®¤ä½¿ç”¨ job id</span></span><br><span class="line">runs-on: ubuntu-latest <span class="meta"># è¿è¡Œç¯å¢ƒï¼Œå¯é€‰ ubuntu-latest, ubuntu-18.04, ubuntu-16.04, windows-latest, windows-2019, windows-2016, macOS-latest, macOS-10.14</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">    steps:</span></span><br><span class="line">      - uses: actions/checkout@v2</span><br><span class="line"></span><br><span class="line">      - name: Use Node.js <span class="number">14.</span>x</span><br><span class="line"><span class="symbol">        uses:</span> actions/setup-node@v2</span><br><span class="line"><span class="symbol">        with:</span></span><br><span class="line">          node-version: <span class="number">14.</span>x</span><br><span class="line"></span><br><span class="line">      - name: Setup  env</span><br><span class="line"><span class="symbol">        run:</span> |</span><br><span class="line">          npm install</span><br><span class="line">      - name: Generate public files</span><br><span class="line"><span class="symbol">        run:</span> |</span><br><span class="line">          npm run docs:build</span><br><span class="line">      <span class="meta"># å‘å¸ƒåˆ° github pages ä¸Š</span></span><br><span class="line">      - name: Auto Deploy</span><br><span class="line"><span class="symbol">        env:</span></span><br><span class="line"><span class="symbol">          GH_REF:</span> github.com<span class="meta-keyword">/xxx/</span>ä»“åº“å.git <span class="meta"># githubä»“åº“åœ°å€http</span></span><br><span class="line"><span class="symbol">          ACCESS_TOKEN:</span> $&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125; <span class="meta"># github token</span></span><br><span class="line"><span class="symbol">          GITEE_REF:</span> gitee.com/[gitee usename]/ä»“åº“å.git  <span class="meta"># giteeä»“åº“åœ°å€,[gitee usename]æ›¿æ¢ä¸ºè‡ªå·±çš„giteeç”¨æˆ·å</span></span><br><span class="line"><span class="symbol">          GITEE_TOKEN:</span> $&#123;&#123; secrets.GITEE_TOKEN&#125;&#125; <span class="meta"># gitee ç§äººä»¤ç‰Œ</span></span><br><span class="line"><span class="symbol">        run:</span> |</span><br><span class="line">          git config --global user.name <span class="string">&quot;your name&quot;</span></span><br><span class="line">          git config --global user.email <span class="string">&quot;your email&quot;</span></span><br><span class="line">          git clone https:<span class="comment">//$&#123;GH_REF&#125; .deploy_git</span></span><br><span class="line">          cd .deploy_git</span><br><span class="line">          git checkout gh-pages</span><br><span class="line">          cd ../</span><br><span class="line">          mv .deploy_git/.git/ ./docs-dist <span class="meta"># æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶å­˜æ”¾ç›®å½•docs-dist</span></span><br><span class="line">          cd ./docs-dist</span><br><span class="line">          git add .</span><br><span class="line">          git commit -m <span class="string">&quot;:construction_worker:CI built at `date +&quot;</span>%Y-%m-%d %H:%M:%S<span class="string">&quot;`&quot;</span></span><br><span class="line">          <span class="meta"># GitHub Pages</span></span><br><span class="line">          git push --force --quiet <span class="string">&quot;https://$&#123;ACCESS_TOKEN&#125;@$&#123;GH_REF&#125;&quot;</span> gh-pages:gh-pages</span><br><span class="line">          <span class="meta"># Gitee Pages</span></span><br><span class="line">          git push --force --quiet <span class="string">&quot;https://[gitee usename]:$&#123;GITEE_TOKEN&#125;@$&#123;GITEE_REF&#125;&quot;</span> gh-pages:gh-pages</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Š GITEE_TOKEN æ˜¯åœ¨ gitee ä¸­åˆ›å»ºçš„ç§äººä»¤ç‰Œï¼Œæ·»åŠ åˆ°å¯¹åº”çš„ github ä»“åº“ï¼ŒACCESS_TOKEN æ˜¯ github scretsã€‚</p><h1 id="å‘å¸ƒ-npm-åŒ…"><a href="#å‘å¸ƒ-npm-åŒ…" class="headerlink" title="å‘å¸ƒ npm åŒ…"></a>å‘å¸ƒ npm åŒ…</h1><blockquote><p><strong>æ³¨æ„ï¼š</strong>npm å‘å¸ƒçš„åŒ…æ˜¯å®Œå…¨å…¬å…±çš„ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰ä½¿ç”¨ npm çš„äººéƒ½å¯ä»¥åœ¨ npm ä»“åº“é‡Œä¸‹è½½ä½ å‘å¸ƒçš„åŒ…ï¼Œä½†æ˜¯å®é™…é¡¹ç›®ä¸­ï¼Œéƒ¨é—¨é—´å…¬ç”¨çš„åŒ…å¯èƒ½æ¶‰åŠåˆ°å•†ä¸šæœºå¯†ï¼Œé‚£ä¹ˆå°±ä¸èƒ½åœ¨ npm ä¸Šå‘å¸ƒäº†ï¼Œå…¬å¸éœ€è¦æ­å»ºè‡ªå·±çš„ç§æœ‰åŒ…ç®¡ç†ä»“åº“ï¼Œè¿™æ—¶å¯ä½¿ç”¨ cnpmã€‚</p></blockquote><p>æœ¬æ–‡åªè®°å½• npm åŒ…å‘å¸ƒæ­¥éª¤ï¼Œcnpm ç§æœ‰ä»“åº“çš„æ­å»ºï¼Œ<a href="https://link.zhihu.com/?target=https://www.cnblogs.com/yalong/p/12837461.html">è¯·ç‚¹å‡»è¿™é‡Œ</a>ã€‚<br>å‘å¸ƒä¹‹å‰éœ€è¦åœ¨ package.json åŠ é…ç½®ï¼Œæ·»åŠ ä¸€äº›å¿…è¦çš„æè¿°ä¿¡æ¯ã€‚<br>package.json</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;private&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"> <span class="string">&quot;name&quot;</span>: <span class="string">&quot;fish-ui-pro&quot;</span>,</span><br><span class="line"> <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line"> <span class="string">&quot;description&quot;</span>: <span class="string">&quot;A library of react components&quot;</span>,</span><br><span class="line"> <span class="string">&quot;author&quot;</span>: <span class="string">&quot;yingliyu&quot;</span>,</span><br><span class="line"> <span class="string">&quot;license&quot;</span>: <span class="string">&quot;MIT&quot;</span>,</span><br><span class="line"> <span class="string">&quot;keywords&quot;</span>: [</span><br><span class="line">   <span class="string">&quot;React&quot;</span>,</span><br><span class="line">   <span class="string">&quot;Component&quot;</span></span><br><span class="line"> ],</span><br><span class="line"> <span class="string">&quot;homepage&quot;</span>: <span class="string">&quot;https://yingliyu.github.io/fish-ui&quot;</span>,</span><br><span class="line"> <span class="string">&quot;repository&quot;</span>: &#123;</span><br><span class="line">   <span class="string">&quot;type&quot;</span>: <span class="string">&quot;git&quot;</span>,</span><br><span class="line">   <span class="string">&quot;url&quot;</span>: <span class="string">&quot;https://github.com/yingliyu/fish-ui.git&quot;</span></span><br><span class="line"> &#125;,</span><br><span class="line">  <span class="string">&quot;files&quot;</span>: [</span><br><span class="line">   <span class="string">&quot;docs-dist&quot;</span>,</span><br><span class="line">   <span class="string">&quot;es&quot;</span></span><br><span class="line"> ],</span><br></pre></td></tr></table></figure><ul><li>å°† <code>private</code> å­—æ®µç½®ä¸º false , è¡¨ç¤ºéç§æœ‰åŒ…ï¼›</li><li>æ·»åŠ  <code>description</code> ã€ <code>author </code>ã€ <code>license</code> ã€ <code>keywords</code> ç­‰ç›¸å…³å­—æ®µ;</li><li>æ·»åŠ  <code>homepage</code> å­—æ®µï¼Œå³é¡¹ç›®ä¸»é¡µ URLï¼›</li><li>æ·»åŠ  <code>repository</code> å­—æ®µï¼Œå³é¡¹ç›®ä»“åº“åœ°å€ URLï¼›</li><li>æ·»åŠ  files å­—æ®µï¼Œè¡¨ç¤ºè¦å°†å“ªäº›æ–‡ä»¶ä¸Šä¼ åˆ° npm ä¸Šå»ã€‚å¦‚æœä»€ä¹ˆéƒ½ä¸å†™ï¼Œåˆ™é»˜è®¤ä¼šä½¿ç”¨<code>.gitignore </code>é‡Œé¢çš„ä¿¡æ¯ã€‚ä½†è¦æ³¨æ„ï¼Œä¸ç®¡<code> .gitignore</code> æ€ä¹ˆé…ç½®ï¼Œä¸€äº›æ–‡ä»¶ä¼šå§‹ç»ˆå‘å¸ƒåˆ° <code>package</code> ä¸Šï¼Œè¿™äº›æ–‡ä»¶åŒ…æ‹¬ <code>package.json </code>ã€ <code>README.md </code>ã€ <code>LICENSE </code>ç­‰ç­‰ï¼›</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>package.json</span><br><span class="line"><span class="string">&quot;peerDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;react&quot;</span>: <span class="string">&quot;&gt;=16.9.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;react-dom&quot;</span>: <span class="string">&quot;&gt;=16.9.0&quot;</span>,</span><br><span class="line">     <span class="string">&quot;antd&quot;</span>: <span class="string">&quot;&gt;=4.18.0&quot;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><blockquote><p>æ‰§è¡Œ<code>npm login</code>ï¼Œä¾æ¬¡è¾“å…¥æ³¨å†Œ npm æ—¶çš„ username, password, email åï¼Œæ‰§è¡Œ<code>npm whoami</code>èƒ½ç»ˆç«¯è¾“å‡ºç”¨æˆ·åï¼Œè¯´æ˜ç™»å½•æˆåŠŸï¼Œæœ€åæ‰§è¡Œ<code>npm publish</code>å‘åŒ…ã€‚æ³¨æ„ï¼špublish ä¹‹å‰å…ˆ build ä¸€ä¸‹ï¼Œç¡®ä¿ dist åŒ…æ˜¯æœ€æ–°çš„ã€‚</p></blockquote><p>æŠ¥é”™ï¼š<br>403ï¼šnpm åŒ…åå·²è¢«ä½¿ç”¨<br>â€‹</p><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><p>å‚è€ƒï¼š</p><ul><li><a href="https://d.umijs.org/zh-CN/guide">dumi å®˜ç½‘</a></li><li><a href="https://juejin.cn/post/6844904200359378958#heading-26">https://juejin.cn/post/6844904200359378958#heading-26</a></li></ul><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">dumiæ­å»ºç»„ä»¶åº“</summary>
    
    
    
    
    <category term="umi" scheme="https://yingliyu.github.io/tags/umi/"/>
    
    <category term="dumi" scheme="https://yingliyu.github.io/tags/dumi/"/>
    
  </entry>
  
  <entry>
    <title>2021ï¼Œæ²ªæ¼‚äº”å¹´é‡è¿”æ ¡å›­çš„ä¸€å¹´</title>
    <link href="https://yingliyu.github.io/2022/01/19/2021-summary/"/>
    <id>https://yingliyu.github.io/2022/01/19/2021-summary/</id>
    <published>2022-01-19T03:08:56.635Z</published>
    <updated>2022-01-19T03:08:56.635Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2022/01/19/2021-summary/banner.jpg" alt="img"><br>2021 å¹´ï¼Œä¾ç„¶æ˜¯ä¸ºç”Ÿæ´»å¿™ç¢Œçš„ä¸€å¹´ï¼Œè€ƒç ”ã€è€ƒè¯ã€æ¢å·¥ä½œâ€¦â€¦</p><p>å›æƒ³èµ·å»å¹´æ­¤æ—¶æ­£åœ¨ç´§å¼ çš„å¤‡æˆ˜è€ƒç ”ï¼Œæˆ–è®¸æ˜¯å¹´é¾„å¤§äº†å¿ƒæ€ä¸å¦‚ä»å‰äº†ï¼Œè€ƒè¯•å‰å¤•ç‰¹åˆ«ç„¦è™‘ä¸€åº¦å¤±çœ ã€‚ä¸è¿‡è¿‡ç¨‹éƒ½ä¸é‡è¦äº†ï¼Œå› ä¸ºç»“æœè¿˜ä¸é”™ï¼Œç°åœ¨å·²ç»å…¥å­¦åŠå­¦æœŸå•¦ï½</p><h2 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h2><h3 id="æˆ‘æ¢å·¥ä½œäº†-ğŸ’»"><a href="#æˆ‘æ¢å·¥ä½œäº†-ğŸ’»" class="headerlink" title="æˆ‘æ¢å·¥ä½œäº† ğŸ’»"></a>æˆ‘æ¢å·¥ä½œäº† ğŸ’»</h3><p>å°±åœ¨ä»Šå¹´ 10 æœˆåº•æˆ‘ç¦»å¼€äº†å·¥ä½œä¸¤å¹´å¤šçš„å…¬å¸ï¼Œä¸æ˜¯è£¸è¾ï¼Œè¿™ä¸ªå¹´çºªå·²ç»æ²¡æœ‰äº†è£¸è¾çš„å‹‡æ°”ï¼ŒåŸå› ä¸€è¨€éš¾å°½ï¼Œå…¶å®å¹´ä¸­å°±æ‰“ç®—èµ°çš„ï¼Œä½†é¢è¯•äº†ä¸€å‘¨å·¦å³æ²¡æœ‰ç†æƒ³çš„ offer åŠ ä¹‹é¢†å¯¼çš„æŒ½ç•™ï¼Œæˆ‘æ”¾å¼ƒäº†é¢è¯•ï¼Œä¸è¿‡ 10 æœˆåº•åšå®Œé¡¹ç›®åæ‹¿åˆ°äº†æ»¡æ„çš„ offer è¿˜æ˜¯èµ°äº†ã€‚</p><p>å›æƒ³åœ¨é‚£é‡Œçš„ä¸¤å¹´ï¼Œå¹³å°è™½ç„¶ä¸å¤§ï¼Œä½†æ˜¯å¾ˆå¼€å¿ƒè®¤è¯†äº†ä¸€ç¾¤å¯çˆ±çš„å°ä¼™ä¼´å’Œæˆ‘çš„çš„è€å¤§(åº„å“¥)ï¼Œä»–çš„æŠ€æœ¯å¾ˆç‰›ï¼Œè·Ÿä»–å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œä»–çš„æŠ€æœ¯å’Œä¸ºäººå¤„äº‹éƒ½å€¼å¾—æˆ‘å­¦ä¹ ï¼Œä»–æ˜¯ Coach å‹çš„è€å¤§ï¼Œæ˜¯æˆ‘çš„ç†æƒ³ leaderã€‚ä¸è¿‡ä»–åœ¨æˆ‘ä¹‹å‰ç¦»èŒäº†ï¼Œè¯´å®è¯çŸ¥é“ä»–è¦èµ°çš„æ—¶å€™æˆ‘å¾ˆéš¾è¿‡ï¼Œä¸çŸ¥é“ä½ ä»¬æœ‰æ²¡æœ‰é‚£ç§å¾ˆæ…Œåˆå­¤å†›å¥‹æˆ˜çš„æ„Ÿè§‰ï¼Œæ„Ÿè§‰å·¥ä½œéƒ½æä¸èµ·å…´è¶£ï¼Œä¸è¿‡æ…¢æ…¢è¿˜æ˜¯è¦ä¹ æƒ¯è¦è‡ªå·±å¼ºå¤§èµ·æ¥ã€‚</p><span id="more"></span><p>å›½ä¼æ˜¯æœ‰å›½ä¼çš„å¥½ï¼Œç¨³å®šå·¥ä½œå¼ºåº¦ä¸€èˆ¬ï¼Œæ‰€ä»¥æˆ‘æ‰æœ‰æ—¶é—´å‡†å¤‡è€ƒç ”å’Œè€ƒè¯ï¼Œæ€»ä¹‹ï¼Œæ„Ÿæ©æ„Ÿè°¢ï¼Œæ±Ÿæ¹–å†è§ã€‚<br><img src="/2022/01/19/2021-summary/2.png" alt="img"></p><p>ä¸è¿‡è¯´åˆ°æ‰¾å·¥ä½œï¼Œå¹´ä¸­é¢è¯•æˆ‘è¿˜æŒºå—æ‰“å‡» ğŸ‘Š çš„ï¼Œé¢è¯• B ç«™çš„æ—¶å€™ï¼Œé¢è¯•å®˜é¢å¸¦å¾®ç¬‘çš„å‘Šè¯‰æˆ‘è¯´â€œæ—¢ç„¶æƒ³æ‰¾å·¥ä½œå»ºè®®ä½ è¿˜æ˜¯å¥½å¥½å‡†å¤‡ä¸€ä¸‹â€ï¼Œè™½ç„¶ä»–å¾ˆå¤§ç‰›ä¹Ÿå¾ˆå‹å¥½ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆå—ä¼¤ ğŸ˜­ã€‚åŠ ä¹‹æˆ‘å·²å©šæœªè‚²çš„çŠ¶æ€ï¼Œæ‡‚å¾—éƒ½æ‡‚ï¼Œå¹´ä¸­çš„é¢è¯•ä¹Ÿä¸ç–¾è€Œç»ˆ~</p><p>ä¸è¿‡ï¼Œä»Šå¹´ 10 æœˆä»½æ‰¾å·¥ä½œçš„æ—¶å€™è¿˜è›®é¡ºåˆ©çš„ï¼Œæ‰€ä»¥è¯´æ‰¾å·¥ä½œæŠ€æœ¯æ˜¯ä¸€æ–¹é¢ï¼Œç¼˜åˆ†ä¹Ÿæ˜¯ä¸€æ–¹é¢å§ï¼Œæˆ‘å¯èƒ½æ¯”è¾ƒä½›ç³»ï¼Œç°åœ¨çš„å…¬å¸å°è€Œç¾ï¼Œéƒ½æŒºå¥½~</p><h2 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h2><h3 id="æ¬å®¶"><a href="#æ¬å®¶" class="headerlink" title="æ¬å®¶"></a>æ¬å®¶</h3><p>ä»Šå¹´ 5 æœˆä»½çš„æ—¶å€™ä½äº†ä¸€å¹´å¤šçš„æˆ¿å­ ğŸ ï¼Œæˆ¿ä¸œçªç„¶å‘Šè¯‰æˆ‘ä»¬ä¸ç§Ÿäº†ï¼Œæˆ‘ä»¬è¦è¢«æ¬å®¶å•¦ï½çª—å°å…»çš„å°å¯çˆ±è·Ÿæˆ‘èµ°å§ ğŸ§‘â€ğŸ¤â€ğŸ§‘<br><img src="/2022/01/19/2021-summary/3.jpg" alt="img"></p><h3 id="åˆæ¬å®¶"><a href="#åˆæ¬å®¶" class="headerlink" title="åˆæ¬å®¶"></a>åˆæ¬å®¶</h3><p>ç„¶åæ¢äº†ä¸€ä¸ªä¸¤å±…å®¤å’ŒäºŒæˆ¿ä¸œä¸€èµ·ä½ï¼Œä½†æ˜¯æœ‰ä¸€ç§æŸæ‰‹æŸè„šçš„æ„Ÿè§‰ï¼Œè¢«æˆ¿ä¸œç®¡çš„å¤ªç´§äº†å±…ä½ä½“éªŒä¸å¤ªå¥½ï¼Œæˆ‘ä»¬æœæ–­æ¢ï¼ˆäººç”Ÿå»ºè®®: å’ŒäºŒæˆ¿ä¸œä¸€èµ·åˆä½ä¸€å®šè¦æ“¦äº®çœ¼ç›ï¼‰ï¼Œæ‰€ä»¥åˆåˆæ¬å®¶äº†ï½</p><h3 id="å†æ¬å®¶"><a href="#å†æ¬å®¶" class="headerlink" title="å†æ¬å®¶"></a>å†æ¬å®¶</h3><p>ç„¶ååˆæ¬åˆ°äº†å®å±±ï¼Œè¿™ä¸ªæˆ¿ä¸œå¤§å“¥äººå¾ˆå¥½ï¼Œå±…ä½ä½“éªŒè¿˜ä¸é”™ï¼Œæ¬å®¶çœŸçš„å¥½ï¼ˆleiï¼‰å¼€ï¼ˆsiï¼‰å¿ƒï¼ˆäººï¼‰ğŸ¤£</p><p>æ¢åˆ°æ–°å…¬å¸ä¹‹åå¼€å§‹æ¯å¤©å¸¦é¥­ ğŸ‘©â€âš•ï¸</p><h3 id="å°æ—¥å­"><a href="#å°æ—¥å­" class="headerlink" title="å°æ—¥å­"></a>å°æ—¥å­</h3><p>ä»¥å‰çš„å‘¨æœ«éƒ½æ˜¯è®¡åˆ’æ‰¾åœ°æ–¹å»ç©ï¼Œé€›é€›å‘¨è¾¹çš„å…¬å›­å’Œæœ‹å‹ä¸€èµ·çˆ¬çˆ¬å±±ï¼Œæˆ–è€…è¿½å‰§ç”»ç”»ã€‚<br><img src="/2022/01/19/2021-summary/4.png" alt="img"><br>æœ‰ä¸€æ®µæ—¶é—´çªç„¶è¿·ä¸Šäº†åœ¨ç“¶å­ä¸Šç”»ç”»ï¼Œç”¨æ¥åšèŠ±ç“¶ï¼Œè¿™æ˜¯ç”»çš„æœ€å–œæ¬¢çš„ä¸€æ¬¡ï¼Œä½†æ˜¯å› ä¸ºæ˜¯æ°´å½©æ‰€ä»¥å®ƒç»ä¸èµ·é£å¹æ—¥æ™’ï¼Œå°¤å…¶æ€•æ°´ï¼Œç°åœ¨å·²ç»ç‰©å°½å…¶ç”¨äº† ğŸ˜‚ã€‚<br><img src="/2022/01/19/2021-summary/5.png" alt="img"></p><p>æœ‰æ—¶å€™ä¼šç»ƒç»ƒæ¯›ç¬”å­—ï¼Œå–œæ¬¢ä¸´æ‘¹é¢œçœŸå¿çš„ç¢‘å¸–ï¼Œæ„Ÿè§‰èšç„¦åœ¨è‡ªå·±æ„Ÿå…´è¶£çš„åœ°æ–¹èƒ½å…¨èº«è´¯æ³¨ï¼Œèƒ½è®©æˆ‘å¿ƒé™ã€‚<br>ç©ºé—²çš„å‘¨æœ«è¿‡çš„ä¹Ÿç®—æ˜¯ä¸äº¦ä¹ä¹ã€‚<br><img src="/2022/01/19/2021-summary/6.png" alt="img"><br>ä»Šå¹´ä¹æœˆä»½å…¥å­¦ä¹‹åï¼Œå¯¹æˆ‘æ¥è¯´å·¥ä½œæ—¥å°±æ˜¯å‘¨æœ«ï¼Œä¸Šè¯¾è¿˜æŒºç´¯çš„ï¼Œä¸ä¹‹ç›¸æ¯”å·¥ä½œæ—¥åè€Œè½»æ¾å¤šäº†ï¼Œä»¥å‰æœ‰å‘¨æœ«çš„æ—¶å€™æ˜¯å¤šä¹ˆå¤šä¹ˆå¹¸ç¦å•Šï¼Œäººæ€»æ˜¯è¿™æ ·å¤±å»çš„æ—¶å€™æ‰æƒ³èµ·æ¥å»çæƒœï¼Œå¥½åœ¨æˆ‘çš„å‘¨æœ«è¿˜ä¼šå›æ¥çš„å“ˆå“ˆå“ˆ ğŸ˜Š</p><p>å¦å¤–ï¼Œå†ç»å¿«ä¸€å¹´çš„æ—¶é—´ï¼Œç»ˆäºæ‰“å®Œäº† HPV ç–«è‹—ï¼Œæ„¿æœ›è¾¾æˆ~</p><h2 id="ä¸ªäººæå‡"><a href="#ä¸ªäººæå‡" class="headerlink" title="ä¸ªäººæå‡"></a>ä¸ªäººæå‡</h2><h3 id="è€ƒç ”-ğŸ“"><a href="#è€ƒç ”-ğŸ“" class="headerlink" title="è€ƒç ” ğŸ“"></a>è€ƒç ” ğŸ“</h3><p>å¹´åˆæŸ¥è€ƒç ”æˆç»©ï¼Œè¿‡äº†ç¬”è¯•ï¼Œå¼€å§‹å‡†å¤‡é¢è¯•ï¼Œç„¶å 7 æœˆä»½æ‹¿åˆ°äº†å½•å–é€šçŸ¥ä¹¦ ğŸ‰<br><img src="/2022/01/19/2021-summary/7.png" alt="img"><br>å…¶å®æˆ‘è¢«é—®çš„æœ€å¤šçš„é—®é¢˜å°±æ˜¯ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©è€ƒç ”å‘¢ï¼Ÿ</p><p>æˆ‘ç»†æƒ³ä¸€ä¸‹ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªæ–¹é¢çš„åŸå› ï¼š</p><ol><li>é¦–å…ˆæ˜¯ç¯å¢ƒå½±å“ï¼Œæˆ‘èº«è¾¹çš„äººéƒ½å¤ªä¼˜ç§€äº†ï¼Œå¤è¯è¯´ï¼Œè¿‘æœ±è€…èµ¤è¿‘å¢¨è€…é»‘ï¼Œå°±æ˜¯è¿™æ ·äº†ã€‚</li><li>å…¶æ¬¡æ˜¯èº«è¾¹æœ‹å‹å’Œäº²äººçš„é¼“åŠ±ï¼Œå°±æ˜¯å‰é¢è¯´çš„åº„å“¥ï¼Œé‚£æ—¶å€™å…¬å¸ä¹Ÿä¸å¿™ï¼Œç„¶åä»–ä¸€ç›´é¼“åŠ±æˆ‘è€ƒç ”ï¼Œè™½ç„¶æˆ‘å½“æ—¶æœ‰æ‹’ç»ï¼Œä½†æ˜¯é‚£ç²’ç§å­å·²ç»æ·±æ·±åŸ‹åœ¨æˆ‘å¿ƒé‡Œï¼Œåæ¥å®ƒå°±èŒèŠ½äº†ã€‚</li><li>ç„¶åæ˜¯è‡ªå·±ä¹Ÿæƒ³æå‡è‡ªå·±çš„å­¦å†ï¼ˆæˆ–è€…è¯´ä¸ºä»¥åæ€ä¹ˆè½¬è¡Œåšå‡†å¤‡ï¼Œæ¯•ç«Ÿä¸èƒ½å†™ä¸€è¾ˆå­ä»£ç å§ï¼Œæ‰€ä»¥åœ¨è¿™æ–¹é¢åŠªåŠ›ä¸€ä¸‹ï¼‰ï¼Œå¸Œæœ›ä»¥åèƒ½è·å¾—æ›´å¤šçš„æ±‚èŒæœºä¼šã€‚</li></ol><p>ç„¶ååœ¨å»å¹´ 8 æœˆä»½å¼€å§‹ï¼Œè‡ªå­¦å¤‡è€ƒï¼Œå‘¨æœ«å¢å“¥é™ªæˆ‘ä¸€èµ·æ³¡å›¾ä¹¦é¦†ï¼Œç”šè‡³æˆ‘ä»¬çš„å©šå‡æˆ‘ä¿©éƒ½æ˜¯åœ¨å›¾ä¹¦é¦†é‡Œè¿‡çš„ï¼Œè¿˜è¢«åº„å“¥è°ƒä¾ƒä¸ºæœ€åŠ±å¿—çš„å©šå‡ï¼Œç°åœ¨æˆ‘å›æƒ³èµ·æ¥æ„Ÿè§‰å½“æ—¶æœ‰ä¸€è‚¡ç¥å¥‡çš„åŠ›é‡åœ¨æ¨ç€æˆ‘ï¼Œæˆ‘ä¹‹å‰ä»æ¥æ²¡æœ‰è¿™æ–¹é¢çš„è®¡åˆ’ï¼Œç”šè‡³æ„Ÿè§‰è¿™ä¸ªäººæœ‰ç‚¹ä¸åƒæˆ‘ ğŸ˜‚ï¼Œæˆ‘æœ¬ä¸æ˜¯ä»€ä¹ˆäº‰å¼ºå¥½èƒœä¹‹äººï¼Œåè€Œæœ‰ç‚¹éšé‡è€Œå®‰ï¼Œå¯èƒ½æˆ‘å¯¹è‡ªå·±è¿˜ä¸å¤Ÿäº†è§£å§ã€‚</p><p>ä¹æœˆä»½æˆ‘å…¥å­¦å•¦ï¼Œè®¤è¯†äº†ä¸€ç¾¤å¯çˆ±çš„åŒå­¦ï¼Œä¸å¾—ä¸è¿‡æ„Ÿå¹ä¸€ä¸‹æˆ‘çš„åŒå­¦ä»¬éƒ½å¥½ï¼ˆyouï¼‰å·ï¼ˆxiuï¼‰å•Š ğŸ¶ï¼Œå­¦ä¸šè¿˜æŒºæœ‰å‹åŠ›çš„ï¼Œè¿™ä¸å…ƒæ—¦å‡æœŸè¿˜æ²¡åˆ°æˆ‘å·²ç»åœ¨æœŸå¾…å¯’å‡å•¦ ğŸ‰</p><p>åŠ æ²¹å§ï½äº‰å–é¡ºåˆ©æ¯•ä¸š ğŸ“</p><h3 id="è€ƒè¯-ğŸ“’"><a href="#è€ƒè¯-ğŸ“’" class="headerlink" title="è€ƒè¯ ğŸ“’"></a>è€ƒè¯ ğŸ“’</h3><p>3 æœˆåº•è€ƒç ”é¢è¯•ç»“æŸä¹‹åï¼Œ4 æœˆä»½å¼€å§‹å‡†å¤‡è½¯è€ƒï¼Œå¯ä»¥è¯´ä¹Ÿæ˜¯åœ¨åŒäº‹çš„æ€‚æ¿ä¸‹ä¸´è¿‘æŠ¥åç»“æŸçš„æœ€åå‡ å¤©æˆ‘æŠ¥åäº†ï¼Œç„¶åå¼€å§‹å¤‡è€ƒï¼Œ5 æœˆä»½æ”¶åˆ°äº†å°ç»¿æœ¬æœ¬ï¼Œæ„Ÿè°¢æˆ‘åŒäº‹çš„å¸®åŠ© ğŸ™<br><img src="/2022/01/19/2021-summary/8.png" alt="img"></p><h2 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h2><p>2021 å¹´æ˜¯æ„Ÿæ©çš„ä¸€å¹´ï¼Œéœ€è¦æ„Ÿè°¢çš„äººå¤ªå¤šï¼Œæ„Ÿè°¢è¾…å¯¼å‘˜æ¨è€å¸ˆï¼Œæ„Ÿè°¢åº„å“¥çš„å¸®åŠ©å’Œé¼“åŠ±ï¼Œæ„Ÿè°¢å­¦é•¿å‡¯å“¥çš„è§£ç–‘ç­”æƒ‘ï¼Œæ„Ÿè°¢å¢å“¥æ€»æ˜¯æ”¯æŒæˆ‘çš„å†³å®šï¼Œåœ¨æˆ‘å¤‡è€ƒæ—¶é™ªæˆ‘ä¸€èµ·æ³¡å›¾ä¹¦é¦†ã€è€ƒè¯•ã€å…¥å­¦çš„ä¸€è·¯å§‹ç»ˆé™ªåœ¨æˆ‘å·¦å³â€¦â€¦æ„Ÿè°¢åœ¨æˆ‘éœ€è¦å¸®åŠ©çš„æ—¶å€™æœ‰ä½ ä»¬åœ¨ï¼ï¼ï¼</p><p>2021 å·²ä½™é¢ä¸è¶³ï¼ŒæŠ“ä½ 2021 çš„å°¾å·´ï¼ŒåŠ æ²¹~<br>æ„¿ 2022 å°½å¦‚æ‰€æœŸ~</p><blockquote><p>è¿™ä¸€å¹´ï¼Œé‡è§ï¼Œè·å¾—ï¼Œå¤±å»ï¼Œæˆé•¿ï¼Œé‡Šæ€€ï¼Œå®Œç»“ã€‚æ„¿ä¸æ—§äº‹å½’äºå°½ï¼Œæ¥å¹´ä¾æ—§è¿èŠ±å¼€ã€‚</p></blockquote><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">2021å¹´ç»ˆæ€»ç»“</summary>
    
    
    
    
    <category term="å¹´ç»ˆæ€»ç»“" scheme="https://yingliyu.github.io/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>Formilyå…¥é—¨å®è·µ</title>
    <link href="https://yingliyu.github.io/2021/12/01/Formily-demo/"/>
    <id>https://yingliyu.github.io/2021/12/01/Formily-demo/</id>
    <published>2021-12-01T15:14:30.000Z</published>
    <updated>2022-01-19T03:08:56.643Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Formily æ˜¯é˜¿é‡Œå¼€æºçš„åŠ¨æ€åŒ–è¡¨å•çš„è§£å†³æ–¹æ¡ˆï¼Œä¼˜é›…çš„è§£å†³äº†å¤šç§å¤æ‚åœºæ™¯çš„è¡¨å•çš„æ•°æ®ã€çŠ¶æ€ç®¡ç†åŠå¤¸è¡¨å•é€šä¿¡é—®é¢˜ï¼ŒåŒæ—¶è§„é¿äº†å…¨é‡æ¸²æŸ“çš„å¼Šç«¯ï¼Œæ€§èƒ½ä¼˜è¶Šã€‚åˆšå¥½æ»¡è¶³æˆ‘è¿‘æœŸå·¥ä½œä¸­çš„ä¸šåŠ¡éœ€æ±‚ï¼Œå•ƒäº†å°†è¿‘ä¸€å‘¨çš„æ–‡æ¡£ï¼Œå¯¹ Family æœ‰äº†åˆæ­¥çš„äº†è§£ï¼Œåç»­ä½¿ç”¨èµ·æ¥å†å‡ºç¿»å‘æŒ‡å—ã€‚</p><h2 id="åˆæ­¥äº†è§£"><a href="#åˆæ­¥äº†è§£" class="headerlink" title="åˆæ­¥äº†è§£"></a>åˆæ­¥äº†è§£</h2><p>â€‹Formily åŸºäº MVVM çš„è®¾è®¡åŸåˆ™ï¼Œå¸¸ç”¨çš„åŸºç¡€æ ¸å¿ƒåº“æœ‰<code>@formily/core</code>ã€<code>@formily/react</code>ã€<code>@formily/vue</code>ã€<code>@formily/antd</code>ï¼Œæ”¯æŒ react å’Œ vueï¼ŒåŒæ—¶æ”¯æŒ Markup Schemaã€ JSX ä»¥åŠç°åœ¨ä¸šç•Œæœ€æµè¡Œçš„ JSON Schema çš„å†™æ³•ã€‚</p><p>Formily åˆ†ä¸ºäº†<strong>å†…æ ¸å±‚</strong>ï¼Œ<strong>UI æ¡¥æ¥å±‚</strong>ï¼Œ<strong>æ‰©å±•ç»„ä»¶å±‚</strong>ï¼Œå’Œ<strong>é…ç½®åº”ç”¨å±‚</strong>ï¼Œå¦‚ä¸‹å›¾ã€‚<br><strong>å†…æ ¸å±‚</strong>æ˜¯ UI æ— å…³çš„ï¼Œå®ƒä¿è¯äº†ç”¨æˆ·ç®¡ç†çš„é€»è¾‘å’ŒçŠ¶æ€æ˜¯ä¸è€¦åˆä»»ä½•ä¸€ä¸ªæ¡†æ¶ã€‚<br>JSON Schema ç‹¬ç«‹å­˜åœ¨ï¼Œç»™ UI æ¡¥æ¥å±‚æ¶ˆè´¹ï¼Œä¿è¯äº†åè®®é©±åŠ¨åœ¨ä¸åŒ UI æ¡†æ¶ä¸‹çš„ç»å¯¹ä¸€è‡´æ€§ï¼Œä¸éœ€è¦é‡å¤å®ç°åè®®è§£æé€»è¾‘ã€‚<br><strong>æ‰©å±•ç»„ä»¶å±‚</strong>ï¼Œæä¾›ä¸€ç³»åˆ—è¡¨å•åœºæ™¯åŒ–ç»„ä»¶ï¼Œä¿è¯ç”¨æˆ·å¼€ç®±å³ç”¨ã€‚æ— éœ€èŠ±å¤§é‡æ—¶é—´åšäºŒæ¬¡å¼€å‘ã€‚<br><img src="/2021/12/01/Formily-demo/image.png" alt="Formilyçš„åˆ†å±‚æ¶æ„å›¾"></p><blockquote><p>æ ¸å¿ƒä¼˜åŠ¿</p><ul><li>é«˜æ€§èƒ½</li><li>å¼€ç®±å³ç”¨</li><li>è”åŠ¨é€»è¾‘å®ç°é«˜æ•ˆ</li><li>è·¨ç«¯èƒ½åŠ›ï¼Œé€»è¾‘å¯è·¨æ¡†æ¶ï¼Œè·¨ç»ˆç«¯å¤ç”¨</li><li>åŠ¨æ€æ¸²æŸ“èƒ½åŠ›</li></ul></blockquote><p>æ ¸å¿ƒåŠ£åŠ¿ï¼šå­¦ä¹ æˆæœ¬è¾ƒé«˜ï¼Œéœ€å¼•å¤šä¸ªåŒ…ï¼ŒåŒ…ä½“ç§¯è¾ƒå¤§ã€‚<br>â€‹</p><p>ç¡®å® Formily çš„å­¦ä¹ æˆæœ¬è¿˜æ˜¯ç›¸å¯¹è¾ƒé«˜çš„ï¼Œå‡ å¤§æ ¸å¿ƒåº“ä¸€å †çš„æ–‡æ¡£å’Œ API ä¼šè®©ä½ çœ¼èŠ±ç¼­ä¹±ï¼Œä½†æ˜¯æ—¢ç„¶è¦å­¦å°±è¦è€ä¸‹å¿ƒæ¥ï¼Œæ€è·¯ç†æ¸…ä¹‹åå°±è½»è½¦ç†Ÿè·¯äº†ã€‚<br>â€‹</p><p>æ ¸å¿ƒåº“ä»‹ç»ï¼š<br><code>@formily/core</code>ï¼š<strong>ViewModel å±‚</strong>ï¼Œè´Ÿè´£ç®¡ç†è¡¨å•çš„çŠ¶æ€ï¼Œè¡¨å•æ ¡éªŒï¼Œè”åŠ¨ç­‰ç­‰ã€‚<br><code>@formily/react</code>ï¼š** Model å±‚<strong>ï¼Œä½œä¸º UI åº“æ¥æ¥å…¥å†…æ ¸æ•°æ®ï¼Œç”¨æ¥å®ç°æœ€ç»ˆçš„è¡¨å•äº¤äº’æ•ˆæœï¼Œå¯¹äºä¸åŒæ¡†æ¶çš„ç”¨æˆ·ï¼Œä½¿ç”¨æœ‰ä¸åŒçš„æ¡¥æ¥åº“ï¼Œè¿™é‡Œä½¿ç”¨<code>react</code>ä¸ºä¾‹ï¼Œä½¿ç”¨ vue å®‰è£…<code>@formily/vue</code>ã€‚<br><code>@formily/antd</code>ï¼š</strong>View å±‚**ï¼Œåœ¨<code>Ant Design</code>åŸºç¡€ä¹‹ä¸Šå°è£…çš„å¼€ç®±å³ç”¨çš„ç»„ä»¶åº“ã€‚</p><h2 id="ä½¿ç”¨å‡†å¤‡"><a href="#ä½¿ç”¨å‡†å¤‡" class="headerlink" title="ä½¿ç”¨å‡†å¤‡"></a>ä½¿ç”¨å‡†å¤‡</h2><p>å®‰è£…ä¾èµ–ï¼Œè¿™é‡Œä»¥<code>React+Antd </code>ä¸ºä¾‹</p><p>ä½¿ç”¨ yarn<br><code>yarn add @formily/core</code><br><code>yarn add @formily/react</code><br><code>yarn add antd moment @formily/antd</code><br>â€‹</p><p>or ä½¿ç”¨ npm<br><code>npm install --save @formily/core</code><br><code>npm install --save @formily/react</code><br><code>npm install --save antd moment @formily/antd</code><br>â€‹</p><p>å¯¼å…¥ä¾èµ–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createForm &#125; <span class="keyword">from</span> <span class="string">&#x27;@formily/core&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; FormProvider, Field &#125; <span class="keyword">from</span> <span class="string">&#x27;@formily/react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; FormItem, Input &#125; <span class="keyword">from</span> <span class="string">&#x27;@formily/antd&#x27;</span></span><br></pre></td></tr></table></figure><p>â€‹</p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>ä»¥<code>JSON Schema</code>å†™æ³•ä¸ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createForm &#125; <span class="keyword">from</span> <span class="string">&#x27;@formily/core&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createSchemaField, FormConsumer, FormProvider &#125; <span class="keyword">from</span> <span class="string">&#x27;@formily/react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; FormItem, Input, Password, Submit, FormLayout, FormButtonGroup &#125; <span class="keyword">from</span> <span class="string">&#x27;@formily/antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> ICONS <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨æ¥åˆ›å»ºè¡¨å•æ ¸å¿ƒé¢†åŸŸæ¨¡å‹ï¼Œå®ƒæ˜¯ä½œä¸ºMVVMè®¾è®¡æ¨¡å¼çš„æ ‡å‡† ViewModel</span></span><br><span class="line"><span class="keyword">const</span> form = createForm()</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª SchemaField ç»„ä»¶ç”¨äºè§£æJSON-SchemaåŠ¨æ€æ¸²æŸ“è¡¨å•çš„ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> SchemaField = createSchemaField(&#123;</span><br><span class="line">  <span class="comment">// ç»„ä»¶åˆ—è¡¨</span></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    FormLayout,</span><br><span class="line">    FormItem,</span><br><span class="line">    Input,</span><br><span class="line">    Password</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// å…¨å±€ä½œç”¨åŸŸï¼Œç”¨äºå®ç°åè®®è¡¨è¾¾å¼å˜é‡æ³¨å…¥</span></span><br><span class="line">  <span class="attr">scope</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">icon</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> React.createElement(ICONS[name])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**åˆå§‹åŒ–ä¸€ä»½json schema</span></span><br><span class="line"><span class="comment"> * è§£æ json-schema çš„èƒ½åŠ›ï¼›å°† json-schema è½¬æ¢æˆ Field Model çš„èƒ½åŠ›ï¼›ç¼–è¯‘ json-schema è¡¨è¾¾å¼çš„èƒ½åŠ›</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">const</span> schema = &#123;</span><br><span class="line">  <span class="comment">// schema type</span></span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;object&#x27;</span>,</span><br><span class="line">  <span class="attr">properties</span>: &#123;</span><br><span class="line">    <span class="attr">layout</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;void&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;x-component&#x27;</span>: <span class="string">&#x27;FormLayout&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;x-component-props&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">labelCol</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">wrapperCol</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="attr">labelAlign</span>: <span class="string">&#x27;right&#x27;</span></span><br><span class="line">        <span class="comment">// layout: &#x27;vertical&#x27;,</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// å±æ€§æè¿°</span></span><br><span class="line">      <span class="attr">properties</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: &#123;</span><br><span class="line">          <span class="comment">// schema type</span></span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">          <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;ç”¨æˆ·å&#x27;</span>,</span><br><span class="line">          <span class="comment">// å¿…å¡«</span></span><br><span class="line">          <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="comment">// å­—æ®µ UI åŒ…è£…å™¨ç»„ä»¶</span></span><br><span class="line">          <span class="string">&#x27;x-decorator&#x27;</span>: <span class="string">&#x27;FormItem&#x27;</span>,</span><br><span class="line">          <span class="comment">// å­—æ®µ UI ç»„ä»¶</span></span><br><span class="line">          <span class="string">&#x27;x-component&#x27;</span>: <span class="string">&#x27;Input&#x27;</span>,</span><br><span class="line">          <span class="comment">// å­—æ®µ UI ç»„ä»¶å±æ€§</span></span><br><span class="line">          <span class="string">&#x27;x-component-props&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">prefix</span>: <span class="string">&quot;&#123;&#123;icon(&#x27;UserOutlined&#x27;)&#125;&#125;&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">password</span>: &#123;</span><br><span class="line">          <span class="attr">type</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;å¯†ç &#x27;</span>,</span><br><span class="line">          <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="string">&#x27;x-decorator&#x27;</span>: <span class="string">&#x27;FormItem&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;x-decorator-props&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">addonAfter</span>: <span class="string">&#x27;å¼ºåº¦é«˜&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">&#x27;x-component&#x27;</span>: <span class="string">&#x27;Password&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;x-component-props&#x27;</span>: &#123;</span><br><span class="line">            <span class="attr">prefix</span>: <span class="string">&quot;&#123;&#123;icon(&#x27;LockOutlined&#x27;)&#125;&#125;&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">FormProvider</span> <span class="attr">form</span>=<span class="string">&#123;form&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">FormLayout</span> <span class="attr">layout</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">SchemaField</span> <span class="attr">schema</span>=<span class="string">&#123;schema&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">FormLayout</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">FormButtonGroup</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Submit</span> <span class="attr">onSubmit</span>=<span class="string">&#123;console.log&#125;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">Submit</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">FormButtonGroup</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">FormConsumer</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;() =&gt; (</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">              <span class="attr">width:</span> <span class="attr">340</span>,</span></span></span><br><span class="line"><span class="tag"><span class="xml">              <span class="attr">marginTop:</span> <span class="attr">20</span>,</span></span></span><br><span class="line"><span class="tag"><span class="xml">              <span class="attr">padding:</span> <span class="attr">5</span>,</span></span></span><br><span class="line"><span class="tag"><span class="xml">              <span class="attr">border:</span> &#x27;<span class="attr">1px</span> <span class="attr">dashed</span> #<span class="attr">666</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">          &gt;</span></span></span><br><span class="line"><span class="xml">            å®æ—¶å“åº”-ç”¨æˆ·åï¼š&#123;form.values.username&#125;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        )&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">FormConsumer</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">FormProvider</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2021/12/01/Formily-demo/img2.png" alt="image"></p><ul><li><code>FormProvider</code>ç»„ä»¶æ˜¯ä½œä¸ºè§†å›¾å±‚æ¡¥æ¥è¡¨å•æ¨¡å‹çš„å…¥å£ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æ¥æ”¶ <code>createForm</code>åˆ›å»ºå‡ºæ¥çš„ <code>Form </code>å®ä¾‹ï¼Œå¹¶å°† <code>Form </code>å®ä¾‹ä»¥ä¸Šä¸‹æ–‡å½¢å¼ä¼ é€’åˆ°å­ç»„ä»¶ä¸­ã€‚</li><li><code>FormLayout</code>ç»„ä»¶æ˜¯ç”¨æ¥æ‰¹é‡æ§åˆ¶<code>FormItem</code>æ ·å¼çš„ç»„ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬æŒ‡å®šå¸ƒå±€ä¸ºæ°´å¹³å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯æ ‡ç­¾åœ¨å·¦ï¼Œç»„ä»¶åœ¨å³ã€‚</li><li><code>FormConsumer</code>ç»„ä»¶æ˜¯ä½œä¸ºå“åº”å¼æ¨¡å‹çš„å“åº”å™¨è€Œå­˜åœ¨ï¼Œå®ƒæ ¸å¿ƒæ˜¯ä¸€ä¸ª<code>render props</code>æ¨¡å¼ï¼Œåœ¨ä½œä¸º <code>children </code>çš„å›è°ƒå‡½æ•°ä¸­ï¼Œä¼šè‡ªåŠ¨æ”¶é›†æ‰€æœ‰ä¾èµ–ï¼Œå¦‚æœä¾èµ–å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä¼šé‡æ–°æ¸²æŸ“ï¼Œå€ŸåŠ© <code>FormConsumer </code>æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°å„ç§è®¡ç®—æ±‡æ€»çš„éœ€æ±‚ã€‚</li><li><code>FormButtonGroup</code>ç»„ä»¶ä½œä¸ºè¡¨å•æŒ‰é’®ç»„å®¹å™¨è€Œå­˜åœ¨ï¼Œä¸»è¦è´Ÿè´£æŒ‰é’®çš„å¸ƒå±€ã€‚</li><li><code>Submit</code>ç»„ä»¶ä½œä¸ºè¡¨å•æäº¤çš„åŠ¨ä½œè§¦å‘å™¨è€Œå­˜åœ¨ï¼Œå…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>form.submit </code>æ–¹æ³•è¿›è¡Œæäº¤ï¼Œä½†æ˜¯ä½¿ç”¨ <code>Submit </code>çš„å¥½å¤„æ˜¯ä¸éœ€è¦æ¯æ¬¡éƒ½åœ¨ <code>Button </code>ç»„ä»¶ä¸Šå†™ <code>onClick </code>äº‹ä»¶å¤„ç†å™¨ï¼ŒåŒæ—¶å®ƒè¿˜å¤„ç†äº† <code>Form </code>çš„ <code>loading </code>çŠ¶æ€ï¼Œå¦‚æœ <code>onSubmit </code>æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œä¸” <code>Promise </code>æ­£åœ¨ <code>pending </code>çŠ¶æ€ï¼Œé‚£ä¹ˆæŒ‰é’®ä¼šè‡ªåŠ¨è¿›å…¥ <code>loading </code>çŠ¶æ€ã€‚</li></ul><blockquote><p><code>æ³¨æ„ï¼šä½¿ç”¨å‰è¿˜éœ€è¦äº†è§£ï¼ŒFormily å·²ç»å®Œå…¨æ”¾å¼ƒå¯¹ IE çš„å…¼å®¹ï¼Œå¦‚éœ€å…¼å®¹ IEï¼Œæ…ç”¨ï¼ï¼ï¼</code></p></blockquote><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://formilyjs.org/">Formily å®˜æ–¹æ–‡æ¡£</a><br>â€‹</p><p>â€‹</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">Formilyå…¥é—¨å®è·µ</summary>
    
    
    
    
    <category term="Formily" scheme="https://yingliyu.github.io/tags/Formily/"/>
    
  </entry>
  
  <entry>
    <title>webpackä¹‹HappyPack</title>
    <link href="https://yingliyu.github.io/2021/11/26/webpack-happyPack/"/>
    <id>https://yingliyu.github.io/2021/11/26/webpack-happyPack/</id>
    <published>2021-11-26T15:14:30.000Z</published>
    <updated>2022-01-19T03:08:56.663Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>HappyPack makes initial webpack builds faster by transforming files in parallel.<br>HappyPack é€šè¿‡å¹¶è¡Œè½¬æ¢æ–‡ä»¶ï¼Œä½¿åˆå§‹ webpack æ„å»ºé€Ÿåº¦æ›´å¿«ã€‚</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>webpackä¸­ä¸‡ç‰©çš†æ¨¡å—ï¼Œä½†æ˜¯webpacké»˜è®¤åªèƒ½å¤„ç†jsæ¨¡å—ï¼Œé‚£ä¹ˆjsä»¥å¤–çš„æ¨¡å—æ€ä¹ˆå¤„ç†å‘¢ï¼Œæ‰€ä»¥å°±æœ‰äº†loaderæœºåˆ¶ï¼Œæ¯”å¦‚ï¼švue-loaderã€css-loaderã€file-loaderç­‰ç­‰ã€‚loaderæ˜¯ä¸€ä¸ªå¯¼å‡ºä¸ºfunctionçš„nodeæ¨¡å—ã€‚å¯ä»¥å°†åŒ¹é…åˆ°çš„æ–‡ä»¶è¿›è¡Œä¸€æ¬¡è½¬æ¢ï¼ŒåŒæ—¶loaderå¯ä»¥é“¾å¼ä¼ é€’ã€‚å¦‚æœé¡¹ç›®æ¯”è¾ƒå¤æ‚ï¼Œæ„å»ºæ—¶å°±ä¼šæœ‰å¤§é‡æ–‡ä»¶éœ€è¦è§£æå’Œå¤„ç†ï¼Œæ„å»ºæ˜¯æ–‡ä»¶è¯»å†™å’Œè®¡ç®—å¯†é›†å‹çš„æ“ä½œï¼Œå¤§å‹é¡¹ç›®ä¸­webpackæ„å»ºæ…¢çš„é—®é¢˜å°¤ä¸ºæ˜¾è‘—ï¼Œç„¶è€Œè¿è¡Œåœ¨nodejsç¯å¢ƒçš„webpackæ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœèƒ½è®©webpackåŒä¸€æ—¶é—´èƒ½åšå¤šé¡¹ä»»åŠ¡ï¼Œå‘æŒ¥å¤šæ ¸ CPU ç”µè„‘çš„å¨åŠ›ï¼Œå°±èƒ½å¤§å¤§çš„æå‡æ„å»ºé€Ÿåº¦ã€‚è¿™æ—¶å€™HappyPackå°±é—ªäº®ç™»åœºäº†ï¼Œå®ƒæŠŠä»»åŠ¡åˆ†è§£ç»™å¤šä¸ªå­è¿›ç¨‹å»å¹¶å‘çš„æ‰§è¡Œï¼Œå­è¿›ç¨‹å¤„ç†å®Œåå†æŠŠç»“æœå‘é€ç»™ä¸»è¿›ç¨‹ï¼Œç›¸æ¯”ä¹‹å‰å¯ä»¥æœ‰æ•ˆçš„æå‡æ„å»ºé€Ÿåº¦ã€‚<br>æ›´å¤šloaderså†…å®¹å‚è€ƒ<a href="https://webpack.docschina.org/loaders/">https://webpack.docschina.org/loaders/</a><br>â€‹</p><blockquote><p>çº¿ç¨‹å’Œè¿›ç¨‹éƒ½å¯ç”¨äºå®ç°å¹¶å‘ï¼Œä¸€ä¸ªè¿›ç¨‹ç”±ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç»„æˆï¼Œçº¿ç¨‹æ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­ä»£ç çš„ä¸åŒæ‰§è¡Œè·¯çº¿ã€‚</p></blockquote><h2 id="ä½¿ç”¨HappyPack"><a href="#ä½¿ç”¨HappyPack" class="headerlink" title="ä½¿ç”¨HappyPack"></a>ä½¿ç”¨HappyPack</h2><p>HappyPackæä¾›äº†ä¸€ä¸ªpluginå’Œä¸€ä¸ªloadå®Œæˆå®ƒçš„å·¥ä½œï¼Œæ‰€ä»¥ä½ å¿…é¡»åŒæ—¶ä½¿ç”¨ä¸¤è€…æ¥å¯ç”¨å®ƒã€‚<br>ä½¿ç”¨npmï¼š<br><code>npm install --save-dev happypack</code><br>ä½¿ç”¨yarnï¼š<br><code>yarn add happypack --dev</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @file: webpack.config.js</span></span><br><span class="line"><span class="keyword">var</span> HappyPack = <span class="built_in">require</span>(<span class="string">&#x27;happypack&#x27;</span>);</span><br><span class="line"><span class="comment">// æ„é€ å‡ºå…±äº«è¿›ç¨‹æ± ï¼Œè¿›ç¨‹æ± ä¸­åŒ…å«5ä¸ªå­è¿›ç¨‹</span></span><br><span class="line"><span class="keyword">var</span> happyThreadPool = HappyPack.ThreadPool(&#123; <span class="attr">size</span>: <span class="number">5</span> &#125;);</span><br><span class="line"> &lt;!--more--&gt;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="comment">// å°†.jsæ–‡ä»¶äº¤ç»™idä¸ºbabelçš„happypackå®ä¾‹æ¥æ‰§è¡Œ</span></span><br><span class="line">        <span class="comment">// 1) ç”¨happypack/loaderä»£åŸå§‹çš„loadersåˆ—è¡¨</span></span><br><span class="line">        use: <span class="string">&#x27;happypack/loader?id=babel&#x27;</span>,</span><br><span class="line">        <span class="comment">// æ’é™¤ node_modules ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œnode_modules ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½æ˜¯é‡‡ç”¨çš„ ES5 è¯­æ³•ï¼Œæ²¡å¿…è¦å†é€šè¿‡ Babel å»è½¬æ¢</span></span><br><span class="line">        <span class="attr">exclude</span>: path.resolve(__dirname, <span class="string">&#x27;node_modules&#x27;</span>),</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 2)åˆ›å»ºä¸€ä¸ªplugin</span></span><br><span class="line">    <span class="keyword">new</span> HappyPack(&#123;</span><br><span class="line">      <span class="comment">// idæ ‡è¯†happypackå¤„ç†é‚£ä¸€ç±»æ–‡ä»¶</span></span><br><span class="line">      <span class="attr">id</span>: <span class="string">&#x27;babel&#x27;</span>,</span><br><span class="line">      <span class="comment">// å…±äº«çº¿ç¨‹æ± </span></span><br><span class="line">      <span class="attr">threadPool</span>: happyThreadPool,</span><br><span class="line">      <span class="comment">// 3) é…ç½®ä¸€ä¸ªæ›¿ä»£æ­¥éª¤1) ä¸­çš„loader</span></span><br><span class="line">      <span class="attr">loaders</span>: [ <span class="string">&#x27;babel-loader&#x27;</span> ],</span><br><span class="line">      <span class="comment">// æ—¥å¿—è¾“å‡º</span></span><br><span class="line">      <span class="attr">verbose</span>: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨moduleä¸­å®šä¹‰loader ruleså‘Šè¯‰ webpack å¦‚ä½•å¤„ç†ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶ï¼Œè°ƒç”¨åŸºç¡€é…ç½®é‡Œçš„happy/loaderï¼Œæ­¤loaderä¼šé€šè¿‡å‚æ•°çš„idéå†çœŸå®çš„æ’ä»¶æ•°ç»„ï¼Œç„¶åæ‰¾åˆ°å¯¹åº”çš„happyPluginï¼Œé€šè¿‡happyPluginçš„é…ç½®è·å–çœŸå®çš„Loaderå¹¶é€šè¿‡ä¹‹å‰åˆå§‹åŒ–å®Œæˆçš„å¤šçº¿ç¨‹è¿›è¡Œç¼–è¯‘ï¼Œå°†ç¼–è¯‘ç»“æœä¼ é€’ç»™ä¸»çº¿ç¨‹ã€‚ç¼–è¯‘å®Œæˆåï¼Œæ’ä»¶è¿˜ä¼šé’ˆå¯¹ç¼–è¯‘çš„ç»“æœç¼“å­˜ï¼Œä»¥åŠæ–°ç¼–è¯‘çš„æ–‡ä»¶è¿›è¡Œç¼“å­˜çš„è®¾ç½®ã€‚<br>â€‹</p><p>åœ¨å®ä¾‹åŒ– HappyPack æ’ä»¶çš„æ—¶å€™ï¼ŒHappyPack æ”¯æŒå¦‚ä¸‹å‚æ•°ï¼š</p><ol><li><code>loaders:Array</code>ï¼š</li></ol><p>ç”±ä¸€ä¸ªè½¬æ¢æ–‡ä»¶çš„loaderåå’Œä¸€ä¸ªæŸ¥è¯¢å­—ç¬¦ä¸²ç»„æˆã€‚ä¾‹å¦‚ï¼š<code>use: &#39;happypack/loader?id=babel&#39;</code>ï¼Œç”¨happypack/loaderä»£åŸå§‹çš„loadersåˆ—è¡¨ï¼Œå”¯ä¸€çš„happyPack pluginæ ‡è¯†ï¼Œç”¨äºåœ¨modules rulesä¸­å»è¯†åˆ«å¯¹åº”çš„happyPackå®ä¾‹ä¸­çš„loaderså»æ‰§è¡Œæ–‡ä»¶çš„è½¬æ¢æ“ä½œã€‚<br>â€‹</p><ol start="2"><li><code>id: String</code></li></ol><p>happy plugin çš„å”¯ä¸€æ ‡è¯†ã€‚é»˜è®¤å€¼â€1â€ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªhappy pluginå¯ä»¥ä¸æŒ‡å®šï¼Œå½“ä½¿ç”¨ä¸æ­¢ä¸€ä¸ªhappy pluginæ—¶éœ€è¦æŒ‡å®šå®ƒã€‚<br>â€‹</p><ol start="3"><li><code>threads: Number</code></li></ol><p>ä»£è¡¨å¼€å¯å‡ ä¸ªå­è¿›ç¨‹å»å¤„ç†è¿™ä¸€ç±»å‹çš„æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯3ä¸ªï¼Œç±»å‹å¿…é¡»æ˜¯æ•´æ•°ã€‚<br>â€‹</p><ol start="4"><li><code>threadPool: HappyThreadPool</code></li></ol><p>ä»£è¡¨å…±äº«è¿›ç¨‹æ± ï¼Œå³å¤šä¸ª HappyPack å®ä¾‹éƒ½ä½¿ç”¨åŒä¸€ä¸ªå…±äº«è¿›ç¨‹æ± ä¸­çš„å­è¿›ç¨‹å»å¤„ç†ä»»åŠ¡ï¼Œä»¥é˜²æ­¢èµ„æºå ç”¨è¿‡å¤šã€‚é»˜è®¤å€¼ï¼šnullã€‚<br>â€‹</p><ol start="5"><li><code>verbose: Boolean</code></li></ol><p>æ˜¯å¦å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—ï¼Œé»˜è®¤æ˜¯ trueã€‚<br>â€‹</p><blockquote><p>HappyPack å¹¶ä¸æ˜¯å®Œå…¨æ”¯æŒæ‰€æœ‰çš„webpack loader APIï¼Œå…·ä½“æ”¯æŒæƒ…å†µè¯·æŸ¥çœ‹<a href="https://github.com/amireh/happypack/wiki/Webpack-Loader-API-Support">å®˜æ–¹wiki</a> ã€‚</p></blockquote><h2 id="HappyPackåŸç†"><a href="#HappyPackåŸç†" class="headerlink" title="HappyPackåŸç†"></a>HappyPackåŸç†</h2><p><img src="/2021/11/26/webpack-happyPack/1.png" alt="img"></p><p>HappyPackæ˜¯webpackå’Œä¸»è¦æ¥æºæ–‡ä»¶ï¼ˆå¦‚JSæºä»£ç ï¼‰ä¹‹é—´çš„ä¸­é—´ä»¶ï¼Œå…¶ä¸­å‘ç”Ÿäº†å¤§é‡çš„æ–‡ä»¶è½¬æ¢å¤„ç†ã€‚æ¯æ¬¡webpackè§£æä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒHappyPackéƒ½ä¼šè·å–å®ƒï¼ˆæ¨¡å—ï¼‰åŠå…¶æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå¹¶å°†è¿™äº›æ–‡ä»¶åˆ†å‘ç»™å¤šä¸ªå·¥ä½œçº¿ç¨‹â€çº¿ç¨‹â€ã€‚<br>è¿™äº›çº¿ç¨‹å®é™…ä¸Šæ˜¯è°ƒç”¨è½¬æ¢å™¨çš„ç®€å•nodeè¿›ç¨‹ã€‚å½“åŠ è½½åˆ°ç¼–è¯‘åçš„ç‰ˆæœ¬æ—¶ï¼ŒHappyPackä¼šå°†æœ€ç»ˆçš„chunkæä¾›ç»™åŠ è½½ç¨‹åºã€‚</p><h2 id="ä¸åŒwebpackç‰ˆæœ¬ä¸‹ä½¿ç”¨å»ºè®®"><a href="#ä¸åŒwebpackç‰ˆæœ¬ä¸‹ä½¿ç”¨å»ºè®®" class="headerlink" title="ä¸åŒwebpackç‰ˆæœ¬ä¸‹ä½¿ç”¨å»ºè®®"></a>ä¸åŒwebpackç‰ˆæœ¬ä¸‹ä½¿ç”¨å»ºè®®</h2><blockquote><p><img src="/2021/11/26/webpack-happyPack/2.png" alt="img"></p></blockquote><p>é—®ï¼šå¯¹webpack2&amp;3æœ‰æ•ˆå—ï¼Ÿ<br>ç­”ï¼šæœ‰ï¼Œwebpack2&amp;3éœ€è¦æ­é…ä½¿ç”¨happyPack@^4.0.1<br>é—®ï¼šå¯¹äºwebpack4æœ‰æ•ˆå—ï¼Ÿ<br>ç­”ï¼šwebpack4å¯èƒ½ä¸å¤ªéœ€è¦ã€‚<br>å¤§æ„ï¼šwebpack4å·²ç»èåˆäº†å¤šçº¿ç¨‹æœºåˆ¶ï¼ˆHappyPackåšçš„å·¥ä½œï¼‰ï¼Œå› æ­¤happypackçš„ä½œç”¨ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚å¦‚æœä½ ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯&lt;4ï¼Œé‚£ä¹ˆè¿˜æ˜¯å¯ä»¥ç»§ç»­ä½¿ç”¨HappyPackã€‚åœ¨webpack4ä¸­æœ‰ä¸ª<a href="https://github.com/webpack-contrib/thread-loader">thread-loader</a>ï¼Œé…ç½®èµ·æ¥æ›´ç®€å•ï¼Œä¸¤ç§æ–¹å¼éƒ½å¯ä»¥è¯•ä¸€ä¸‹çœ‹çœ‹é‚£ç§æ–¹æ¡ˆå¯¹ä½ æ¥è¯´æœ€ä¼˜ã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://www.npmjs.com/package/happypack">https://www.npmjs.com/package/happypack</a></li><li><a href="http://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-3%E4%BD%BF%E7%94%A8HappyPack.html">http://webpack.wuhaolin.cn</a></li></ul><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">webpackä¹‹HappyPack</summary>
    
    
    
    
    <category term="webpack" scheme="https://yingliyu.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>HTMLã€CSSé¢è¯•é¢˜</title>
    <link href="https://yingliyu.github.io/2021/10/17/interview-question-htmlcss/"/>
    <id>https://yingliyu.github.io/2021/10/17/interview-question-htmlcss/</id>
    <published>2021-10-17T17:42:45.000Z</published>
    <updated>2022-01-19T03:08:56.655Z</updated>
    
    <content type="html"><![CDATA[<h5 id="1-ç›’æ¨¡å‹çš„ä¸¤ç§æ ‡å‡†ï¼Ÿå¦‚ä½•ç›¸äº’è½¬åŒ–"><a href="#1-ç›’æ¨¡å‹çš„ä¸¤ç§æ ‡å‡†ï¼Ÿå¦‚ä½•ç›¸äº’è½¬åŒ–" class="headerlink" title="1. ç›’æ¨¡å‹çš„ä¸¤ç§æ ‡å‡†ï¼Ÿå¦‚ä½•ç›¸äº’è½¬åŒ–"></a>1. ç›’æ¨¡å‹çš„ä¸¤ç§æ ‡å‡†ï¼Ÿå¦‚ä½•ç›¸äº’è½¬åŒ–</h5><h5 id="2-BFC"><a href="#2-BFC" class="headerlink" title="2. BFC"></a>2. BFC</h5><h5 id="3-ä¼ªç±»çš„ä¼ªå…ƒç´ ç”¨æ³•ä¸åŒºåˆ«"><a href="#3-ä¼ªç±»çš„ä¼ªå…ƒç´ ç”¨æ³•ä¸åŒºåˆ«" class="headerlink" title="3. ä¼ªç±»çš„ä¼ªå…ƒç´ ç”¨æ³•ä¸åŒºåˆ«"></a>3. ä¼ªç±»çš„ä¼ªå…ƒç´ ç”¨æ³•ä¸åŒºåˆ«</h5><h5 id="4-divå®½åº¦ä¸º100vw-è®¾ç½®å®½é«˜å›ºå®šæ¯”ä¸º10-1-æ€ä¹ˆè®¾ç½®"><a href="#4-divå®½åº¦ä¸º100vw-è®¾ç½®å®½é«˜å›ºå®šæ¯”ä¸º10-1-æ€ä¹ˆè®¾ç½®" class="headerlink" title="4. divå®½åº¦ä¸º100vw,è®¾ç½®å®½é«˜å›ºå®šæ¯”ä¸º10:1,æ€ä¹ˆè®¾ç½®"></a>4. divå®½åº¦ä¸º100vw,è®¾ç½®å®½é«˜å›ºå®šæ¯”ä¸º10:1,æ€ä¹ˆè®¾ç½®</h5><h5 id="5-Flex-1å®Œæ•´å†™æ³•ï¼Œåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€"><a href="#5-Flex-1å®Œæ•´å†™æ³•ï¼Œåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€" class="headerlink" title="5. Flex:1å®Œæ•´å†™æ³•ï¼Œåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€"></a>5. Flex:1å®Œæ•´å†™æ³•ï¼Œåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€</h5><h5 id="6-flexçš„å®ç°åŸç†"><a href="#6-flexçš„å®ç°åŸç†" class="headerlink" title="6. flexçš„å®ç°åŸç†"></a>6. flexçš„å®ç°åŸç†</h5><h5 id="7-flexå‚ç›´å±…ä¸­å…¼å®¹ie"><a href="#7-flexå‚ç›´å±…ä¸­å…¼å®¹ie" class="headerlink" title="7. flexå‚ç›´å±…ä¸­å…¼å®¹ie"></a>7. flexå‚ç›´å±…ä¸­å…¼å®¹ie</h5><h5 id="8-remçš„ä½¿ç”¨åŸç†"><a href="#8-remçš„ä½¿ç”¨åŸç†" class="headerlink" title="8. remçš„ä½¿ç”¨åŸç†"></a>8. remçš„ä½¿ç”¨åŸç†</h5><h5 id="9-ç§»åŠ¨ç«¯300æ¯«ç§’å»¶è¿Ÿï¼Œæ€ä¹ˆè§£å†³çš„"><a href="#9-ç§»åŠ¨ç«¯300æ¯«ç§’å»¶è¿Ÿï¼Œæ€ä¹ˆè§£å†³çš„" class="headerlink" title="9. ç§»åŠ¨ç«¯300æ¯«ç§’å»¶è¿Ÿï¼Œæ€ä¹ˆè§£å†³çš„"></a>9. ç§»åŠ¨ç«¯300æ¯«ç§’å»¶è¿Ÿï¼Œæ€ä¹ˆè§£å†³çš„</h5><h5 id="10-å›æµå’Œé‡æ±‡"><a href="#10-å›æµå’Œé‡æ±‡" class="headerlink" title="10. å›æµå’Œé‡æ±‡"></a>10. å›æµå’Œé‡æ±‡</h5><span id="more"></span><h5 id="11-æµè§ˆå™¨æœ€å°å­—ä½“ï¼Œå¦‚ä½•å®ç°10pxå­—ä½“"><a href="#11-æµè§ˆå™¨æœ€å°å­—ä½“ï¼Œå¦‚ä½•å®ç°10pxå­—ä½“" class="headerlink" title="11. æµè§ˆå™¨æœ€å°å­—ä½“ï¼Œå¦‚ä½•å®ç°10pxå­—ä½“"></a>11. æµè§ˆå™¨æœ€å°å­—ä½“ï¼Œå¦‚ä½•å®ç°10pxå­—ä½“</h5><h5 id="12-è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†è¿‡ç²—çš„é—®é¢˜"><a href="#12-è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†è¿‡ç²—çš„é—®é¢˜" class="headerlink" title="12. è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†è¿‡ç²—çš„é—®é¢˜"></a>12. è§£å†³ç§»åŠ¨ç«¯1pxè¾¹æ¡†è¿‡ç²—çš„é—®é¢˜</h5><h5 id="13-æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§"><a href="#13-æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§" class="headerlink" title="13. æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§"></a>13. æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§</h5><h5 id="14-sasså’Œlessçš„ç”¨æ³•å’ŒåŒºåˆ«"><a href="#14-sasså’Œlessçš„ç”¨æ³•å’ŒåŒºåˆ«" class="headerlink" title="14. sasså’Œlessçš„ç”¨æ³•å’ŒåŒºåˆ«"></a>14. sasså’Œlessçš„ç”¨æ³•å’ŒåŒºåˆ«</h5><h5 id="15-ç±»é€‰æ‹©å™¨-a-b-a-b-a-gt-båˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€"><a href="#15-ç±»é€‰æ‹©å™¨-a-b-a-b-a-gt-båˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€" class="headerlink" title="15. ç±»é€‰æ‹©å™¨.a  .b  .a.b   .a&gt;.båˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€"></a>15. ç±»é€‰æ‹©å™¨.a  .b  .a.b   .a&gt;.båˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€</h5><h5 id="16-é€‰æ‹©å™¨ç±»å‹å’Œæƒé‡"><a href="#16-é€‰æ‹©å™¨ç±»å‹å’Œæƒé‡" class="headerlink" title="16. é€‰æ‹©å™¨ç±»å‹å’Œæƒé‡"></a>16. é€‰æ‹©å™¨ç±»å‹å’Œæƒé‡</h5><h5 id="17-pæ ‡ç­¾é‡Œé¢å¯ä»¥æ”¾divå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#17-pæ ‡ç­¾é‡Œé¢å¯ä»¥æ”¾divå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="17. pæ ‡ç­¾é‡Œé¢å¯ä»¥æ”¾divå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>17. pæ ‡ç­¾é‡Œé¢å¯ä»¥æ”¾divå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h5><h5 id="18-ç§»åŠ¨ç«¯buttonä¸åŒæ‰‹æœºæ²¡æœ‰å‚ç›´å±…ä¸­æ€ä¹ˆè§£å†³"><a href="#18-ç§»åŠ¨ç«¯buttonä¸åŒæ‰‹æœºæ²¡æœ‰å‚ç›´å±…ä¸­æ€ä¹ˆè§£å†³" class="headerlink" title="18. ç§»åŠ¨ç«¯buttonä¸åŒæ‰‹æœºæ²¡æœ‰å‚ç›´å±…ä¸­æ€ä¹ˆè§£å†³"></a>18. ç§»åŠ¨ç«¯buttonä¸åŒæ‰‹æœºæ²¡æœ‰å‚ç›´å±…ä¸­æ€ä¹ˆè§£å†³</h5><h5 id="19-è§£é‡Špngã€jpgã€gifå›¾ç‰‡çš„æ ¼å¼ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿæœ‰æ²¡æœ‰äº†è§£è¿‡webp"><a href="#19-è§£é‡Špngã€jpgã€gifå›¾ç‰‡çš„æ ¼å¼ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿæœ‰æ²¡æœ‰äº†è§£è¿‡webp" class="headerlink" title="19. è§£é‡Špngã€jpgã€gifå›¾ç‰‡çš„æ ¼å¼ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿæœ‰æ²¡æœ‰äº†è§£è¿‡webp"></a>19. è§£é‡Špngã€jpgã€gifå›¾ç‰‡çš„æ ¼å¼ï¼Œåˆ†åˆ«ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿæœ‰æ²¡æœ‰äº†è§£è¿‡webp</h5><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">HTMLã€CSSé¢è¯•é¢˜</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://yingliyu.github.io/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://yingliyu.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    <category term="HTMLã€CSS" scheme="https://yingliyu.github.io/tags/HTML%E3%80%81CSS/"/>
    
  </entry>
  
  <entry>
    <title>JSç³»åˆ—é¢è¯•é¢˜</title>
    <link href="https://yingliyu.github.io/2021/10/17/interview-question-js/"/>
    <id>https://yingliyu.github.io/2021/10/17/interview-question-js/</id>
    <published>2021-10-17T14:12:00.000Z</published>
    <updated>2022-01-19T03:08:56.655Z</updated>
    
    <content type="html"><![CDATA[<h5 id="1-æ•°æ®ç±»å‹æœ‰å“ªäº›"><a href="#1-æ•°æ®ç±»å‹æœ‰å“ªäº›" class="headerlink" title="1. æ•°æ®ç±»å‹æœ‰å“ªäº›"></a>1. æ•°æ®ç±»å‹æœ‰å“ªäº›</h5><h5 id="2-For-of-å’Œ-for-in-çš„åŒºåˆ«"><a href="#2-For-of-å’Œ-for-in-çš„åŒºåˆ«" class="headerlink" title="2. For of å’Œ for in çš„åŒºåˆ«"></a>2. For of å’Œ for in çš„åŒºåˆ«</h5><h5 id="3-Mapå’Œ-object-çš„åŒºåˆ«æœ‰å“ªäº›ï¼ŒweakMapäº†è§£ä¹ˆï¼Œå’ŒMapåŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#3-Mapå’Œ-object-çš„åŒºåˆ«æœ‰å“ªäº›ï¼ŒweakMapäº†è§£ä¹ˆï¼Œå’ŒMapåŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="3. Mapå’Œ object çš„åŒºåˆ«æœ‰å“ªäº›ï¼ŒweakMapäº†è§£ä¹ˆï¼Œå’ŒMapåŒºåˆ«æ˜¯ä»€ä¹ˆ"></a>3. Mapå’Œ object çš„åŒºåˆ«æœ‰å“ªäº›ï¼ŒweakMapäº†è§£ä¹ˆï¼Œå’ŒMapåŒºåˆ«æ˜¯ä»€ä¹ˆ</h5><h5 id="4-ä¸ºä»€ä¹ˆè¦è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œåƒåœ¾å›æ”¶çš„åŸç†"><a href="#4-ä¸ºä»€ä¹ˆè¦è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œåƒåœ¾å›æ”¶çš„åŸç†" class="headerlink" title="4. ä¸ºä»€ä¹ˆè¦è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œåƒåœ¾å›æ”¶çš„åŸç†"></a>4. ä¸ºä»€ä¹ˆè¦è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œåƒåœ¾å›æ”¶çš„åŸç†</h5><h5 id="5-0-1-0-2ç­‰äº0-3ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸ç­‰ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å¤„ç†åŠæ³•ä¹ˆï¼Œ10è½¬æˆäºŒè¿›åˆ¶æ€ä¹ˆè¡¨ç¤º"><a href="#5-0-1-0-2ç­‰äº0-3ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸ç­‰ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å¤„ç†åŠæ³•ä¹ˆï¼Œ10è½¬æˆäºŒè¿›åˆ¶æ€ä¹ˆè¡¨ç¤º" class="headerlink" title="5. 0.1+0.2ç­‰äº0.3ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸ç­‰ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å¤„ç†åŠæ³•ä¹ˆï¼Œ10è½¬æˆäºŒè¿›åˆ¶æ€ä¹ˆè¡¨ç¤º"></a>5. 0.1+0.2ç­‰äº0.3ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸ç­‰ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å¤„ç†åŠæ³•ä¹ˆï¼Œ10è½¬æˆäºŒè¿›åˆ¶æ€ä¹ˆè¡¨ç¤º</h5><h5 id="6-ç»§æ‰¿æœ‰å“ªäº›æ–¹å¼ï¼Œæœ€æœ‰æ•ˆæ˜¯å“ªç§ï¼Œå¦‚ä½•å®ç°çš„"><a href="#6-ç»§æ‰¿æœ‰å“ªäº›æ–¹å¼ï¼Œæœ€æœ‰æ•ˆæ˜¯å“ªç§ï¼Œå¦‚ä½•å®ç°çš„" class="headerlink" title="6. ç»§æ‰¿æœ‰å“ªäº›æ–¹å¼ï¼Œæœ€æœ‰æ•ˆæ˜¯å“ªç§ï¼Œå¦‚ä½•å®ç°çš„"></a>6. ç»§æ‰¿æœ‰å“ªäº›æ–¹å¼ï¼Œæœ€æœ‰æ•ˆæ˜¯å“ªç§ï¼Œå¦‚ä½•å®ç°çš„</h5><h5 id="7-Varå’Œletçš„åŒºåˆ«æœ‰å“ªäº›-æµè§ˆå™¨ç¯å¢ƒä¸‹-å…¨å±€ä½œç”¨åŸŸçš„letå’Œvar-å£°æ˜å˜é‡ä¼šæŒ‚è½½åˆ°-windowä¸Šä¹ˆ-constçš„å€¼å¯ä»¥ä¿®æ”¹ä¹ˆï¼Œä¸ºä»€ä¹ˆ"><a href="#7-Varå’Œletçš„åŒºåˆ«æœ‰å“ªäº›-æµè§ˆå™¨ç¯å¢ƒä¸‹-å…¨å±€ä½œç”¨åŸŸçš„letå’Œvar-å£°æ˜å˜é‡ä¼šæŒ‚è½½åˆ°-windowä¸Šä¹ˆ-constçš„å€¼å¯ä»¥ä¿®æ”¹ä¹ˆï¼Œä¸ºä»€ä¹ˆ" class="headerlink" title="7. Varå’Œletçš„åŒºåˆ«æœ‰å“ªäº›, æµè§ˆå™¨ç¯å¢ƒä¸‹,å…¨å±€ä½œç”¨åŸŸçš„letå’Œvar å£°æ˜å˜é‡ä¼šæŒ‚è½½åˆ° windowä¸Šä¹ˆ ,constçš„å€¼å¯ä»¥ä¿®æ”¹ä¹ˆï¼Œä¸ºä»€ä¹ˆ"></a>7. Varå’Œletçš„åŒºåˆ«æœ‰å“ªäº›, æµè§ˆå™¨ç¯å¢ƒä¸‹,å…¨å±€ä½œç”¨åŸŸçš„letå’Œvar å£°æ˜å˜é‡ä¼šæŒ‚è½½åˆ° windowä¸Šä¹ˆ ,constçš„å€¼å¯ä»¥ä¿®æ”¹ä¹ˆï¼Œä¸ºä»€ä¹ˆ</h5><h5 id="8-Object-definePropertyçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå’Œproxyçš„åŒºåˆ«"><a href="#8-Object-definePropertyçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå’Œproxyçš„åŒºåˆ«" class="headerlink" title="8. Object.definePropertyçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå’Œproxyçš„åŒºåˆ«"></a>8. Object.definePropertyçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå’Œproxyçš„åŒºåˆ«</h5><h5 id="9-reduceç”¨æ³•"><a href="#9-reduceç”¨æ³•" class="headerlink" title="9. reduceç”¨æ³•"></a>9. reduceç”¨æ³•</h5><h5 id="10-é˜²æŠ–å’ŒèŠ‚æµä½¿ç”¨åœºæ™¯"><a href="#10-é˜²æŠ–å’ŒèŠ‚æµä½¿ç”¨åœºæ™¯" class="headerlink" title="10. é˜²æŠ–å’ŒèŠ‚æµä½¿ç”¨åœºæ™¯"></a>10. é˜²æŠ–å’ŒèŠ‚æµä½¿ç”¨åœºæ™¯</h5><span id="more"></span><h5 id="11-æ·±æ‹·è´"><a href="#11-æ·±æ‹·è´" class="headerlink" title="11. æ·±æ‹·è´"></a>11. æ·±æ‹·è´</h5><h5 id="12-javaScript-çš„äº‹ä»¶å¾ªç¯ï¼ˆevent-loopï¼‰"><a href="#12-javaScript-çš„äº‹ä»¶å¾ªç¯ï¼ˆevent-loopï¼‰" class="headerlink" title="12. javaScript çš„äº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰"></a>12. javaScript çš„äº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰</h5><h5 id="13-æ¸²æŸ“å‡ ä¸‡æ¡æ•°æ®å¦‚ä½•ä¼˜åŒ–ä¸å¡ä½é¡µé¢"><a href="#13-æ¸²æŸ“å‡ ä¸‡æ¡æ•°æ®å¦‚ä½•ä¼˜åŒ–ä¸å¡ä½é¡µé¢" class="headerlink" title="13. æ¸²æŸ“å‡ ä¸‡æ¡æ•°æ®å¦‚ä½•ä¼˜åŒ–ä¸å¡ä½é¡µé¢"></a>13. æ¸²æŸ“å‡ ä¸‡æ¡æ•°æ®å¦‚ä½•ä¼˜åŒ–ä¸å¡ä½é¡µé¢</h5><h5 id="14-æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«"><a href="#14-æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«" class="headerlink" title="14. æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«"></a>14. æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«</h5><h5 id="15-åŸå‹é“¾"><a href="#15-åŸå‹é“¾" class="headerlink" title="15. åŸå‹é“¾"></a>15. åŸå‹é“¾</h5><h5 id="16-jsäº‹ä»¶æ¨¡å‹"><a href="#16-jsäº‹ä»¶æ¨¡å‹" class="headerlink" title="16. jsäº‹ä»¶æ¨¡å‹"></a>16. jsäº‹ä»¶æ¨¡å‹</h5><h5 id="17-å‡½æ•°å¼ç¼–ç¨‹ç†è§£"><a href="#17-å‡½æ•°å¼ç¼–ç¨‹ç†è§£" class="headerlink" title="17. å‡½æ•°å¼ç¼–ç¨‹ç†è§£"></a>17. å‡½æ•°å¼ç¼–ç¨‹ç†è§£</h5><h5 id="18-é—­åŒ…å¯¼è‡´çš„å†…å­˜æ³„æ¼æ€ä¹ˆè§£å†³"><a href="#18-é—­åŒ…å¯¼è‡´çš„å†…å­˜æ³„æ¼æ€ä¹ˆè§£å†³" class="headerlink" title="18. é—­åŒ…å¯¼è‡´çš„å†…å­˜æ³„æ¼æ€ä¹ˆè§£å†³"></a>18. é—­åŒ…å¯¼è‡´çš„å†…å­˜æ³„æ¼æ€ä¹ˆè§£å†³</h5><h5 id="19-JSONPçš„åŸç†"><a href="#19-JSONPçš„åŸç†" class="headerlink" title="19. JSONPçš„åŸç†"></a>19. JSONPçš„åŸç†</h5><h5 id="20-promiseä¸ºä»€ä¹ˆå¯ä»¥é“¾å¼è°ƒç”¨"><a href="#20-promiseä¸ºä»€ä¹ˆå¯ä»¥é“¾å¼è°ƒç”¨" class="headerlink" title="20. promiseä¸ºä»€ä¹ˆå¯ä»¥é“¾å¼è°ƒç”¨"></a>20. promiseä¸ºä»€ä¹ˆå¯ä»¥é“¾å¼è°ƒç”¨</h5><h5 id="21-promiseä¸­resolveä¹‹åå†rejectï¼Œæœ€ç»ˆæ˜¯ä»€ä¹ˆçŠ¶æ€"><a href="#21-promiseä¸­resolveä¹‹åå†rejectï¼Œæœ€ç»ˆæ˜¯ä»€ä¹ˆçŠ¶æ€" class="headerlink" title="21. promiseä¸­resolveä¹‹åå†rejectï¼Œæœ€ç»ˆæ˜¯ä»€ä¹ˆçŠ¶æ€"></a>21. promiseä¸­resolveä¹‹åå†rejectï¼Œæœ€ç»ˆæ˜¯ä»€ä¹ˆçŠ¶æ€</h5><h5 id="22-è·¨åŸŸæœ‰ä»€ä¹ˆè§£å†³æ–¹æ³•ï¼Ÿjson-stringfyæœ‰ä»€ä¹ˆç±»å‹ä¸èƒ½ç”¨"><a href="#22-è·¨åŸŸæœ‰ä»€ä¹ˆè§£å†³æ–¹æ³•ï¼Ÿjson-stringfyæœ‰ä»€ä¹ˆç±»å‹ä¸èƒ½ç”¨" class="headerlink" title="22. è·¨åŸŸæœ‰ä»€ä¹ˆè§£å†³æ–¹æ³•ï¼Ÿjson.stringfyæœ‰ä»€ä¹ˆç±»å‹ä¸èƒ½ç”¨"></a>22. è·¨åŸŸæœ‰ä»€ä¹ˆè§£å†³æ–¹æ³•ï¼Ÿjson.stringfyæœ‰ä»€ä¹ˆç±»å‹ä¸èƒ½ç”¨</h5><h5 id="23-ï¼ˆes6ï¼‰classç»§æ‰¿"><a href="#23-ï¼ˆes6ï¼‰classç»§æ‰¿" class="headerlink" title="23. ï¼ˆes6ï¼‰classç»§æ‰¿"></a>23. ï¼ˆes6ï¼‰classç»§æ‰¿</h5><h5 id="24-ï¼ˆtsï¼‰ä»€ä¹ˆæ˜¯èŒƒå‹"><a href="#24-ï¼ˆtsï¼‰ä»€ä¹ˆæ˜¯èŒƒå‹" class="headerlink" title="24. ï¼ˆtsï¼‰ä»€ä¹ˆæ˜¯èŒƒå‹"></a>24. ï¼ˆtsï¼‰ä»€ä¹ˆæ˜¯èŒƒå‹</h5><h5 id="25-å¯¹æŸ¯é‡ŒåŒ–å‡½æ•°çš„ç†è§£"><a href="#25-å¯¹æŸ¯é‡ŒåŒ–å‡½æ•°çš„ç†è§£" class="headerlink" title="25. å¯¹æŸ¯é‡ŒåŒ–å‡½æ•°çš„ç†è§£"></a>25. å¯¹æŸ¯é‡ŒåŒ–å‡½æ•°çš„ç†è§£</h5><h5 id="26-é¢å‘å¯¹è±¡ç‰¹æ€§"><a href="#26-é¢å‘å¯¹è±¡ç‰¹æ€§" class="headerlink" title="26. é¢å‘å¯¹è±¡ç‰¹æ€§"></a>26. é¢å‘å¯¹è±¡ç‰¹æ€§</h5><h5 id="27-å¦‚ä½•å®ç°ä¸€ä¸ªnew"><a href="#27-å¦‚ä½•å®ç°ä¸€ä¸ªnew" class="headerlink" title="27. å¦‚ä½•å®ç°ä¸€ä¸ªnew"></a>27. å¦‚ä½•å®ç°ä¸€ä¸ªnew</h5><h5 id="28-new-è¿™ä¸ªå…³é”®å­—å¹²äº†ä»€ä¹ˆ"><a href="#28-new-è¿™ä¸ªå…³é”®å­—å¹²äº†ä»€ä¹ˆ" class="headerlink" title="28. new è¿™ä¸ªå…³é”®å­—å¹²äº†ä»€ä¹ˆ"></a>28. new è¿™ä¸ªå…³é”®å­—å¹²äº†ä»€ä¹ˆ</h5><h5 id="29-call-apply-bind-çš„åŒºåˆ«"><a href="#29-call-apply-bind-çš„åŒºåˆ«" class="headerlink" title="29. call, apply, bind çš„åŒºåˆ«"></a>29. call, apply, bind çš„åŒºåˆ«</h5><h5 id="30-å¼ºç¼“å­˜ï¼Œåå•†ç¼“å­˜"><a href="#30-å¼ºç¼“å­˜ï¼Œåå•†ç¼“å­˜" class="headerlink" title="30. å¼ºç¼“å­˜ï¼Œåå•†ç¼“å­˜"></a>30. å¼ºç¼“å­˜ï¼Œåå•†ç¼“å­˜</h5><h5 id="31-é˜»æ­¢å†’æ³¡ï¼Œé˜»æ­¢äº‹ä»¶æ•è·"><a href="#31-é˜»æ­¢å†’æ³¡ï¼Œé˜»æ­¢äº‹ä»¶æ•è·" class="headerlink" title="31. é˜»æ­¢å†’æ³¡ï¼Œé˜»æ­¢äº‹ä»¶æ•è·"></a>31. é˜»æ­¢å†’æ³¡ï¼Œé˜»æ­¢äº‹ä»¶æ•è·</h5><h5 id="32-é«˜é˜¶å‡½æ•°HOF"><a href="#32-é«˜é˜¶å‡½æ•°HOF" class="headerlink" title="32. é«˜é˜¶å‡½æ•°HOF"></a>32. é«˜é˜¶å‡½æ•°HOF</h5><h5 id="33-ES6æ–°ç‰¹æ€§ç”¨è¿‡å“ªäº›"><a href="#33-ES6æ–°ç‰¹æ€§ç”¨è¿‡å“ªäº›" class="headerlink" title="33. ES6æ–°ç‰¹æ€§ç”¨è¿‡å“ªäº›"></a>33. ES6æ–°ç‰¹æ€§ç”¨è¿‡å“ªäº›</h5><h5 id="34-å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡å’Œæ•°ç»„"><a href="#34-å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡å’Œæ•°ç»„" class="headerlink" title="34. å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡å’Œæ•°ç»„"></a>34. å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯å¯¹è±¡å’Œæ•°ç»„</h5><h5 id="35-æ€æ ·åŒæ­¥è°ƒç”¨æ¥å£"><a href="#35-æ€æ ·åŒæ­¥è°ƒç”¨æ¥å£" class="headerlink" title="35. æ€æ ·åŒæ­¥è°ƒç”¨æ¥å£"></a>35. æ€æ ·åŒæ­¥è°ƒç”¨æ¥å£</h5><h5 id="36-æ–°apiï¼š-pushStateã€bom"><a href="#36-æ–°apiï¼š-pushStateã€bom" class="headerlink" title="36. æ–°apiï¼š pushStateã€bom"></a>36. æ–°apiï¼š pushStateã€bom</h5><h5 id="37-websocketä¸è½®è¯¢åŒºåˆ«"><a href="#37-websocketä¸è½®è¯¢åŒºåˆ«" class="headerlink" title="37. websocketä¸è½®è¯¢åŒºåˆ«"></a>37. websocketä¸è½®è¯¢åŒºåˆ«</h5><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">JSç³»åˆ—é¢è¯•é¢˜</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://yingliyu.github.io/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://yingliyu.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    <category term="JS" scheme="https://yingliyu.github.io/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>VUEç³»åˆ—é¢è¯•é¢˜</title>
    <link href="https://yingliyu.github.io/2021/10/17/interview-question-vue/"/>
    <id>https://yingliyu.github.io/2021/10/17/interview-question-vue/</id>
    <published>2021-10-17T13:51:18.000Z</published>
    <updated>2022-01-19T03:08:56.655Z</updated>
    
    <content type="html"><![CDATA[<h5 id="1-vueåŒå‘ç»‘å®šçš„åŸç†"><a href="#1-vueåŒå‘ç»‘å®šçš„åŸç†" class="headerlink" title="1. vueåŒå‘ç»‘å®šçš„åŸç†"></a>1. vueåŒå‘ç»‘å®šçš„åŸç†</h5><h5 id="2-vueé€šä¿¡æ–¹å¼"><a href="#2-vueé€šä¿¡æ–¹å¼" class="headerlink" title="2. vueé€šä¿¡æ–¹å¼"></a>2. vueé€šä¿¡æ–¹å¼</h5><h5 id="3-ç»„ä»¶ä¸­çš„dataç”¨ç®­å¤´å‡½æ•°è¡Œä¸è¡Œ"><a href="#3-ç»„ä»¶ä¸­çš„dataç”¨ç®­å¤´å‡½æ•°è¡Œä¸è¡Œ" class="headerlink" title="3. ç»„ä»¶ä¸­çš„dataç”¨ç®­å¤´å‡½æ•°è¡Œä¸è¡Œ"></a>3. ç»„ä»¶ä¸­çš„dataç”¨ç®­å¤´å‡½æ•°è¡Œä¸è¡Œ</h5><h5 id="4-vueç”Ÿå‘½å‘¨æœŸ"><a href="#4-vueç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4. vueç”Ÿå‘½å‘¨æœŸ"></a>4. vueç”Ÿå‘½å‘¨æœŸ</h5><h5 id="5-vueçš„keep-alive"><a href="#5-vueçš„keep-alive" class="headerlink" title="5. vueçš„keep-alive"></a>5. vueçš„keep-alive</h5><h5 id="6-vueä¸reactæœ‰ä»€ä¹ˆç›¸åŒç‚¹-ä¸åŒç‚¹"><a href="#6-vueä¸reactæœ‰ä»€ä¹ˆç›¸åŒç‚¹-ä¸åŒç‚¹" class="headerlink" title="6. vueä¸reactæœ‰ä»€ä¹ˆç›¸åŒç‚¹/ä¸åŒç‚¹"></a>6. vueä¸reactæœ‰ä»€ä¹ˆç›¸åŒç‚¹/ä¸åŒç‚¹</h5><h5 id="7-vueçš„-listeners"><a href="#7-vueçš„-listeners" class="headerlink" title="7. vueçš„ $listeners"></a>7. vueçš„ $listeners</h5><h5 id="8-vueä¿®é¥°ç¬¦-sync"><a href="#8-vueä¿®é¥°ç¬¦-sync" class="headerlink" title="8. vueä¿®é¥°ç¬¦.sync"></a>8. vueä¿®é¥°ç¬¦.sync</h5><h5 id="9-vueçš„æ¸²æŸ“æ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥ï¼Œä¸ºä»€ä¹ˆ"><a href="#9-vueçš„æ¸²æŸ“æ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥ï¼Œä¸ºä»€ä¹ˆ" class="headerlink" title="9. vueçš„æ¸²æŸ“æ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥ï¼Œä¸ºä»€ä¹ˆ"></a>9. vueçš„æ¸²æŸ“æ˜¯å¼‚æ­¥è¿˜æ˜¯åŒæ­¥ï¼Œä¸ºä»€ä¹ˆ</h5><h5 id="10-vueçš„nextTickçš„ç”¨æ³•åŠåœºæ™¯"><a href="#10-vueçš„nextTickçš„ç”¨æ³•åŠåœºæ™¯" class="headerlink" title="10. vueçš„nextTickçš„ç”¨æ³•åŠåœºæ™¯"></a>10. vueçš„nextTickçš„ç”¨æ³•åŠåœºæ™¯</h5><span id="more"></span><h5 id="11-vueæœ‰renderå—"><a href="#11-vueæœ‰renderå—" class="headerlink" title="11. vueæœ‰renderå—"></a>11. vueæœ‰renderå—</h5><h5 id="12-v-modelåšäº†ä»€ä¹ˆ"><a href="#12-v-modelåšäº†ä»€ä¹ˆ" class="headerlink" title="12. v-modelåšäº†ä»€ä¹ˆ"></a>12. v-modelåšäº†ä»€ä¹ˆ</h5><h5 id="13-é¦–é¡µé€Ÿåº¦åŠ è½½æ€ä¹ˆä¼˜åŒ–"><a href="#13-é¦–é¡µé€Ÿåº¦åŠ è½½æ€ä¹ˆä¼˜åŒ–" class="headerlink" title="13. é¦–é¡µé€Ÿåº¦åŠ è½½æ€ä¹ˆä¼˜åŒ–"></a>13. é¦–é¡µé€Ÿåº¦åŠ è½½æ€ä¹ˆä¼˜åŒ–</h5><h5 id="14-object-definePropertyçš„å¼Šç«¯æ€ä¹ˆè§£å†³"><a href="#14-object-definePropertyçš„å¼Šç«¯æ€ä¹ˆè§£å†³" class="headerlink" title="14. object.definePropertyçš„å¼Šç«¯æ€ä¹ˆè§£å†³"></a>14. object.definePropertyçš„å¼Šç«¯æ€ä¹ˆè§£å†³</h5><h5 id="15-vueçˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"><a href="#15-vueçˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" class="headerlink" title="15. vueçˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"></a>15. vueçˆ¶å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº</h5><h5 id="16-è™šæ‹ŸDOM"><a href="#16-è™šæ‹ŸDOM" class="headerlink" title="16. è™šæ‹ŸDOM"></a>16. è™šæ‹ŸDOM</h5><h5 id="17-vueçš„è®¾è®¡æ¨¡å¼"><a href="#17-vueçš„è®¾è®¡æ¨¡å¼" class="headerlink" title="17. vueçš„è®¾è®¡æ¨¡å¼"></a>17. vueçš„è®¾è®¡æ¨¡å¼</h5><h5 id="18-slot-æ’æ§½"><a href="#18-slot-æ’æ§½" class="headerlink" title="18. slot æ’æ§½"></a>18. slot æ’æ§½</h5><h5 id="19-æŒ‡ä»¤çš„å°è£…"><a href="#19-æŒ‡ä»¤çš„å°è£…" class="headerlink" title="19. æŒ‡ä»¤çš„å°è£…"></a>19. æŒ‡ä»¤çš„å°è£…</h5><h5 id="20-è¿‡æ»¤å™¨çš„å°è£…"><a href="#20-è¿‡æ»¤å™¨çš„å°è£…" class="headerlink" title="20. è¿‡æ»¤å™¨çš„å°è£…"></a>20. è¿‡æ»¤å™¨çš„å°è£…</h5><h5 id="21-diffç®—æ³•çš„ç†è§£"><a href="#21-diffç®—æ³•çš„ç†è§£" class="headerlink" title="21. diffç®—æ³•çš„ç†è§£"></a>21. diffç®—æ³•çš„ç†è§£</h5><h5 id="22-ä¸ºä»€ä¹ˆkeyä¸èƒ½ç”¨ä¸‹æ ‡"><a href="#22-ä¸ºä»€ä¹ˆkeyä¸èƒ½ç”¨ä¸‹æ ‡" class="headerlink" title="22. ä¸ºä»€ä¹ˆkeyä¸èƒ½ç”¨ä¸‹æ ‡"></a>22. ä¸ºä»€ä¹ˆkeyä¸èƒ½ç”¨ä¸‹æ ‡</h5><h5 id="23-wacthä¸computedçš„åŒºåˆ«"><a href="#23-wacthä¸computedçš„åŒºåˆ«" class="headerlink" title="23. wacthä¸computedçš„åŒºåˆ«"></a>23. wacthä¸computedçš„åŒºåˆ«</h5><h5 id="24-å®ç°ä¸€ä¸ªv-model"><a href="#24-å®ç°ä¸€ä¸ªv-model" class="headerlink" title="24. å®ç°ä¸€ä¸ªv-model"></a>24. å®ç°ä¸€ä¸ªv-model</h5><h5 id="25-MVVMçš„ç†è§£"><a href="#25-MVVMçš„ç†è§£" class="headerlink" title="25. MVVMçš„ç†è§£"></a>25. MVVMçš„ç†è§£</h5><h5 id="26-å…¨å±€ç»„ä»¶å¦‚ä½•å¼•å…¥"><a href="#26-å…¨å±€ç»„ä»¶å¦‚ä½•å¼•å…¥" class="headerlink" title="26. å…¨å±€ç»„ä»¶å¦‚ä½•å¼•å…¥"></a>26. å…¨å±€ç»„ä»¶å¦‚ä½•å¼•å…¥</h5><h5 id="27-vuexçš„ä½¿ç”¨ï¼Ÿå¼•å‡ºmutationå’ŒactionåŒºåˆ«ï¼Ÿ"><a href="#27-vuexçš„ä½¿ç”¨ï¼Ÿå¼•å‡ºmutationå’ŒactionåŒºåˆ«ï¼Ÿ" class="headerlink" title="27. vuexçš„ä½¿ç”¨ï¼Ÿå¼•å‡ºmutationå’ŒactionåŒºåˆ«ï¼Ÿ"></a>27. vuexçš„ä½¿ç”¨ï¼Ÿå¼•å‡ºmutationå’ŒactionåŒºåˆ«ï¼Ÿ</h5><h5 id="28-Vuexæ•´ä¸ªè§¦å‘è¿‡ç¨‹ï¼ˆactionsï¼Œstateï¼Œviewï¼‰"><a href="#28-Vuexæ•´ä¸ªè§¦å‘è¿‡ç¨‹ï¼ˆactionsï¼Œstateï¼Œviewï¼‰" class="headerlink" title="28. Vuexæ•´ä¸ªè§¦å‘è¿‡ç¨‹ï¼ˆactionsï¼Œstateï¼Œviewï¼‰"></a>28. Vuexæ•´ä¸ªè§¦å‘è¿‡ç¨‹ï¼ˆactionsï¼Œstateï¼Œviewï¼‰</h5><h5 id="29-vue-routerä¸­ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«ï¼Ÿè§£é‡ŠåŸç†"><a href="#29-vue-routerä¸­ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«ï¼Ÿè§£é‡ŠåŸç†" class="headerlink" title="29. vue routerä¸­ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«ï¼Ÿè§£é‡ŠåŸç†"></a>29. vue routerä¸­ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«ï¼Ÿè§£é‡ŠåŸç†</h5><h5 id="30-new-Routeråˆ†åˆ«æ—¶hushå’Œhistoryæ—¶baseæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#30-new-Routeråˆ†åˆ«æ—¶hushå’Œhistoryæ—¶baseæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="30. new Routeråˆ†åˆ«æ—¶hushå’Œhistoryæ—¶baseæœ‰ä»€ä¹ˆåŒºåˆ«"></a>30. new Routeråˆ†åˆ«æ—¶hushå’Œhistoryæ—¶baseæœ‰ä»€ä¹ˆåŒºåˆ«</h5><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">VUEé¢è¯•é¢˜</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://yingliyu.github.io/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://yingliyu.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    <category term="VUE" scheme="https://yingliyu.github.io/tags/VUE/"/>
    
  </entry>
  
  <entry>
    <title>Hexoæ›´æ¢ä¸»é¢˜å‡ºç°ç©ºç™½index.html</title>
    <link href="https://yingliyu.github.io/2021/09/26/hexo-upgrade/"/>
    <id>https://yingliyu.github.io/2021/09/26/hexo-upgrade/</id>
    <published>2021-09-26T15:32:00.000Z</published>
    <updated>2022-01-19T03:08:56.655Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ­å»ºåšå®¢å¾ˆä¹…äº†ï¼Œä¹‹å‰ç”¨çš„<code>yilia</code>ä¸»é¢˜å¾ˆå–œæ¬¢ï¼Œæœ€è¿‘åˆâ€ç§»æƒ…åˆ«æ‹â€ä¸Šäº† <code>ayer</code> è¿™ç§ç®€å•æœ‰ç‚¹æŠ€æœ¯æ§çš„é£æ ¼ä¸»é¢˜ï¼Œåˆå¼€å§‹æŠ˜è…¾ä¸€ç•ªã€‚ä¸‹é¢è®°å½•ä¸€ä¸‹æˆ‘çš„æŠ˜è…¾è½¨è¿¹â€¦</p><p>ç‰ˆæœ¬ï¼š<br><code>hexo: 4.2.1</code><br><code>hexo-cli: 3.1.0</code><br><code>node: 12.13.0</code></p><h2 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h2><p>æ›´æ¢ä¸»é¢˜</p><span id="more"></span><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>å¼€å§‹å®‰è£…æ–°ä¸»é¢˜å¹¶ä½¿ç”¨</p><h6 id="1-å®‰è£…ä¸»é¢˜"><a href="#1-å®‰è£…ä¸»é¢˜" class="headerlink" title="1.å®‰è£…ä¸»é¢˜"></a>1.å®‰è£…ä¸»é¢˜</h6><p>hexo-theme-ayer ä¸»é¢˜å¯¹ hexo ç‰ˆæœ¬&gt;=5.0 å’Œ&lt;5.0 æœ‰ä¸¤ç§ä¸åŒçš„å®‰è£…æ–¹æ³•ï¼Œå› ä¸ºæˆ‘çš„ hexo&lt;5.0 é‡‡ç”¨&lt;5.0 çš„å®‰è£…æ–¹æ³•ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> hexo &lt; <span class="number">5.0</span></span><br><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/Shen-Yu/</span>hexo-theme-ayer.git themes/ayer</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸä¼šåœ¨é¡¹ç›®çš„ <code>themes</code> ç›®å½•ä¸‹å¤šä¸€ä¸ª <code>ayer</code> ç›®å½•ï¼Œ<code>ayer</code> æ ¹ç›®å½•æœ‰ä¸€ä¸ª<code>_config.yml</code> ä¸»é¢˜é…ç½®æ–‡ä»¶</p><h6 id="2-ä¿®æ”¹"><a href="#2-ä¿®æ”¹" class="headerlink" title="2.ä¿®æ”¹"></a>2.ä¿®æ”¹</h6><p>å°†åšå®¢æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> é‡Œçš„<code> theme</code> å€¼ä¿®æ”¹æˆ <code>ayer</code></p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">theme:</span> ayer</span><br></pre></td></tr></table></figure><p>ç„¶åæ ¹æ®è‡ªå·±çš„éœ€è¦ä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ <code>themes/ayer/_config.yml</code><br>æœ€åï¼Œé‡æ–°<code>hexo g</code>æ„å»ºã€‚</p><h2 id="å‘ç°é—®é¢˜"><a href="#å‘ç°é—®é¢˜" class="headerlink" title="å‘ç°é—®é¢˜"></a>å‘ç°é—®é¢˜</h2><p>é—®é¢˜å‡ºç°äº†ï¼Œå‘ç°æ„å»ºçš„ public ç›®å½•ä¸‹çš„ index.html æ–‡ä»¶éƒ½æ˜¯ç©ºçš„ï¼Œè®¿é—®åšå®¢æ˜¾ç¤ºç©ºç™½ã€‚</p><h2 id="è§£å†³é—®é¢˜"><a href="#è§£å†³é—®é¢˜" class="headerlink" title="è§£å†³é—®é¢˜"></a>è§£å†³é—®é¢˜</h2><p>åœ¨ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œæœ‰ç›¸ä¼¼é—®é¢˜çš„è¯´æ˜¯ç¼ºå°‘ä¾èµ–ï¼Œå…ˆ<code>npm ls --depth 0</code>æŸ¥çœ‹ npm æ’ä»¶ç¼ºå¤±æƒ…å†µï¼Œä¸€èˆ¬æƒ…å†µä¸‹å‡ºç°<code>npm ERRORï¼missing xxx</code><br>è¯´æ˜ xxx æ’ä»¶ç¼ºå¤±ï¼Œç„¶åä¾æ¬¡å°†æ‰€æœ‰ç¼ºå¤±çš„æ’ä»¶å®‰è£…ä¸Šã€‚<br>æ‰§è¡Œäº†ä»¥ä¸Šæ“ä½œä¹‹åä¾ç„¶ä¸è¡Œï¼Œè§£å†³ä¸äº†æˆ‘çš„é—®é¢˜ã€‚</p><p>æœ€åå†³å®šä¸€ä¸åšäºŒä¸ä¼‘ï¼Œå¹²è„†ç›´æ¥å‡çº§ <code>hexo</code> åˆ° 5.x.x ç‰ˆæœ¬ã€‚<br>æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤è¿›è¡Œç‰ˆæœ¬å‡çº§ï¼š</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> install -g <span class="built_in">npm</span>-check <span class="comment"># æ£€æŸ¥ä¹‹å‰å®‰è£…çš„æ’ä»¶ï¼Œéƒ½æœ‰å“ªäº›æ˜¯å¯ä»¥å‡çº§çš„</span></span><br><span class="line"><span class="built_in">npm</span> install -g <span class="built_in">npm</span>-upgrade <span class="comment"># å‡çº§ç³»ç»Ÿä¸­çš„æ’ä»¶</span></span><br><span class="line"><span class="built_in">npm</span>-check</span><br><span class="line"><span class="built_in">npm</span>-upgrade  <span class="comment">#æ›´æ–°</span></span><br><span class="line"><span class="comment"># æ›´æ–° hexo åŠæ‰€æœ‰æ’ä»¶</span></span><br><span class="line"><span class="built_in">npm</span> update</span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç‰ˆæœ¬ ç¡®è®¤ hexo å·²ç»æ›´æ–°</span></span><br><span class="line">hexo -v</span><br></pre></td></tr></table></figure><p>å‡çº§ä¹‹åç‰ˆæœ¬ï¼š<br><code>hexo: 5.4.1</code><br><code>hexo-cli: 3.1.0</code><br><code>node: 12.13.0</code></p><p>åˆ é™¤ä¹‹å‰æ­¥éª¤ 1 å®‰è£…çš„ï¼ˆ hexo ç‰ˆæœ¬&lt;5.0 ï¼‰ <code>ayer</code> ä¸»é¢˜ï¼ˆ/themes/ayerï¼‰,ç„¶åä½¿ç”¨ hexo&gt;5.0 çš„å®‰è£…æ–¹æ³•é‡æ–°å®‰è£…ï¼š</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> i hexo-theme-ayer -S</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåä¼šåœ¨æ ¹ç›®å½•ç”Ÿæˆä¸€ä¸ª<code>_config.ayer.yml</code> æ–‡ä»¶ï¼Œç›´æ¥ç¼–è¾‘<code>_config.ayer.yml</code> æ–‡ä»¶è¿›è¡Œé…ç½®å³å¯ã€‚<br>æœ€åï¼Œé‡æ–°<code>hexo g</code>æ„å»ºï¼Œæ„å»ºæˆåŠŸï¼Œindex.html æ–‡ä»¶å†…å®¹æ­£å¸¸ï¼Œå‘å¸ƒä¹‹ååšå®¢æ­£å¸¸æ˜¾ç¤ºï¼Œé—®é¢˜è§£å†³ã€‚</p><p>å‚è€ƒï¼š<a href="https://shen-yu.gitee.io/2019/ayer/#%E5%AE%89%E8%A3%85">Ayer ä¸­æ–‡è¯´æ˜</a></p><p>é”™è¯¯ä¹‹å¤„æ¬¢è¿äº¤æµæŒ‡æ­£ï¼Œæ„Ÿè°¢~</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">Hexoæ›´æ¢ä¸»é¢˜å‡ºç°ç©ºç™½index.htmlè§£å†³æ–¹æ¡ˆ</summary>
    
    
    
    
    <category term="Hexo" scheme="https://yingliyu.github.io/tags/Hexo/"/>
    
    <category term="Hexoç‰ˆæœ¬å‡çº§" scheme="https://yingliyu.github.io/tags/Hexo%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>vue-elementui-diary</title>
    <link href="https://yingliyu.github.io/2021/09/24/vue-elementui-diary/"/>
    <id>https://yingliyu.github.io/2021/09/24/vue-elementui-diary/</id>
    <published>2021-09-24T09:44:30.000Z</published>
    <updated>2022-01-19T03:08:56.663Z</updated>
    
    <content type="html"><![CDATA[<h5 id="title"><a href="#title" class="headerlink" title="title"></a>title</h5><!-- <blockquote class="pullquote mindmap mindmap-md"><ul><li><p><a href="https://hunterx.xyz/hexo-simple-mindmap-plugin-intro.html">Hexo çš„æ€ç»´å¯¼å›¾æ’ä»¶</a></p><ul><li>å‰è¨€</li><li>ä½¿ç”¨æ–¹æ³•<ul><li>ä¸€</li><li>äºŒ</li><li>ä¸‰</li></ul></li><li>å¤ªé•¿ä¸çœ‹</li><li>å‚è€ƒèµ„æ–™</li></ul></li></ul></blockquote> --><div style="width: 90%;margin: 0 auto">    <canvas id="chart1767" style="height: 300px"></canvas></div><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script><script type="text/javascript">    var ctx = document.getElementById('chart1767').getContext('2d');    var options = {type: 'line',data: {labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],datasets: [{label: 'My First dataset',backgroundColor: 'rgb(255, 99, 132)',borderColor: 'rgb(255, 99, 132)',data: [0, 10, 5, 2, 20, 30, 45]}]},options: {responsive: true,title: {display: true,text: 'Chart.js Line Chart'}}};    new Chart(ctx, options);</script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
      
      
    <summary type="html">&lt;h5 id=&quot;title&quot;&gt;&lt;a href=&quot;#title&quot; class=&quot;headerlink&quot; title=&quot;title&quot;&gt;&lt;/a&gt;title&lt;/h5&gt;&lt;!-- &lt;blockquote class=&quot;pullquote mindmap mindmap-md&quot;&gt;&lt;ul&gt;
&lt;l</summary>
      
    
    
    
    <category term="VUE" scheme="https://yingliyu.github.io/categories/VUE/"/>
    
    <category term="VUE2" scheme="https://yingliyu.github.io/categories/VUE/VUE2/"/>
    
    
    <category term="VUE" scheme="https://yingliyu.github.io/tags/VUE/"/>
    
    <category term="VUE2" scheme="https://yingliyu.github.io/tags/VUE2/"/>
    
  </entry>
  
  <entry>
    <title>æ–‡ä»¶ä¸‹è½½çš„ä¸‰ç§æ–¹å¼</title>
    <link href="https://yingliyu.github.io/2021/09/23/file-down/"/>
    <id>https://yingliyu.github.io/2021/09/23/file-down/</id>
    <published>2021-09-23T14:29:09.000Z</published>
    <updated>2022-01-19T03:08:56.647Z</updated>
    
    <content type="html"><![CDATA[<p>æ–‡ä»¶ä¸Šä¼ ä¸‹è½½æ˜¯é¡¹ç›®ä¸­ç»å¸¸é‡åˆ°çš„å¸¸è§„åŠŸèƒ½ï¼Œæœ¬æ–‡é’ˆå¯¹ä¸‹è½½åŠŸèƒ½æ€»ç»“äº†ä¸€å…±ä¸‰ç§ä½¿ç”¨æ–¹å¼ã€‚</p><h5 id="ä¸€-æ— -API-æµè§ˆå™¨ç›´æ¥ä¸‹è½½ï¼ˆé™æ€èµ„æºåœ¨å‰ç«¯ï¼‰"><a href="#ä¸€-æ— -API-æµè§ˆå™¨ç›´æ¥ä¸‹è½½ï¼ˆé™æ€èµ„æºåœ¨å‰ç«¯ï¼‰" class="headerlink" title="ä¸€.æ—  API æµè§ˆå™¨ç›´æ¥ä¸‹è½½ï¼ˆé™æ€èµ„æºåœ¨å‰ç«¯ï¼‰"></a>ä¸€.æ—  API æµè§ˆå™¨ç›´æ¥ä¸‹è½½ï¼ˆé™æ€èµ„æºåœ¨å‰ç«¯ï¼‰</h5><p>å°†é™æ€èµ„æºæ–‡ä»¶ç›´æ¥æ”¾äº<code> public</code> ç›®å½•ä¸‹ï¼Œæ‰“åŒ…æ—¶ <code>public</code> æ–‡ä»¶ä¸ä¼šè¢«ç¼–è¯‘ã€‚</p><blockquote><p>æ³¨æ„ï¼šé™æ€èµ„æºçš„è·¯å¾„ï¼Œåœ¨ public æ–‡ä»¶å¤¹ä¸‹è·¯å¾„æ˜¯<code>/æ–‡ä»¶å</code></p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;download-file&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/file.xlsx&quot;</span> <span class="attr">download</span>=<span class="string">&quot;æ¨¡æ¿.xlsx&quot;</span>&gt;</span>ä¸‹è½½æ¨¡æ¿æ–‡ä»¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨é a æ ‡ç­¾çš„æŒ‰é’®ä¸‹è½½ï¼š</p><span id="more"></span><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">@param &#123;string&#125; url  é™æ€èµ„æºurl</span></span><br><span class="line"><span class="comment">@param &#123;string&#125; filename  é™æ€èµ„æºæ–‡ä»¶å(å¯é€‰)</span></span><br><span class="line"><span class="comment">@param &#123;string&#125; target  </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fileUrlHandled = <span class="function">(<span class="params">&#123; url, filename, target &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> downloadElement = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  downloadElement.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">  downloadElement.href = url</span><br><span class="line">  <span class="keyword">if</span> (target) &#123;</span><br><span class="line">    downloadElement.target = <span class="string">&#x27;_blank&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  downloadElement.rel = <span class="string">&#x27;noopener noreferrer&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> (filename) &#123;</span><br><span class="line">    downloadElement.download = filename</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(downloadElement)</span><br><span class="line">  downloadElement.click()</span><br><span class="line">  <span class="built_in">document</span>.body.removeChild(downloadElement)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼ºç‚¹ï¼šæ–‡ä»¶åä¸å¯æ§ã€‚</p><h5 id="äºŒ-åç«¯-API-è¿”å›é™æ€èµ„æºä¸‹è½½-url"><a href="#äºŒ-åç«¯-API-è¿”å›é™æ€èµ„æºä¸‹è½½-url" class="headerlink" title="äºŒ.åç«¯ API è¿”å›é™æ€èµ„æºä¸‹è½½ url"></a>äºŒ.åç«¯ API è¿”å›é™æ€èµ„æºä¸‹è½½ url</h5><p>åŸç†ï¼šä½¿ç”¨ ajax ä¸‹è½½</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å– blob</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;String&#125;</span> </span>url ç›®æ ‡æ–‡ä»¶åœ°å€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return <span class="type">&#123;Promise&#125;</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBlob</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">    xhr.open(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">true</span>)</span><br><span class="line">    xhr.responseType = <span class="string">&#x27;blob&#x27;</span></span><br><span class="line">    xhr.onload = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">        resolve(xhr.response)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Message.error(xhr.statusText || <span class="string">&#x27;æ–‡ä»¶è·å–å¤±è´¥&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    xhr.send()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿å­˜</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;Blob&#125;</span> <span class="variable">blob</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;String&#125;</span> </span>filename æƒ³è¦ä¿å­˜çš„æ–‡ä»¶åç§°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveAs</span>(<span class="params">blob, filename</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.navigator.msSaveOrOpenBlob) &#123;</span><br><span class="line">    navigator.msSaveBlob(blob, filename)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> link = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> body = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    link.href = <span class="built_in">window</span>.URL.createObjectURL(blob)</span><br><span class="line">    link.download = filename</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fix Firefox</span></span><br><span class="line">    link.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">    body.appendChild(link)</span><br><span class="line"></span><br><span class="line">    link.click()</span><br><span class="line">    body.removeChild(link)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.URL.revokeObjectURL(link.href)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸‹è½½</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;String&#125;</span> </span>url ç›®æ ‡æ–‡ä»¶åœ°å€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param  <span class="type">&#123;String&#125;</span> </span>filename æƒ³è¦ä¿å­˜çš„æ–‡ä»¶åç§°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">download</span>(<span class="params">url, filename</span>) </span>&#123;</span><br><span class="line">  getBlob(url).then(<span class="function">(<span class="params">blob</span>) =&gt;</span> &#123;</span><br><span class="line">    saveAs(blob, filename)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¼ºç‚¹ï¼šå­˜åœ¨è·¨åŸŸé—®é¢˜ã€‚<br>ä¼˜ç‚¹ï¼šæ–‡ä»¶åå¯æ§ã€‚</p></blockquote><h5 id="ä¸‰-åç«¯-API-è¿”å›æ–‡ä»¶æµ"><a href="#ä¸‰-åç«¯-API-è¿”å›æ–‡ä»¶æµ" class="headerlink" title="ä¸‰.åç«¯ API è¿”å›æ–‡ä»¶æµ"></a>ä¸‰.åç«¯ API è¿”å›æ–‡ä»¶æµ</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äºŒæ¬¡å°è£…axios POSTè¯·æ±‚æ–¹æ³•ä¸‹è½½</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">AppDownload</span>(<span class="params">url, data, baseURL</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    instance</span><br><span class="line">      .post(url, data, &#123;</span><br><span class="line">        baseURL,</span><br><span class="line">        <span class="attr">responseType</span>: <span class="string">&#x27;blob&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res &amp;&amp; res.status !== <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">// reject(new Error(`ä¸‹è½½å¤±è´¥`))</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> reader = <span class="keyword">new</span> FileReader()</span><br><span class="line">          reader.onload = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> content = reader.result <span class="comment">// å†…å®¹å°±åœ¨è¿™é‡Œ</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="regexp">/&quot;ok&quot;:false/</span>.test(content)) &#123;</span><br><span class="line">              <span class="keyword">let</span> response = &#123;</span><br><span class="line">                <span class="attr">data</span>: <span class="built_in">JSON</span>.parse(content)</span><br><span class="line">              &#125;</span><br><span class="line">              responseFn(&#123; ...&#123; <span class="attr">res</span>: response &#125;, resolve, reject &#125;)</span><br><span class="line">              <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> url = <span class="built_in">window</span>.URL.createObjectURL(<span class="keyword">new</span> Blob([res.data]), &#123;</span><br><span class="line">              <span class="attr">type</span>: <span class="string">&#x27;multipary/form-data&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">let</span> link = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">            link.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">            link.href = url</span><br><span class="line">            <span class="keyword">let</span> filename = data.filename || <span class="string">`<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>() - <span class="number">0</span>&#125;</span>.xlsx`</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (res.headers[<span class="string">&#x27;filename&#x27;</span>]) &#123;</span><br><span class="line">                filename = <span class="built_in">decodeURI</span>(res.headers[<span class="string">&#x27;filename&#x27;</span>]) || <span class="string">`<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>() - <span class="number">0</span>&#125;</span>.xlsx`</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">              <span class="built_in">console</span>.log(e)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            link.setAttribute(<span class="string">&#x27;download&#x27;</span>, filename)</span><br><span class="line">            <span class="built_in">document</span>.body.appendChild(link)</span><br><span class="line">            link.click()</span><br><span class="line">            URL.revokeObjectURL(url.href)</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(link)</span><br><span class="line">            resolve()</span><br><span class="line">          &#125;</span><br><span class="line">          reader.readAsText(res.data)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error)</span><br><span class="line">        Message.error(&#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&#x27;download failed&#x27;</span>,</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">2000</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåç«¯éœ€è¦å°†å“åº”å¤´ä¸­çš„ Access-Control-Expose-Headersï¼Œè®¾ç½® Content-Dispositionï¼Œå¦åˆ™å‰ç«¯å–ä¸åˆ° Content-Disposition çš„å€¼ã€‚</p></blockquote><p>æœ¬æ–‡ä¸åˆ°ä¹‹å¤„æ¬¢è¿æŒ‡æ­£ï¼Œæ„Ÿè°¢~</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½</summary>
    
    
    
    <category term="æ–‡ä»¶" scheme="https://yingliyu.github.io/categories/%E6%96%87%E4%BB%B6/"/>
    
    <category term="ä¸‹è½½" scheme="https://yingliyu.github.io/categories/%E6%96%87%E4%BB%B6/%E4%B8%8B%E8%BD%BD/"/>
    
    
    <category term="ä¸Šä¼ /ä¸‹è½½" scheme="https://yingliyu.github.io/tags/%E4%B8%8A%E4%BC%A0-%E4%B8%8B%E8%BD%BD/"/>
    
  </entry>
  
  <entry>
    <title>ç»¼åˆé¢è¯•é¢˜</title>
    <link href="https://yingliyu.github.io/2021/09/11/interview-question-http/"/>
    <id>https://yingliyu.github.io/2021/09/11/interview-question-http/</id>
    <published>2021-09-11T14:23:00.000Z</published>
    <updated>2022-01-19T03:08:56.655Z</updated>
    
    <content type="html"><![CDATA[<h4 id="ä¸€ã€è®¡ç®—æœºç½‘ç»œ"><a href="#ä¸€ã€è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="ä¸€ã€è®¡ç®—æœºç½‘ç»œ"></a>ä¸€ã€è®¡ç®—æœºç½‘ç»œ</h4><h5 id="1-æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶"><a href="#1-æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶" class="headerlink" title="1. æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶"></a>1. æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶</h5><h5 id="2-babelä¸ployfillçš„å…³ç³»å’ŒåŒºåˆ«"><a href="#2-babelä¸ployfillçš„å…³ç³»å’ŒåŒºåˆ«" class="headerlink" title="2. babelä¸ployfillçš„å…³ç³»å’ŒåŒºåˆ«"></a>2. babelä¸ployfillçš„å…³ç³»å’ŒåŒºåˆ«</h5><h5 id="3-è§£å†³è·¨åŸŸçš„æ–¹æ³•"><a href="#3-è§£å†³è·¨åŸŸçš„æ–¹æ³•" class="headerlink" title="3. è§£å†³è·¨åŸŸçš„æ–¹æ³•"></a>3. è§£å†³è·¨åŸŸçš„æ–¹æ³•</h5><h5 id="4-httpçŠ¶æ€ç "><a href="#4-httpçŠ¶æ€ç " class="headerlink" title="4. httpçŠ¶æ€ç "></a>4. httpçŠ¶æ€ç </h5><h5 id="5-git-stash"><a href="#5-git-stash" class="headerlink" title="5. git stash"></a>5. git stash</h5><h5 id="6-localstorageè·¨åŸŸå¯ä»¥å…±äº«å—ï¼Œå¦‚ä½•è§£å†³"><a href="#6-localstorageè·¨åŸŸå¯ä»¥å…±äº«å—ï¼Œå¦‚ä½•è§£å†³" class="headerlink" title="6. localstorageè·¨åŸŸå¯ä»¥å…±äº«å—ï¼Œå¦‚ä½•è§£å†³"></a>6. localstorageè·¨åŸŸå¯ä»¥å…±äº«å—ï¼Œå¦‚ä½•è§£å†³</h5><h5 id="7-æè¿°urlåˆ°é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹"><a href="#7-æè¿°urlåˆ°é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹" class="headerlink" title="7. æè¿°urlåˆ°é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹"></a>7. æè¿°urlåˆ°é¡µé¢æ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹</h5><h5 id="8-httpsé¡µé¢å¼•å…¥httpèµ„æºçš„è§£å†³æ–¹å¼-å¦‚ä½•è®©ç½‘ç«™åŒæ—¶å…¼å®¹httpå’Œhttps"><a href="#8-httpsé¡µé¢å¼•å…¥httpèµ„æºçš„è§£å†³æ–¹å¼-å¦‚ä½•è®©ç½‘ç«™åŒæ—¶å…¼å®¹httpå’Œhttps" class="headerlink" title="8. httpsé¡µé¢å¼•å…¥httpèµ„æºçš„è§£å†³æ–¹å¼/å¦‚ä½•è®©ç½‘ç«™åŒæ—¶å…¼å®¹httpå’Œhttps"></a>8. httpsé¡µé¢å¼•å…¥httpèµ„æºçš„è§£å†³æ–¹å¼/å¦‚ä½•è®©ç½‘ç«™åŒæ—¶å…¼å®¹httpå’Œhttps</h5><h5 id="9-cookieã€sessionã€sessionStorageå’ŒlocalStorageçš„-åŒºåˆ«"><a href="#9-cookieã€sessionã€sessionStorageå’ŒlocalStorageçš„-åŒºåˆ«" class="headerlink" title="9. cookieã€sessionã€sessionStorageå’ŒlocalStorageçš„ åŒºåˆ«"></a>9. cookieã€sessionã€sessionStorageå’ŒlocalStorageçš„ åŒºåˆ«</h5><h5 id="10-http-å’Œ-https-çš„åŒºåˆ«"><a href="#10-http-å’Œ-https-çš„åŒºåˆ«" class="headerlink" title="10. http å’Œ https çš„åŒºåˆ«"></a>10. http å’Œ https çš„åŒºåˆ«</h5><span id="more"></span><h5 id="11-GET-å’Œ-POST-çš„åŒºåˆ«"><a href="#11-GET-å’Œ-POST-çš„åŒºåˆ«" class="headerlink" title="11. GET å’Œ POST çš„åŒºåˆ«"></a>11. GET å’Œ POST çš„åŒºåˆ«</h5><h5 id="12-DNSï¼ˆDomain-Name-Systemï¼‰åŸŸåè§£æ-çš„åŸç†"><a href="#12-DNSï¼ˆDomain-Name-Systemï¼‰åŸŸåè§£æ-çš„åŸç†" class="headerlink" title="12. DNSï¼ˆDomain Name Systemï¼‰åŸŸåè§£æ çš„åŸç†"></a>12. DNSï¼ˆDomain Name Systemï¼‰åŸŸåè§£æ çš„åŸç†</h5><h5 id="13-ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"><a href="#13-ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="13. ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"></a>13. ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹</h5><h5 id="14-http2-0æœ‰ä»€ä¹ˆæ”¹è¿›"><a href="#14-http2-0æœ‰ä»€ä¹ˆæ”¹è¿›" class="headerlink" title="14. http2.0æœ‰ä»€ä¹ˆæ”¹è¿›"></a>14. http2.0æœ‰ä»€ä¹ˆæ”¹è¿›</h5><h5 id="15-Web-Storage-sessionStorageã€localStorage-å¸¦æ¥çš„å¥½å¤„"><a href="#15-Web-Storage-sessionStorageã€localStorage-å¸¦æ¥çš„å¥½å¤„" class="headerlink" title="15. Web Storage(sessionStorageã€localStorage)å¸¦æ¥çš„å¥½å¤„"></a>15. Web Storage(sessionStorageã€localStorage)å¸¦æ¥çš„å¥½å¤„</h5><h5 id="16-å¦‚ä½•è®©å‰ç«¯ç¦ç”¨cookie"><a href="#16-å¦‚ä½•è®©å‰ç«¯ç¦ç”¨cookie" class="headerlink" title="16. å¦‚ä½•è®©å‰ç«¯ç¦ç”¨cookie"></a>16. å¦‚ä½•è®©å‰ç«¯ç¦ç”¨cookie</h5><h5 id="17-scriptæ ‡ç­¾ä¸ºä»€ä¹ˆæ”¾åé¢ï¼Ÿå¼•å‡ºdeferå’ŒasyncåŒºåˆ«ï¼Ÿ"><a href="#17-scriptæ ‡ç­¾ä¸ºä»€ä¹ˆæ”¾åé¢ï¼Ÿå¼•å‡ºdeferå’ŒasyncåŒºåˆ«ï¼Ÿ" class="headerlink" title="17. scriptæ ‡ç­¾ä¸ºä»€ä¹ˆæ”¾åé¢ï¼Ÿå¼•å‡ºdeferå’ŒasyncåŒºåˆ«ï¼Ÿ"></a>17. scriptæ ‡ç­¾ä¸ºä»€ä¹ˆæ”¾åé¢ï¼Ÿå¼•å‡ºdeferå’ŒasyncåŒºåˆ«ï¼Ÿ</h5><h5 id="18-304çŠ¶æ€ç æ˜¯æ€ä¹ˆæ ·ï¼Œæ€ä¹ˆäº§ç”Ÿçš„"><a href="#18-304çŠ¶æ€ç æ˜¯æ€ä¹ˆæ ·ï¼Œæ€ä¹ˆäº§ç”Ÿçš„" class="headerlink" title="18. 304çŠ¶æ€ç æ˜¯æ€ä¹ˆæ ·ï¼Œæ€ä¹ˆäº§ç”Ÿçš„"></a>18. 304çŠ¶æ€ç æ˜¯æ€ä¹ˆæ ·ï¼Œæ€ä¹ˆäº§ç”Ÿçš„</h5><h4 id="äºŒã€webpack"><a href="#äºŒã€webpack" class="headerlink" title="äºŒã€webpack"></a>äºŒã€webpack</h4><h5 id="1-publicpathå’ŒcontentBaseçš„åŒºåˆ«"><a href="#1-publicpathå’ŒcontentBaseçš„åŒºåˆ«" class="headerlink" title="1. publicpathå’ŒcontentBaseçš„åŒºåˆ«"></a>1. publicpathå’ŒcontentBaseçš„åŒºåˆ«</h5><h5 id="2-æ€ä¹ˆé…ç½®cssçš„å±€éƒ¨ä½œç”¨åŸŸ"><a href="#2-æ€ä¹ˆé…ç½®cssçš„å±€éƒ¨ä½œç”¨åŸŸ" class="headerlink" title="2. æ€ä¹ˆé…ç½®cssçš„å±€éƒ¨ä½œç”¨åŸŸ"></a>2. æ€ä¹ˆé…ç½®cssçš„å±€éƒ¨ä½œç”¨åŸŸ</h5><h5 id="3-æ‹†åŒ…çš„é…ç½®é¡¹æ˜¯ä»€ä¹ˆï¼Œchunksåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆ"><a href="#3-æ‹†åŒ…çš„é…ç½®é¡¹æ˜¯ä»€ä¹ˆï¼Œchunksåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆ" class="headerlink" title="3. æ‹†åŒ…çš„é…ç½®é¡¹æ˜¯ä»€ä¹ˆï¼Œchunksåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆ"></a>3. æ‹†åŒ…çš„é…ç½®é¡¹æ˜¯ä»€ä¹ˆï¼Œchunksåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆ</h5><h5 id="4-webpackçš„åˆ†åŒ…æœºåˆ¶ã€ä»£ç åˆ†å‰²"><a href="#4-webpackçš„åˆ†åŒ…æœºåˆ¶ã€ä»£ç åˆ†å‰²" class="headerlink" title="4. webpackçš„åˆ†åŒ…æœºåˆ¶ã€ä»£ç åˆ†å‰²"></a>4. webpackçš„åˆ†åŒ…æœºåˆ¶ã€ä»£ç åˆ†å‰²</h5><h5 id="5-webpackçš„loderæ˜¯æ€ä¹ˆè§£æä¸åŒç±»å‹çš„èµ„æºçš„"><a href="#5-webpackçš„loderæ˜¯æ€ä¹ˆè§£æä¸åŒç±»å‹çš„èµ„æºçš„" class="headerlink" title="5. webpackçš„loderæ˜¯æ€ä¹ˆè§£æä¸åŒç±»å‹çš„èµ„æºçš„"></a>5. webpackçš„loderæ˜¯æ€ä¹ˆè§£æä¸åŒç±»å‹çš„èµ„æºçš„</h5><h5 id="6-webpackçš„devSever"><a href="#6-webpackçš„devSever" class="headerlink" title="6. webpackçš„devSever"></a>6. webpackçš„devSever</h5><h5 id="7-webpackæ‰“åŒ…é€Ÿåº¦åšè¿‡ä»€ä¹ˆä¼˜åŒ–"><a href="#7-webpackæ‰“åŒ…é€Ÿåº¦åšè¿‡ä»€ä¹ˆä¼˜åŒ–" class="headerlink" title="7. webpackæ‰“åŒ…é€Ÿåº¦åšè¿‡ä»€ä¹ˆä¼˜åŒ–"></a>7. webpackæ‰“åŒ…é€Ÿåº¦åšè¿‡ä»€ä¹ˆä¼˜åŒ–</h5><h5 id="8-å¦‚ä½•è§£å†³ç¼–è¯‘æ…¢çš„é—®é¢˜"><a href="#8-å¦‚ä½•è§£å†³ç¼–è¯‘æ…¢çš„é—®é¢˜" class="headerlink" title="8. å¦‚ä½•è§£å†³ç¼–è¯‘æ…¢çš„é—®é¢˜"></a>8. å¦‚ä½•è§£å†³ç¼–è¯‘æ…¢çš„é—®é¢˜</h5><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">è®¡ç®—æœºç½‘ç»œã€webpackç³»åˆ—é¢è¯•é¢˜</summary>
    
    
    
    <category term="é¢è¯•é¢˜" scheme="https://yingliyu.github.io/categories/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    
    <category term="é¢è¯•é¢˜" scheme="https://yingliyu.github.io/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
    <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://yingliyu.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    <category term="webpack" scheme="https://yingliyu.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>å•ç‚¹ç™»å½•å®ç°</title>
    <link href="https://yingliyu.github.io/2021/05/06/sso/"/>
    <id>https://yingliyu.github.io/2021/05/06/sso/</id>
    <published>2021-05-06T05:14:30.000Z</published>
    <updated>2022-01-19T03:08:56.659Z</updated>
    
    <content type="html"><![CDATA[<h5 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h5><p>åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¾ˆå¤šäººç”±äºå¿˜è®°æŸäº›ç½‘ç«™çš„ç™»å½•å¯†ç è€Œçƒ¦æ¼ï¼Œå› ä¸ºå¤§å¤šæ•°ç”¨æˆ·éƒ½è¦è®°å¿†ä¸å°‘äº 10 ä¸ªç”¨æˆ·åå’Œç›¸åº”å¯†ç ã€‚éšç€ä¿¡æ¯åŒ–é£é€Ÿå‘å±•ï¼Œå¤§å‹ä¼ä¸šå’Œæ”¿åºœéƒ¨é—¨ç­‰éƒ½å¼€å§‹ä½¿ç”¨ç”µå­ç³»ç»Ÿè¿›è¡ŒåŠå…¬ï¼Œæ•´ä¸ªåŠå…¬ç³»ç»Ÿç”±å¤šä¸ªä¸åŒçš„å­ç³»ç»Ÿæ„æˆï¼Œå¦‚åŠå…¬è‡ªåŠ¨åŒ–(OA)ç³»ç»Ÿï¼Œè´¢åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œæ¡£æ¡ˆç®¡ç†ç³»ç»Ÿï¼Œä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿç­‰ã€‚å¦‚æœæ¯ä¸ªç³»ç»Ÿéƒ½ä½¿ç”¨ç‹¬ç«‹çš„ç™»å½•å’ŒéªŒè¯æœºåˆ¶ï¼Œé‚£ä¹ˆæ¯å¤©å·¥ä½œäººå‘˜éƒ½è¦ç™»å½•ä¸åŒçš„ç³»ç»Ÿè¿›è¡ŒåŠå…¬ã€‚ç”¨æˆ·ç™»å½•çš„é¢‘ç¹æ“ä½œï¼Œé™ä½äº†å‘˜å·¥çš„å·¥ä½œæ•ˆç‡ï¼Œé€ æˆå·¥ä½œæˆæœ¬çš„æµªè´¹ã€‚è€Œå¤§é‡çš„å¯†ç å’Œç”¨æˆ·åçš„è®°å¿†æ—¶é—´é•¿äº†ä¹Ÿä¼šå‡ºç°é—®é¢˜ï¼Œå¿˜è®°å¯†ç æˆ–è€…æ··æ·†å¯†ç éƒ½ä¼šé€ æˆå¾ˆå¤§çš„éº»çƒ¦ã€‚åŸºäºä»¥ä¸ŠåŸå› ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªç•…é€šçš„ç™»å½•é€šé“å˜å¾—ååˆ†é‡è¦ã€‚</p><p>è¿™æ—¶å€™ç”¨æˆ·å¸Œæœ›æˆ‘åœ¨ä¸€ä¸ªç³»ç»Ÿç™»å½•ä¹‹åå¯ä»¥é»˜è®¤åœ¨å®ƒçš„å…³è”ç³»ç»Ÿï¼ˆäºŒçº§åŸŸåå¿…é¡»ç›¸åŒï¼‰ä¸­ä¹Ÿæ˜¯å·²ç™»å½•çŠ¶æ€ï¼Œé¿å…ç¹ççš„å¤šæ¬¡ç™»å½•ã€‚è¿™æ—¶å€™å°±éœ€è¦ SSOï¼ˆSingle Sign Onï¼‰æ¥å¸®åŠ©æˆ‘ä»¬å®ç°ã€‚</p><p>å•ç‚¹ç™»å½•(SingleSign-Onï¼ŒSSO)æ˜¯ä¸€ç§å¸®åŠ©ç”¨æˆ·å¿«æ·è®¿é—®ç½‘ç»œä¸­å¤šä¸ªç«™ç‚¹çš„å®‰å…¨é€šä¿¡æŠ€æœ¯ã€‚å•ç‚¹ç™»å½•ç³»ç»ŸåŸºäºä¸€ç§å®‰å…¨çš„é€šä¿¡åè®®ï¼Œè¯¥åè®®é€šè¿‡å¤šä¸ªç³»ç»Ÿä¹‹é—´çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„äº¤æ¢æ¥å®ç°å•ç‚¹ç™»å½•ã€‚ä½¿ç”¨å•ç‚¹ç™»å½•ç³»ç»Ÿæ—¶ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡ï¼Œå°±å¯ä»¥è®¿é—®å¤šä¸ªç³»ç»Ÿã€‚</p><h5 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h5><blockquote><p>Cookie ä½œä¸ºå‡­è¯åª’ä»‹</p></blockquote><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒHTTP æ˜¯æ— çŠ¶æ€çš„åè®®ï¼Œè¿™æ„å‘³ç€æœåŠ¡å™¨æ— æ³•ç¡®è®¤ç”¨æˆ·çš„ä¿¡æ¯ã€‚äºæ˜¯ï¼ŒW3C å°±æå‡ºäº†ï¼šç»™æ¯ä¸€ä¸ªç”¨æˆ·éƒ½å‘ä¸€ä¸ªé€šè¡Œè¯ï¼Œç”¨æˆ·è®¿é—®ç«™ç‚¹æ—¶éƒ½è¦æºå¸¦é€šè¡Œè¯ï¼Œè¿™æ ·æœåŠ¡å™¨å°±å¯ä»¥ä»é€šè¡Œè¯ä¸Šç¡®è®¤ç”¨æˆ·çš„ä¿¡æ¯ï¼Œé€šè¡Œè¯å°±æ˜¯ Cookieã€‚</p><p>åŒæ ·å› ä¸º HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒSession ä¸èƒ½ä¾æ® HTTP è¿æ¥æ¥åˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€ä¸ªç”¨æˆ·ã€‚äºæ˜¯ï¼šæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªåä¸º SESSIONID çš„ Cookieï¼Œå®ƒçš„å€¼æ˜¯ Session çš„ id å€¼ã€‚å…¶å® Session æ˜¯ä¾æ® Cookie æ¥è¯†åˆ«æ˜¯å¦æ˜¯åŒä¸€ä¸ªç”¨æˆ·ã€‚</p><blockquote><p>é€šè¿‡é¡µé¢é‡å®šå‘çš„æ–¹å¼</p></blockquote><h5 id="é€»è¾‘æµç¨‹å›¾"><a href="#é€»è¾‘æµç¨‹å›¾" class="headerlink" title="é€»è¾‘æµç¨‹å›¾"></a>é€»è¾‘æµç¨‹å›¾</h5><span id="more"></span><p>é”™è¯¯ä¹‹å¤„æ¬¢è¿äº¤æµæŒ‡æ­£ï¼Œæ„Ÿè°¢~</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">å•ç‚¹ç™»å½•å®ç°</summary>
    
    
    
    
    <category term="SSO" scheme="https://yingliyu.github.io/tags/SSO/"/>
    
  </entry>
  
  <entry>
    <title>æƒé™ç®¡ç†çš„åŸç†</title>
    <link href="https://yingliyu.github.io/2021/03/11/rights-mgt/"/>
    <id>https://yingliyu.github.io/2021/03/11/rights-mgt/</id>
    <published>2021-03-11T09:44:30.000Z</published>
    <updated>2022-01-19T03:08:56.659Z</updated>
    
    <content type="html"><![CDATA[<h5 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h5><p>åœ¨ä¸€äº›ä¸­åå°é¡¹ç›®çš„ä¸šåŠ¡ä¸­ç»å¸¸ä¼šæœ‰ç»™ä¸åŒçš„ç”¨æˆ·çœ‹åˆ°ä¸åŒçš„é¡µé¢ç”šè‡³ä¸åŒçš„æ“ä½œæƒé™ï¼Œè¿™æ—¶å€™æƒé™ç®¡ç†åŠŸèƒ½å°±é—ªäº®ç™»åœºäº†ï¼Œç”¨å®ƒæ¥ç»™ç”¨æˆ·èµ‹äºˆä¸åŒçš„è§’è‰²ï¼Œç»™ä¸åŒçš„è§’è‰²è®¾ç½®ä¸åŒçš„æƒé™ï¼Œé‚£ä¹ˆå‰åç«¯åœ¨æŠ€æœ¯æ–¹é¢å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿå¸¦ç€è¿™ä¸ªé—®é¢˜æˆ‘ä»¬æ¥çœ‹ä¸‹æƒé™ç®¡ç†çš„æµç¨‹å’Œå®ç°åŸç†ã€‚</p><h5 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h5><blockquote><p>æƒé™ç®¡ç†å¤§è‡´æ–¹æ¡ˆå°±æ˜¯ç»™è§’è‰²åˆ†é…æƒé™ï¼Œç»™ç”¨æˆ·åˆ†é…è§’è‰²ã€‚æ ¹æ®ä¸šåŠ¡ä¸åŒè¦æ±‚çš„é¢—ç²’åº¦ä¸åŒï¼Œå¦‚æœé¢—ç²’åº¦ä»…é™äºè·¯ç”±çº§åˆ«ï¼Œå®ç°æ€è·¯å¤§è‡´å¦‚ä¸‹</p></blockquote><p>é¦–å…ˆï¼Œå‰ç«¯éœ€è¦åˆ†åˆ«å®šä¹‰ä¸€å¥—ï¼ˆä¸éœ€æƒé™æ‰€æœ‰å·²ç™»é™†ç”¨æˆ·éƒ½å¯è®¿é—®ï¼‰é™æ€è·¯ç”±è¡¨å’ŒåŠ¨æ€è·¯ç”±è¡¨ï¼Œè·¯ç”±å…ƒä¿¡æ¯ä¸­åŒ…å«è¿™ä¸ªè·¯ç”±å¯¹åº”çš„ï¼ˆå’Œåç«¯å®šä¹‰å¥½çš„ï¼‰æƒé™åã€‚</p><span id="more"></span><p>ç„¶åï¼Œ 1.è·Ÿåç«¯åå•†å¥½æƒé™çš„å®šä¹‰è§„åˆ™ï¼Œå…¶æ¬¡ï¼Œä»æœåŠ¡ç«¯è·å–å«æœ‰ç”¨æˆ·æƒé™ä¿¡æ¯çš„èœå•åˆ—è¡¨ç„¶åè·Ÿå‰ç«¯è‡ªå·±å®šä¹‰çš„å®Œæ•´çš„åŠ¨æ€è·¯ç”±è¡¨è¿›è¡Œé€’å½’éå†ï¼Œå¦‚æœç”¨æˆ·æœ‰æ­¤é¡µé¢çš„æƒé™åˆ™æ·»åŠ åˆ°ç”¨æˆ·å¯è®¿é—®çš„è·¯ç”±è¡¨ä¸­ï¼Œå¾—åˆ°ç”¨æˆ·æœ‰æƒé™è®¿é—®çš„è·¯ç”±è¡¨ï¼› 2.åœ¨å¯¼èˆªå‰ç½®å®ˆå«ä¸­åšæ‹¦æˆªã€‚<code>token</code> å­˜åœ¨ä¸”æœ‰æ•ˆçš„æ˜¯æƒé™ç®¡ç†çš„ç¬¬ä¸€æ­¥åˆ¤æ–­ï¼Œå¦‚æœ token ä¸å­˜åœ¨ï¼Œåˆ¤æ–­è¯¥è·¯ç”±æ˜¯å¦åœ¨ç™½åå•ä¸­ï¼Œå¦‚æœåœ¨åˆ™<code>next()</code>ï¼Œå¦‚æœä¸åœ¨åˆ™é‡å®šå‘è‡³ç™»å½•é¡µï¼Œå¦‚æœ <code>token</code> å­˜åœ¨å†åˆ¤æ–­ï¼ˆå…¨å±€çŠ¶æ€ä¸­ï¼‰è¯¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™ï¼Œå¦‚æœæœ‰ <code>next()</code>ï¼Œå¦åˆ™å†ä»æœåŠ¡ç«¯è·å–è¯¥ç”¨æˆ·çš„æƒé™ä¿¡æ¯ï¼Œé€šè¿‡æ­¥éª¤ 1ï¼Œå°† 1 å¾—åˆ°çš„è·¯ç”±è¡¨æ·»åŠ <code>router.addRoutes()</code>åˆ°è·¯ç”±è¡¨ä¸­ï¼Œå¹¶æ›´æ–°å…¨å±€çŠ¶æ€ä¸­çš„è·¯ç”±è¡¨ï¼Œç„¶å <code>next()</code>ï¼Œé¡µé¢æ¸²æŸ“å‡ºæ¥å°±æ˜¯è¯¥ç”¨æˆ·æœ‰è®¿é—®æƒé™çš„èœå•/é¡µé¢ã€‚</p><blockquote><p>å¦‚æœæƒé™ç®¡ç†é¢—ç²’åº¦ç»†åˆ°æ¯ä¸ªæ“ä½œæŒ‰é’®çº§åˆ«ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤å®ç°ã€‚</p></blockquote><p>é¦–å…ˆï¼Œç¼–å†™è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œå…·ä½“æ€è·¯ï¼šèƒ½æ‹¿åˆ°ç»‘å®šçš„å…ƒç´ åŠè¯¥æ“ä½œéœ€è¦çš„æƒé™ï¼Œå¦‚æœè¯¥ç”¨æˆ·æ²¡æœ‰æ­¤æ“ä½œçš„æƒé™åˆ™ä¸æ˜¾ç¤ºæ­¤æŒ‰é’®ã€‚ç„¶ååœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¯¥æŒ‡ä»¤ã€‚</p><h5 id="é€»è¾‘æµç¨‹å›¾"><a href="#é€»è¾‘æµç¨‹å›¾" class="headerlink" title="é€»è¾‘æµç¨‹å›¾"></a>é€»è¾‘æµç¨‹å›¾</h5><p><img src="/2021/03/11/rights-mgt/1.png" alt="æµç¨‹å›¾"></p><p>é”™è¯¯ä¹‹å¤„æ¬¢è¿äº¤æµæŒ‡æ­£ï¼Œæ„Ÿè°¢~</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">æƒé™ç®¡ç†</summary>
    
    
    
    
    <category term="-vue - æƒé™ç®¡ç†" scheme="https://yingliyu.github.io/tags/vue-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>WEBåº”ç”¨ä¸­çš„æƒé™è®¤è¯</title>
    <link href="https://yingliyu.github.io/2021/01/27/gwt-token/"/>
    <id>https://yingliyu.github.io/2021/01/27/gwt-token/</id>
    <published>2021-01-27T17:25:17.000Z</published>
    <updated>2022-01-19T03:08:56.647Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ä¼ ç»Ÿæ–¹æ¡ˆâ€”â€”åŸºäº-cookie-session-çš„è§£å†³æ–¹æ¡ˆ"><a href="#1-ä¼ ç»Ÿæ–¹æ¡ˆâ€”â€”åŸºäº-cookie-session-çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.ä¼ ç»Ÿæ–¹æ¡ˆâ€”â€”åŸºäº cookie/session çš„è§£å†³æ–¹æ¡ˆ"></a>1.ä¼ ç»Ÿæ–¹æ¡ˆâ€”â€”åŸºäº cookie/session çš„è§£å†³æ–¹æ¡ˆ</h3><p>é¦–å…ˆï¼Œæµè§ˆå™¨ç«¯å‘æœåŠ¡ç«¯å‘é€ login è¯·æ±‚ï¼ŒæŠŠç”¨æˆ·åå’Œå¯†ç éƒ½å‘é€è¿‡å»ï¼ŒæœåŠ¡å™¨éªŒè¯ç”¨æˆ·åå¯†ç æ­£ç¡®ï¼Œç„¶åå°±ä¼šåˆ›å»ºå¯¹åº”çš„ session æ•°æ®å¹¶ä¿å­˜åœ¨å†…å­˜æˆ–è€…æ•°æ®åº“ä¸­ã€‚ç„¶åï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ª HTTP 200 OK çš„ responseï¼Œè¿™ä¸ª response ä¼šæœ‰ä¸ª header å« set-Cookieï¼šsessionid=xxxï¼Œæµè§ˆå™¨æ‹¿åˆ°è¿™ä¸ª response ä»¥åï¼Œå› ä¸ºæœ‰ set-Cookie è¿™ä¸ª headerï¼Œ å¸¦ä¸Šå”¯ä¸€çš„ id sessionidï¼ˆset-Cookieï¼šsessionid=xxxï¼‰ï¼Œå®ƒå°±ä¼šæŠŠ cookie ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ï¼Œä¸‹æ¬¡æˆ‘ä»¬å†è®¿é—®è¿™ä¸ªéœ€è¦æƒé™çš„æ¥å£ï¼Œè¿™æ—¶å€™ä¼šè‡ªåŠ¨æŠŠ cookie å¸¦ä¸Šã€‚æœåŠ¡å™¨ç«¯å°±å¯ä»¥ä½¿ç”¨ cookie ä¸­çš„ä¿¡æ¯ sessionidï¼ŒæŸ¥çœ‹æœåŠ¡å™¨ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ª session çš„æ•°æ®ï¼Œå¦‚æœå­˜åœ¨åˆ™è¿”å›å¯¹åº”çš„ä¿¡æ¯ï¼Œå¦åˆ™è¿”å› 401 Not authorizedã€‚</p><p>åŸºäº cookie çš„èº«ä»½éªŒè¯æ˜¯æœ‰çŠ¶æ€çš„ï¼Œæ„å‘³ç€è¿™ä¸ªéªŒè¯è®°å½•æˆ–è€…ä¼šè¯å¿…é¡»åŒæ—¶ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨è¦è·Ÿè¸ªè®°å½• session å¹¶ä¸”å­˜è‡³å†…å­˜æˆ–è€…æ•°æ®åº“ï¼ŒåŒæ—¶å‰ç«¯åœ¨ cookie ä¹Ÿè¦ä¿å­˜è¿™ä¸ª sessionid ä½œä¸º session å”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚è¿™ç§æ¨¡å¼çš„é—®é¢˜åœ¨äºæ‰©å±•æ€§ä¸å¥½ã€‚å‡å¦‚åªæœ‰ä¸€å°æœåŠ¡å™¨å½“ç„¶æ²¡æœ‰é—®é¢˜ï¼Œå‡å¦‚æ˜¯ä¸€ä¸ªæœåŠ¡å™¨é›†ç¾¤ï¼Œè¿™å°±è¦æ±‚ session çš„æ•°æ®å…±äº«ï¼Œæˆ‘ä»¬éœ€è¦æ¯å°æœåŠ¡å™¨éƒ½è¯»å–åˆ°è¿™ä¸ª sessionï¼Œä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯ session çš„æ•°æ®æŒä¹…åŒ–ï¼ŒæŠŠæ•°æ®å†™åˆ°æŒä¹…å±‚ä¸­å»ï¼Œå„ç§æœåŠ¡æ”¶åˆ°è¯·æ±‚ä»¥åéƒ½å‘æŒä¹…å±‚å‘é€æ•°æ®ã€‚è¿™ç§æ–¹æ¡ˆä¼˜ç‚¹æ˜¯æ¶æ„æ¸…æ™°ï¼Œç¼ºç‚¹æ˜¯å·¥ç¨‹é‡æ¯”è¾ƒå¤§ï¼Œå¦å¤–ï¼ŒæŒä¹…å±‚å¦‚æœæŒ‚äº†ï¼Œé‚£ä¹ˆå°±å•ç‚¹å¤±è´¥ã€‚<br><img width="600px" style="display:block;margin:20px auto;" src="/2021/01/27/gwt-token/1.jpeg"></p><span id="more"></span><!-- ![1](1.jpeg) --><h3 id="2-åŸºäº-Token-çš„è§£å†³æ–¹æ¡ˆï¼šGWT"><a href="#2-åŸºäº-Token-çš„è§£å†³æ–¹æ¡ˆï¼šGWT" class="headerlink" title="2.åŸºäº Token çš„è§£å†³æ–¹æ¡ˆï¼šGWT"></a>2.åŸºäº Token çš„è§£å†³æ–¹æ¡ˆï¼šGWT</h3><p>å®ƒä¸åŒäºåœ¨æœåŠ¡å™¨ä¿å­˜ä¿¡æ¯çš„ç‰¹ç‚¹ï¼Œè€Œæ˜¯æŠŠæ‰€æœ‰çš„ä¿¡æ¯éƒ½ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œä¹‹åæ¯æ¬¡è¯·æ±‚éƒ½å°†ç”Ÿæˆçš„ä¿¡æ¯å‘å›åˆ°æœåŠ¡å™¨ï¼ŒJWTï¼ˆJSON WEB TOKENï¼‰å°±æ˜¯è¿™ç§æ–¹æ¡ˆçš„ä¸€ä¸ªä»£è¡¨ã€‚</p><p>æµç¨‹ï¼š<br>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€ç™»é™†è¯·æ±‚ï¼ŒæŠŠç”¨æˆ·åå’Œå¯†ç å‘é€è¿‡å»ï¼ŒæœåŠ¡å™¨éªŒè¯ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®ï¼ŒæœåŠ¡ç«¯ä¼šä½¿ç”¨ JWT ç®—æ³•ç”Ÿæˆ token ç­¾åï¼Œç„¶å response è¿”å› token åˆ°å®¢æˆ·ç«¯ï¼Œç„¶åæµè§ˆå™¨ä¼šå°† token å‚¨å­˜åˆ°å®¢æˆ·ç«¯ï¼Œå¸¸è§æ–¹å¼ local Storage æˆ–è€… session Storage ä¸­ï¼Œä¹‹åæ¯æ¬¡è¯·æ±‚å°† token åœ¨ HTTP è¯·æ±‚å¤´ä¸­å‘é€ç»™æœåŠ¡å™¨ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡æ”¾åœ¨ cookie ä¸­è‡ªåŠ¨å‘é€çš„æ–¹å¼ï¼Œä½†æ˜¯è¿™æ ·ä¸èƒ½è·¨åŸŸï¼‰ï¼ŒæœåŠ¡å™¨æ‹¿åˆ°ä¿¡æ¯ä¹‹å JWT åå‘éªŒè¯å¯¹åº”çš„ token æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœéªŒè¯é€šè¿‡å°±è¿”å› 200 OK å¹¶å¸¦ä¸Šç›¸åº”çš„ä¿¡æ¯ï¼Œå¦‚æœé”™è¯¯åˆ™è¿”å› 401 Not authorizedã€‚<br>å¦‚æœç”¨æˆ·é€€å‡ºç™»é™†ï¼Œtoken åœ¨å®¢æˆ·ç«¯é”€æ¯ï¼Œå’ŒæœåŠ¡å™¨æ— å…³ã€‚åŸºäº token çš„èº«ä»½éªŒè¯æ˜¯æ²¡æœ‰çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨ä¸éœ€è¦è®°å½•å“ªäº›ç”¨æˆ·å·²ç»ç™»é™†æˆ–è€…å“ªäº› JWT å·²ç»å¤„ç†ï¼Œæ¯ä¸ªå‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚éƒ½ä¼šå¸¦ä¸€ä¸ª tokenï¼ŒæœåŠ¡å™¨é€šè¿‡ token æ£€æŸ¥ç¡®è®¤è¯·æ±‚çš„æœ‰æ•ˆæ€§ã€‚</p><p>token æ˜¯é€šè¿‡ç‰¹å®šçš„åŠ å¯†ç®—æ³•å°†ç”¨æˆ·ç™»é™†åçš„ä¸€äº›ä¿¡æ¯å‚¨å­˜åœ¨ä¸€ä¸ªåŠ å¯†åçš„å­—ç¬¦ä¸²ä¸­ï¼ŒæœåŠ¡å™¨å‡­ token è®¤å®šç”¨æˆ·çš„èº«ä»½ï¼Œå³æœåŠ¡å™¨æ˜¯æ— çŠ¶æ€çš„å› æ­¤éå¸¸å®¹æ˜“å®ç°æ‹“å±•ã€‚<br><img width="600px" style="display:block;margin:20px auto;" src="/2021/01/27/gwt-token/2.jpeg"></p><!-- ![1](2.jpeg) --><p>ç™»é™†ä¹‹åï¼Œåˆ·æ–°æµè§ˆå™¨ç™»å½•çŠ¶æ€ä¸¢å¤±ï¼ŒæŒä¹…åŒ–æ–¹æ¡ˆï¼š</p><!-- ![3](3.jpeg) --><img width="600px" style="display:block;margin:20px auto;" src="/2021/01/27/gwt-token/3.jpeg"><blockquote><p>æƒé™é€»è¾‘æµç¨‹ï¼š</p></blockquote> <img width="600px" style="display:block;margin:20px auto;" src="/2021/01/27/gwt-token/4.png"><!-- ![4](4.jpeg) --><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">token</summary>
    
    
    
    <category term="å•ç‚¹ç™»å½•" scheme="https://yingliyu.github.io/categories/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/"/>
    
    <category term="GWT" scheme="https://yingliyu.github.io/categories/%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/GWT/"/>
    
    
    <category term="GWT" scheme="https://yingliyu.github.io/tags/GWT/"/>
    
  </entry>
  
  <entry>
    <title>nginxå…¥é—¨</title>
    <link href="https://yingliyu.github.io/2021/01/22/nginx/"/>
    <id>https://yingliyu.github.io/2021/01/22/nginx/</id>
    <published>2021-01-22T17:41:54.000Z</published>
    <updated>2022-01-19T03:08:56.655Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h4><p>nginx æ˜¯ web æœåŠ¡å™¨ï¼Œç”± C è¯­è¨€å¼€å‘ï¼ŒåŸºäºäº‹ä»¶é©±åŠ¨èƒ½å¤„ç†ç™¾ä¸‡çº§åˆ«çš„ tcp è¿æ¥ï¼Œé«˜åº¦æ¨¡å—åŒ–çš„è®¾è®¡å’Œè‡ªç”±çš„è®¸å¯è¯ä½¿å¾—æ‰©å±•å…¶åŠŸèƒ½çš„æ¨¡å—å±‚å‡ºä¸ç©·ï¼Œè·¨å¹³å°ï¼Œå¯ä½¿ç”¨å½“å‰æ“ä½œç³»ç»Ÿç‰¹æœ‰çš„ä¸€äº›é«˜æ•ˆ API æ¥æé«˜è‡ªå·±çš„æ€§èƒ½ï¼Œnginx ä»¥æ€§èƒ½ä¸ºç‹ã€‚é€‰æ‹© nginx çš„æ ¸å¿ƒç†ç”±æ˜¯å¤„ç†é«˜å¹¶å‘è¯·æ±‚çš„åŒæ—¶ä¿æŒé«˜æ•ˆçš„æœåŠ¡ã€‚<br>Nginx ç‰¹ç‚¹ï¼š<br>é€‚åˆå‰åç«¯åˆ†ç¦»å¼€å‘ã€ä¿è¯å®‰å…¨ã€nginx éå¸¸å¿«ã€è´Ÿè½½å‡è¡¡</p><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>ç¯å¢ƒï¼šMAC OS ç³»ç»Ÿ<br><code>brew install nginx</code></p><p>æŸ¥çœ‹ç‰ˆæœ¬å·ï¼š<br><code>nginx -V</code></p><p>å¯åŠ¨ï¼š<br><code>nginx</code></p><span id="more"></span><p>å…³é—­ï¼š<br><code>nginx -s stop</code></p><p>æŸ¥çœ‹ nginx ç›¸å…³æ–‡ä»¶ï¼š<br><code>cd /usr/local/etc/nginx</code><br><code>ls</code></p><p>æ‰“å¼€ nginx é…ç½®æ–‡ä»¶ï¼š<br><code>code nginx.conf</code><br>å±€éƒ¨å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       8080;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        #charset koi8-r;</span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>è¿›å…¥ nginx é™æ€èµ„æºæ–‡ä»¶çš„é»˜è®¤è·¯å¾„ï¼š<br><code>cd /usr/local/var/www</code></p><p><code>ls</code><br>æŸ¥çœ‹é»˜è®¤é™æ€èµ„æº html æ–‡ä»¶<br><code>cat index.html</code></p><h4 id="ä½¿ç”¨-nginx-éƒ¨ç½²é™æ€æ–‡ä»¶"><a href="#ä½¿ç”¨-nginx-éƒ¨ç½²é™æ€æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨ nginx éƒ¨ç½²é™æ€æ–‡ä»¶"></a>ä½¿ç”¨ nginx éƒ¨ç½²é™æ€æ–‡ä»¶</h4><p>è¿›å…¥æœ¬åœ°é¡¹ç›®ç›®å½•ä¸‹ï¼š<br><code>cd xxx/yourProjectName</code><br><code>ls</code><br><code>cd dist</code><br><code>ls</code></p><p>æŠŠæ‰“åŒ…ç”Ÿæˆçš„ä»£ç  copy åˆ°/usr/local/var/www ç›®å½•<br><code>cp -r * /usr/local/var/www</code></p><p>ç„¶åï¼Œè®¿é—®<br>localhost:8080</p><p>æµç¨‹ï¼š<br>ç”¨æˆ·-&gt;xxx.com-&gt;Nginx-&gt;é™æ€æ–‡ä»¶</p><p>é‡æ–°å¯åŠ¨ nginxï¼š</p><p><code>nginx -s reload</code></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">nginxå…¥é—¨</summary>
    
    
    
    <category term="Nginx" scheme="https://yingliyu.github.io/categories/Nginx/"/>
    
    
    <category term="nginx" scheme="https://yingliyu.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Vue3çš„æ–°ç‰¹æ€§(äºŒ)ï¼šç”Ÿå‘½å‘¨æœŸ</title>
    <link href="https://yingliyu.github.io/2021/01/13/vue3-lifecycle/"/>
    <id>https://yingliyu.github.io/2021/01/13/vue3-lifecycle/</id>
    <published>2021-01-13T14:38:44.000Z</published>
    <updated>2022-01-19T03:08:56.663Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"></a>ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</h3><p>vue3 æ›´æ–°äº†ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€‚<br>å¯ä»¥ç›´æ¥é€šè¿‡ import å¯¹åº”çš„å‡½æ•°ï¼ˆä¾‹å¦‚ï¼šonMountedï¼‰æ¥æ³¨å†Œç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€‚</p><p>Options API -&gt; Hook inside <code>setup</code></p><ol><li><del>beforeCreate</del> -&gt; use setup()</li><li><del>created</del> -&gt; use setup()</li><li>beforeMount -&gt; onBeforeMount</li><li>mounted -&gt; onMounted</li><li>beforeUpdate -&gt; onBeforeUpdate</li><li>updated -&gt; onUpdated</li><li>beforeUnmount -&gt; onBeforeUnmount</li><li>unmounted -&gt; onUnmounted</li><li>errorCaptured -&gt; onErrorCaptured</li><li>renderTracked -&gt; onRenderTrackedï¼ˆè°ƒè¯•ç”¨ï¼‰</li><li>renderTriggered -&gt; onRenderTriggeredï¼ˆè°ƒè¯•ç”¨ï¼‰</li></ol><p>å› ä¸º setup æ˜¯åœ¨ beforeCreated å’Œ created å‡ ä¹æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œæ‰€ä»¥å¯ä»¥å°†åœ¨è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œçš„ä»£ç å†™åœ¨ setup é‡Œé¢ã€‚</p><span id="more"></span><!-- ![life](circle.png) --><img width="600px" style="display:block;margin:20px auto;" src="/2021/01/13/vue3-lifecycle/circle.png"><p>ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted, onUpdated, onUnmounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> MyComponent = &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;mounted!&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    onUpdated(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;updated!&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    onUnmounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;unmounted!&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://v3.vuejs.org/guide/composition-api-lifecycle-hooks.html">æ›´å¤šå†…å®¹å‚è€ƒ vue3</a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">vue3</summary>
    
    
    
    <category term="VUE" scheme="https://yingliyu.github.io/categories/VUE/"/>
    
    <category term="VUE3" scheme="https://yingliyu.github.io/categories/VUE/VUE3/"/>
    
    <category term="æ–°ç‰¹æ€§" scheme="https://yingliyu.github.io/categories/VUE/VUE3/%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
    
    <category term="VUE" scheme="https://yingliyu.github.io/tags/VUE/"/>
    
    <category term="VUE3" scheme="https://yingliyu.github.io/tags/VUE3/"/>
    
  </entry>
  
  <entry>
    <title>Vue3çš„æ–°ç‰¹æ€§(ä¸‰)ï¼šsetup()ã€computed()å’Œwatch()</title>
    <link href="https://yingliyu.github.io/2021/01/13/vue3-02/"/>
    <id>https://yingliyu.github.io/2021/01/13/vue3-02/</id>
    <published>2021-01-13T14:16:42.000Z</published>
    <updated>2022-01-19T03:08:56.663Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ¬æ–‡ä¸»è¦ä»‹ç» vue3 æ–°å¢ Composition API çš„ä¸€äº›ç‰¹æ€§ setup()ã€computed()å’Œ watch()ï¼ŒComposition API å¯ä»¥æŠŠå¤æ‚ç»„ä»¶çš„é€»è¾‘å˜å¾—æ›´ä¸ºç´§å‡‘ï¼Œä½¿ä»£ç æœ‰æ›´é«˜å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚</p><h3 id="1-setup"><a href="#1-setup" class="headerlink" title="1. setup()"></a>1. setup()</h3><p><code>setup()</code>æ˜¯ <code>vue3</code> ä¸­æ–°å¢ç‰¹æ€§ï¼Œåœ¨ç»„ä»¶ <code>created()</code>ç”Ÿå‘½å‘¨æœŸä¹‹å‰æ‰§è¡Œã€‚<br>å› ä¸º <code>setup()</code> æ˜¯åœ¨ç»„ä»¶ <code>created()</code>ä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥åœ¨ <code>setup()</code>å†…éƒ¨æ— æ³•è·å– <code>this</code>ã€‚</p><p><code>setup(props,context)</code>æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š<code>props</code>,<code>context</code></p><h5 id="å‚æ•°ä¸€ï¼šprops"><a href="#å‚æ•°ä¸€ï¼šprops" class="headerlink" title="å‚æ•°ä¸€ï¼šprops"></a>å‚æ•°ä¸€ï¼šprops</h5><p>ç»„ä»¶æ¥æ”¶çš„ <code>props</code> æ•°æ®å¯ä»¥åœ¨ <code>setup()</code>å‡½æ•°å†…è®¿é—®åˆ°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">String</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(props.title)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>props</code> å…·æœ‰å“åº”æ€§ï¼Œä¸èƒ½ä½¿ç”¨ ES6 è§£æ„å®ƒï¼Œè¿™ä¼šä½¿å…¶å¤±å»å“åº”æ€§ã€‚å¦‚æœéœ€è¦è§£æ„ï¼Œå¯ä»¥ä½¿ç”¨ <code>toRefs()</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; title &#125; = toRefs(props)</span><br><span class="line"><span class="built_in">console</span>.log(title.value)</span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>title</code> æ˜¯ä¸€ä¸ªå¯é€‰çš„å±æ€§ï¼Œéœ€ä½¿ç”¨ <code>toRef()</code>,å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line"><span class="keyword">const</span> title = toRef(props, <span class="string">&#x27;title&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(title.value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h5 id="å‚æ•°äºŒï¼šcontextï¼š"><a href="#å‚æ•°äºŒï¼šcontextï¼š" class="headerlink" title="å‚æ•°äºŒï¼šcontextï¼š"></a>å‚æ•°äºŒï¼šcontextï¼š</h5><pre><code>`context` æ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ context æ¥è®¿é—® Vue çš„å®åŠ› thisã€‚`context` å†…éƒ¨åŒ…æ‹¬ä¸‰ä¸ªå±æ€§ï¼š`attrs`ã€`slots`ã€`emit`</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, &#123; attrs, slots, emit &#125;</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>context æ˜¯ä¸€ä¸ªå¸¸è§„çš„ js å¯¹è±¡ï¼Œå®ƒä¸å…·æœ‰å“åº”æ€§å¯ä»¥ç›´æ¥å¯¹å®ƒè§£æ„ã€‚ä½† <code>attrs</code> å’Œ <code>slots</code> æ˜¯æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼Œå½“ç»„ä»¶æœ¬èº«æ›´æ–°æ—¶å®ƒä»¬ä¹Ÿä¼šéšä¹‹æ›´æ–°ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬åº”è¯¥é¿å…è§£æ„å®ƒä»¬ã€‚</p><h3 id="2-computed"><a href="#2-computed" class="headerlink" title="2. computed()"></a>2. computed()</h3><h5 id="computed-åˆ›å»ºåªè¯»è®¡ç®—å±æ€§"><a href="#computed-åˆ›å»ºåªè¯»è®¡ç®—å±æ€§" class="headerlink" title="computed()åˆ›å»ºåªè¯»è®¡ç®—å±æ€§"></a>computed()åˆ›å»ºåªè¯»è®¡ç®—å±æ€§</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> count = ref(<span class="number">1</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªåªè¯»æ€§è®¡ç®—å±æ€§ï¼Œä¾èµ–äºcountå€¼</span></span><br><span class="line"><span class="keyword">const</span> plusOne = computed(<span class="function">() =&gt;</span> count.value + <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(plusOne.value) <span class="comment">// 2</span></span><br><span class="line">plusOne.value++ <span class="comment">// error è¯¥è®¡ç®—å±æ€§ä¸ºåªè¯»å±æ€§ï¼Œä¸å¯å†™</span></span><br></pre></td></tr></table></figure><h5 id="computed-åˆ›å»ºå¯è¯»å†™è®¡ç®—å±æ€§"><a href="#computed-åˆ›å»ºå¯è¯»å†™è®¡ç®—å±æ€§" class="headerlink" title="computed()åˆ›å»ºå¯è¯»å†™è®¡ç®—å±æ€§"></a>computed()åˆ›å»ºå¯è¯»å†™è®¡ç®—å±æ€§</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> count = ref(<span class="number">1</span>)</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯è¯»å†™è®¡ç®—å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> plusOne = computed(&#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="function">() =&gt;</span> count.value + <span class="number">1</span>,</span><br><span class="line">  <span class="attr">set</span>: <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">    count.value = val - <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">plusOne.value = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(count.value) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure><h3 id="3-watch"><a href="#3-watch" class="headerlink" title="3. watch()"></a>3. watch()</h3><h5 id="watch-ç›‘å¬å•ä¸ªæ•°æ®æº"><a href="#watch-ç›‘å¬å•ä¸ªæ•°æ®æº" class="headerlink" title="watch()ç›‘å¬å•ä¸ªæ•°æ®æº"></a>watch()ç›‘å¬å•ä¸ªæ•°æ®æº</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬ a getter</span></span><br><span class="line"><span class="keyword">const</span> state = reactive(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;)</span><br><span class="line">watch(</span><br><span class="line">  <span class="function">() =&gt;</span> state.count,</span><br><span class="line">  <span class="function">(<span class="params">count, prevCount</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥ç›‘å¬ a ref</span></span><br><span class="line"><span class="keyword">const</span> count = ref(<span class="number">0</span>)</span><br><span class="line">watch(count, <span class="function">(<span class="params">count, prevCount</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="watch-ç›‘å¬å¤šä¸ªæ•°æ®æº"><a href="#watch-ç›‘å¬å¤šä¸ªæ•°æ®æº" class="headerlink" title="watch()ç›‘å¬å¤šä¸ªæ•°æ®æº"></a>watch()ç›‘å¬å¤šä¸ªæ•°æ®æº</h5><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œè¦ç›‘å¬çš„æ•°æ®æºä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> firstName = ref(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> lastName = ref(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">watch([firstName, lastName], <span class="function">(<span class="params">newValues, prevValues</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(newValues, prevValues)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">firstName.value = <span class="string">&#x27;John&#x27;</span> <span class="comment">// logs: [&quot;John&quot;,&quot;&quot;] [&quot;&quot;, &quot;&quot;]</span></span><br><span class="line">lastName.value = <span class="string">&#x27;Smith&#x27;</span> <span class="comment">// logs: [&quot;John&quot;, &quot;Smith&quot;] [&quot;John&quot;, &quot;&quot;]</span></span><br></pre></td></tr></table></figure><p>å¦ï¼Œå½“ç›‘å¬ä¸€ä¸ªå“åº”æ€§å¯¹è±¡æ—¶ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = reactive([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">watch(</span><br><span class="line">  <span class="function">() =&gt;</span> [...numbers],</span><br><span class="line">  <span class="function">(<span class="params">numbers, prevNumbers</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(numbers, prevNumbers)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">numbers.push(<span class="number">5</span>) <span class="comment">// logs: [1,2,3,4,5] [1,2,3,4]</span></span><br></pre></td></tr></table></figure><p>å½“ç›‘å¬ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„å±æ€§æˆ–è€…æ•°ç»„æ—¶éœ€è¦ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°<code>&#123;deep:true&#125;</code>ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">attributes</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">watch(</span><br><span class="line">  <span class="function">() =&gt;</span> state,</span><br><span class="line">  <span class="function">(<span class="params">state, prevState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;not deep &#x27;</span>, state.attributes.name, prevState.attributes.name)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">watch(</span><br><span class="line">  <span class="function">() =&gt;</span> state,</span><br><span class="line">  <span class="function">(<span class="params">state, prevState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;deep &#x27;</span>, state.attributes.name, prevState.attributes.name)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">state.attributes.name = <span class="string">&#x27;Alex&#x27;</span> <span class="comment">// Logs: &quot;deep &quot; &quot;Alex&quot; &quot;Alex&quot;</span></span><br></pre></td></tr></table></figure><p>ç›‘å¬ä¸€ä¸ªå“åº”å¼å¯¹è±¡æˆ–è€…æ•°ç»„æ—¶æ€»æ˜¯è¿”å›å½“å‰æ•°æ®å˜åŒ–å‰åçš„å¼•ç”¨ï¼Œä¸ºäº†çœŸæ­£çš„ç›‘å¬å¤æ‚å¯¹è±¡æˆ–æ•°ç»„ï¼Œéœ€è¦è¿›è¡Œä¸€æ¬¡æ·±æ‹·è´ã€‚<br>å®˜æ–¹æ¨èæ–¹æ¡ˆï¼š<a href="!https://lodash.com/docs/4.17.15#cloneDeep">lodash.cloneDeep</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span></span><br><span class="line"><span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">attributes</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;lemon&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">watch(</span><br><span class="line">  <span class="function">() =&gt;</span> _.cloneDeep(state),</span><br><span class="line">  <span class="function">(<span class="params">state, prevState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(state.attributes.name, prevState.attributes.name)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">state.attributes.name = <span class="string">&#x27;Alex&#x27;</span> <span class="comment">// Logs: &quot;Alex&quot; &quot;lemon&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ›´å¤šè¯¦ç»†ç”¨æ³•è¯·å‚è€ƒ<a href="!https://v3.vuejs.org/guide/reactivity-computed-watchers.html#watching-reactive-objects">Composition APIâ€”â€”watch</a></p></blockquote><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">vue3</summary>
    
    
    
    <category term="VUE" scheme="https://yingliyu.github.io/categories/VUE/"/>
    
    <category term="VUE3" scheme="https://yingliyu.github.io/categories/VUE/VUE3/"/>
    
    <category term="æ–°ç‰¹æ€§" scheme="https://yingliyu.github.io/categories/VUE/VUE3/%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
    
    <category term="VUE" scheme="https://yingliyu.github.io/tags/VUE/"/>
    
    <category term="VUE3" scheme="https://yingliyu.github.io/tags/VUE3/"/>
    
  </entry>
  
  <entry>
    <title>Vue3 çš„æ–°ç‰¹æ€§(ä¸€):ref()ã€reactive()ã€toRef() å’Œ toRefs()</title>
    <link href="https://yingliyu.github.io/2021/01/12/vue3-01/"/>
    <id>https://yingliyu.github.io/2021/01/12/vue3-01/</id>
    <published>2021-01-12T15:28:58.000Z</published>
    <updated>2022-01-19T03:08:56.663Z</updated>
    
    <content type="html"><![CDATA[<h5 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h5><p>vue3 æ›´å¥½çš„æ”¯æŒäº† <code>Typescript</code>ï¼Œæ–°å¢äº† <code>CompositionAPI</code>ï¼Œè€Œä¸”åœ¨æ€§èƒ½æ–¹é¢æœ‰å¾ˆå¤§æå‡</p><ol><li>æ‰“åŒ…å¤§å°å‡å°‘ 41%</li><li>åˆæ¬¡æ¸²æŸ“å¿« 55%ï¼Œæ›´æ–°å¿« 133%</li><li>å†…å­˜ä½¿ç”¨å‡å°‘ 54%</li></ol><p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ¥å­¦ä¹ ä»¥ä¸‹ vue3 çš„ä»¥ä¸‹æ–°ç‰¹æ€§ï¼š<code>ref()</code>ã€<code>reactive()</code>ã€<code>toRef()</code>ã€<code>toRefs()</code></p><h5 id="ç‰ˆæœ¬è¦æ±‚"><a href="#ç‰ˆæœ¬è¦æ±‚" class="headerlink" title="ç‰ˆæœ¬è¦æ±‚"></a>ç‰ˆæœ¬è¦æ±‚</h5><p>å¯¹äº Vue3ï¼Œnode ç‰ˆæœ¬ 10+ã€Vue Cli v4.5+çš„ç‰ˆæœ¬å¯ç”¨ã€‚å·²ç»å®‰è£…è¿‡<code>@vue/cli</code>éœ€æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn <span class="built_in">global</span> add @vue/cli</span><br><span class="line">#or</span><br><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure><h5 id="é…ç½®-Vue3-å¼€å‘ç¯å¢ƒ"><a href="#é…ç½®-Vue3-å¼€å‘ç¯å¢ƒ" class="headerlink" title="é…ç½® Vue3 å¼€å‘ç¯å¢ƒ"></a>é…ç½® Vue3 å¼€å‘ç¯å¢ƒ</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create [project-name]</span><br></pre></td></tr></table></figure><span id="more"></span><p><code>ï¼ŸPlease pick a preset: </code><br>Manually select feature(æ‰‹åŠ¨é€‰æ‹©ä¸€äº›ç‰¹æ€§)<br>ç„¶åï¼Œæ˜¯ä¸€ç³»åˆ—å¯æ’æ‹”çš„æ”¯æŒï¼Œå›Šæ‹¬å„ç§åŠŸèƒ½ï¼Œå……åˆ†ä½“ç°äº†æ¸è¿›å¼çš„ç‰¹ç‚¹<br><code>ï¼ŸCheck the feature needed for your project:</code><br>Choose vue version<br>Babel<br>Typescript<br>Linter/Formatter(ä»£ç æ ¼å¼æ£€æŸ¥å·¥å…·)<br><code>ï¼ŸChoose a version of vue.js that you want to start the project with: </code><br>3.X(Preview)<br><code>? Use class-style component snytax?</code>ï¼ˆç±»ç±»å‹çš„ç»„ä»¶ï¼‰<br>No<br><code>ï¼ŸUse Babel alongSide Typescriptï¼Ÿ</code><br>No<br><code>ï¼ŸPick a linter / formatter config:</code><br>Eslint with error prevention only<br><code>? Pick additional lint features:</code><br>Lint on save<br><code>? Where do you prefer placing config for Babel,Eslint ,etc.?</code><br>In dedicated config files<br><code>? Save this as a preset for future projects?</code><br>No(æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©)</p><p>OR ä½¿ç”¨ UI ç•Œé¢ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure><p>è¿›å…¥å›¾æ–‡ç•Œé¢è¿›è¡Œé€‰æ‹©é…ç½®</p><h5 id="vue2-ä¸-vue3-çš„å“åº”å¼å®ç°"><a href="#vue2-ä¸-vue3-çš„å“åº”å¼å®ç°" class="headerlink" title="vue2 ä¸ vue3 çš„å“åº”å¼å®ç°"></a>vue2 ä¸ vue3 çš„å“åº”å¼å®ç°</h5><p>æˆ‘ä»¬çŸ¥é“ï¼Œvue2 ä¸­çš„ data è¿”å›çš„æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå…¶åŸç†æ˜¯é€šè¿‡ <code>Object.defineProperty()</code>å®ç°çš„ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€äº›å¼Šç«¯ï¼Œæ¯”å¦‚å®ƒå¯¹äºå¯¹è±¡ä¸Šæ–°å¢çš„å±æ€§æ— èƒ½ä¸ºåŠ›ï¼›å¯¹äºæ•°ç»„åˆ™éœ€è¦æ‹¦æˆªå®ƒçš„åŸå‹æ–¹æ³•æ¥å®ç°å“åº”å¼ã€‚<br>é‚£ä¹ˆï¼Œvue3 è¸ç€äº”å½©ç¥¥äº‘å°±æ¥äº†ã€‚vue3 æ˜¯ä½¿ç”¨ ES6 ä¸­çš„æ–°ç‰¹æ€§ Proxy æ¥å®ç°å“åº”å¼ã€‚å…ˆæ¥å¯¹ <code>Proxy</code> è¿›è¡Œä¸€ä¸‹é¢„çƒ­ï¼Œ<br><code>Proxy</code> å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚ï¼šå±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚<br><code>Proxy</code> å¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚<br>æ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒ <a href="https://es6.ruanyifeng.com/#docs/proxy">ES6 Proxy</a></p><h5 id="ref-å’Œ-reactive"><a href="#ref-å’Œ-reactive" class="headerlink" title="ref() å’Œ reactive()"></a>ref() å’Œ reactive()</h5><blockquote><p><code>ref()</code> å‡½æ•°æ¥æ”¶ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°åŒæ—¶è¿”å›ä¸€ä¸ªåŸºäºè¯¥å€¼çš„å“åº”æ€§å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å†…éƒ¨æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå±æ€§ valueï¼Œè¯¥å¯¹è±¡ä¸­çš„å€¼ä¸€æ—¦è¢«æ”¹å˜å’Œè®¿é—®å°±ä¼šè¢«è·Ÿè¸ªåˆ°ï¼Œé€šè¿‡ä¿®æ”¹ <code>refData.value</code> çš„å€¼ï¼Œå¯ä»¥è§¦å‘æ¨¡ç‰ˆçš„é‡æ–°çš„æ¸²æŸ“ï¼Œæ˜¾ç¤ºæœ€æ–°çš„å€¼ã€‚<code>reactive</code> åˆ™æ˜¯ä¿®æ”¹ <code>state.reactiveField</code> çš„å€¼ã€‚</p></blockquote><blockquote><p><code>reactive()</code> å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹çš„æ•°æ®ï¼ˆå¯¹è±¡æˆ–æ•°ç»„ï¼‰ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå“åº”å¼ä»£ç†å¯¹è±¡ã€‚ï¼ˆå“åº”å¼æ•°æ®å³å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ UI ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ï¼‰</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123; temp &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; user.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; user.age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increase&quot;</span>&gt;</span>click me!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> temp = ref(<span class="number">0</span>)</span><br><span class="line">    temp.value = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> user = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;lemon&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(temp)</span><br><span class="line">    <span class="built_in">console</span>.log(temp.value) <span class="comment">// hello</span></span><br><span class="line">    <span class="built_in">console</span>.log(user) <span class="comment">// Proxy &#123;name:&#x27;lemon&#x27;,age:20&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> increase = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      user.age++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; temp, user, increase &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>reactive()</code> å‡½æ•°å¯ä»¥ä»£ç†ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹æ¯”å¦‚ï¼šå¯¹è±¡ã€æ•°ç»„ï¼Œä½†ä¸èƒ½ä»£ç†åŸºæœ¬ç±»å‹å€¼ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€boolean ç­‰ï¼Œè¿™æ˜¯ js è¯­è¨€çš„é™åˆ¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>ref()</code> å‡½æ•°æ¥é—´æ¥å¯¹åŸºæœ¬ç±»å‹å€¼è¿›è¡Œå¤„ç†ã€‚<code>ref</code>çš„æœ¬è´¨è¿˜æ˜¯<code>reactive</code>ç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®<code>ref()</code>å‡½æ•°çš„å…¥å‚å°†å…¶è½¬æ¢æˆ<code>ref(x)</code>å³<code>reactive(&#123;value:x&#125;)</code></p><blockquote><p>ç»¼ä¸Šï¼Œ<code>ref(user.name)</code> å°±ç›¸å½“äº <code>ref(&#39;lemon&#39;)</code> ä¹Ÿç›¸å½“äº <code>reactive(&#123;value:&#39;lemon&#39;&#125;)</code></p></blockquote><p><code>æ³¨æ„ï¼š</code></p><ol><li>åœ¨ vue æ¨¡æ¿ä¸­ä½¿ç”¨ <code>ref</code> çš„å€¼ä¸éœ€è¦é€šè¿‡ <code>value</code> å±æ€§è·å–ï¼ˆvue ä¼šè‡ªåŠ¨ç»™ ref çš„å€¼åŠ ä¸Š.valueï¼‰</li><li>åœ¨ js ä¸­ä½¿ç”¨ <code>ref</code> çš„å€¼è¦é€šè¿‡<code>.value</code>è·å–</li></ol><h5 id="toRef-å’Œ-toRefs"><a href="#toRef-å’Œ-toRefs" class="headerlink" title="toRef() å’Œ toRefs()"></a>toRef() å’Œ toRefs()</h5><blockquote><p><code>toRef</code>æ˜¯å°†ä¸ªå¯¹è±¡ A ä¸­çš„æŸä¸ªå±æ€§ x è½¬æ¢ä¸ºå“åº”å¼æ•°æ®ï¼Œå…¶æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¯¹è±¡ Aï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§å xã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&#x27;lemon&#x27;</span>, <span class="attr">age</span>: <span class="number">3</span> &#125;</span><br><span class="line">    <span class="keyword">const</span> userRef = toRef(user, <span class="string">&#x27;age&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123; userRef &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œä½ åº”è¯¥ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œ<code>toRef()</code>å’Œ<code>ref()</code> éƒ½æ˜¯åˆ›å»ºå“åº”å¼æ•°æ®çš„å‡½æ•°ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    å“åº”å¼æ•°å€¼ref0ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add0&quot;</span>&gt;</span>add &#123;&#123; state0 &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    å“åº”å¼å¯¹è±¡ref1ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add1&quot;</span>&gt;</span>Add &#123;&#123; state1 &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    å“åº”å¼å¯¹è±¡toRef2ï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add2&quot;</span>&gt;</span>Add &#123;&#123; state2 &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, toRef &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> temp = &#123; <span class="attr">count</span>: <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> temp0 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> state0 = ref(temp0);</span><br><span class="line">    <span class="keyword">const</span> state1 = ref(temp.count);</span><br><span class="line">    <span class="keyword">const</span> state2 = toRef(temp, <span class="string">&quot;count&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> add0 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      state0.value++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;åŸå§‹å€¼ï¼š&quot;</span>, temp0); <span class="comment">//åŸå§‹å€¼ï¼š1</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;å“åº”å¼æ•°æ®å¯¹è±¡refï¼š&quot;</span>, state0.value); <span class="comment">//å“åº”å¼æ•°å€¼refï¼š2</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> add1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      state1.value++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;åŸå§‹å€¼ï¼š&quot;</span>, temp); <span class="comment">//åŸå§‹å€¼ï¼š1</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;å“åº”å¼æ•°æ®å¯¹è±¡refï¼š&quot;</span>, state1.value); <span class="comment">//å“åº”å¼å¯¹è±¡refï¼š2</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> add2 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      state2.value++;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;åŸå§‹å€¼ï¼š&quot;</span>, temp); <span class="comment">// åŸå§‹å€¼ï¼š2</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;å“åº”å¼æ•°æ®å¯¹è±¡toRefï¼š&quot;</span>, state2.value); <span class="comment">//å“åº”å¼å¯¹è±¡toRefï¼š2</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123; state0, state1, state2, add0, add1, add2 &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p>ç»¼ä¸Šï¼Œref()å’Œ refs()æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š</p></blockquote><ol><li>å‚æ•°ä¸åŒï¼š<code>ref()</code>æ¥æ”¶ä¸€ä¸ª js åŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼›<code>toRef()</code>æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºå¯¹è±¡ï¼Œç¬¬äºŒä¸ªä¸ºå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼›</li><li>åŸç†ä¸åŒï¼š<code>ref()</code>æ˜¯å¯¹åŸæ•°æ®çš„ä¸€ä¸ªæ·±æ‹·è´ï¼Œå½“å…¶å€¼æ”¹å˜æ—¶ä¸ä¼šå½±å“åˆ°åŸå§‹å€¼ï¼›<code>toRef()</code>æ˜¯å¯¹åŸæ•°æ®çš„ä¸€ä¸ªå¼•ç”¨ï¼Œå½“å€¼æ”¹å˜æ—¶ä¼šå½±å“åˆ°åŸå§‹å€¼ï¼›</li><li>å“åº”æ€§ä¸åŒï¼š<code>ref()</code>åˆ›å»ºçš„æ•°æ®ä¼šè§¦å‘ vue æ¨¡ç‰ˆæ›´æ–°ï¼›<code>toRef()</code>åˆ›å»ºçš„å“åº”å¼æ•°æ®å¹¶ä¸ä¼šè§¦å‘ vue æ¨¡ç‰ˆæ›´æ–°ï¼Œæ‰€ä»¥<code>toRef()</code>çš„æœ¬è´¨æ˜¯å¼•ç”¨ï¼Œä¸åŸå§‹æ•°æ®æœ‰å…³è”ã€‚</li></ol><blockquote><p><code>toRefs()</code>æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶éå†å¯¹è±¡èº«ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œç„¶åé€ä¸ªè°ƒç”¨<code>toRef()</code>æ‰§è¡Œã€‚ä»¥æ­¤ï¼Œå°†å“åº”å¼å¯¹è±¡è½¬åŒ–ä¸ºæ™®é€šå¯¹è±¡ï¼Œä¾¿äºåœ¨æ¨¡ç‰ˆä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨å±æ€§ã€‚</p></blockquote><p>å½“æˆ‘ä»¬å¸Œæœ›å¯¹è±¡çš„å¤šä¸ªå±æ€§éƒ½å˜æˆå“åº”å¼æ•°æ®ï¼Œå¹¶ä¸”è¦æ±‚å“åº”å¼æ•°æ®å’ŒåŸå§‹æ•°æ®ç›¸å…³è”ï¼Œå¹¶ä¸”æ›´æ–°å“åº”å¼æ•°æ®æ—¶ä¸æ›´æ–°ç•Œé¢ï¼Œè¿™æ—¶å€™<code>toRefs()</code>å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œå®ƒç”¨äºæ‰¹é‡è®¾ç½®å¤šä¸ªå“åº”å¼æ•°æ®ã€‚</p><p>é‚£ä¹ˆï¼Œåˆ°è¿™é‡Œåˆæœ‰ç–‘é—®äº†ï¼Œé€šè¿‡ä¸Šé¢çš„å­¦ä¹ æˆ‘ä»¬çŸ¥é“ä½¿ç”¨ reactive()åˆ›å»ºçš„æ•°æ®å·²ç»å…·æœ‰å“åº”å¼äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å† toRefs()å‘¢ï¼Ÿ<br>å¾€ä¸‹çœ‹ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªå“åº”å¼å¯¹è±¡state</span></span><br><span class="line">    <span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">      <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">bar</span>: <span class="number">2</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">const</span> stateAsRefs = toRefs(state) <span class="comment">// å°†å“åº”å¼çš„å¯¹è±¡å˜ä¸ºæ™®é€šå¯¹è±¡ç»“æ„</span></span><br><span class="line">    <span class="comment">// The ref and the original property is &quot;linked&quot;</span></span><br><span class="line">    state.foo++</span><br><span class="line">    <span class="built_in">console</span>.log(stateAsRefs.foo.value) <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">    stateAsRefs.foo.value++</span><br><span class="line">    <span class="built_in">console</span>.log(state.foo) <span class="comment">// 3</span></span><br><span class="line">    <span class="keyword">return</span> &#123; temp, userRefs, ...stateAsRefs, add &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºä»¥ä¸Šä»£ç ï¼ŒtoRefs()å°†å“åº”å¼çš„å¯¹è±¡ state å˜ä¸ºæ™®é€šå¯¹è±¡ stateAsRefs åï¼Œreturn æ—¶ä½¿ç”¨ ES6 çš„æ‰©å±•è¿ç®—ç¬¦ï¼Œåœ¨æ¨¡ç‰ˆä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨å…¶å†…éƒ¨å±æ€§ï¼Œä¸”ä»å…·æœ‰å“åº”æ€§ï¼ˆ å¯¹å“åº”å¼å¯¹è±¡ state ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦åï¼Œå…¶å†…éƒ¨å±æ€§å°±å¤±å»äº†å“åº”æ€§ ï¼‰</p><p>å®˜æ–¹æ¡ˆä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useFeatureX</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">bar</span>: <span class="number">2</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// logic operating on state</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// convert to refs when returningï¼ˆè¿”å›æ—¶è½¬ä¸ºrefsï¼‰</span></span><br><span class="line">  <span class="keyword">return</span> toRefs(state)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// can destructure without losing reactivityï¼ˆå¯ä»¥è§£æ„è€Œä¸å¤±å»å…¶å“åº”æ€§ï¼‰</span></span><br><span class="line">    <span class="keyword">const</span> &#123; foo, bar &#125; = useFeatureX()</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      foo,</span><br><span class="line">      bar</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¯¹å“åº”å¼å¯¹è±¡è¿›è¡Œ toRefs åï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œè§£æ„æ–¹ä¾¿ vue æ¨¡ç‰ˆä½¿ç”¨ï¼Œä½†æ˜¯ä¸ä¼šä½¿å…¶å¤±å»å“åº”æ€§ã€‚</p></blockquote><h4 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h4><p>å‚è€ƒï¼š<a href="https://es6.ruanyifeng.com/#docs/proxy">ES6</a> ã€ <a href="https://v3.vuejs.org/api/refs-api.html#torefs">Vue3</a></p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">vue3</summary>
    
    
    
    <category term="VUE" scheme="https://yingliyu.github.io/categories/VUE/"/>
    
    <category term="VUE3" scheme="https://yingliyu.github.io/categories/VUE/VUE3/"/>
    
    <category term="æ–°ç‰¹æ€§" scheme="https://yingliyu.github.io/categories/VUE/VUE3/%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    
    
    <category term="VUE" scheme="https://yingliyu.github.io/tags/VUE/"/>
    
    <category term="VUE3" scheme="https://yingliyu.github.io/tags/VUE3/"/>
    
  </entry>
  
  <entry>
    <title>React-ts-d3 é¡¹ç›®å®è·µ</title>
    <link href="https://yingliyu.github.io/2020/11/18/react-ts-d3/"/>
    <id>https://yingliyu.github.io/2020/11/18/react-ts-d3/</id>
    <published>2020-11-18T14:33:38.000Z</published>
    <updated>2022-01-19T03:08:56.655Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è‡ªä»æ¶‰è¶³äº†çŸ¥è¯†å›¾è°±é¡¹ç›®ä¾¿ä¸€å‘ä¸å¯æ”¶æ‹¾ï¼Œæœ¬æ¬¡é¡¹ç›®ä¸­ä¹Ÿæ˜¯æ¶‰åŠåˆ°ä¸€äº›å¯è§†åŒ–å’ŒçŸ¥è¯†å›¾è°±çš„å…ƒç´ ï¼Œå¯¹æˆ‘æ¥è¯´è™½ä¸æ˜¯æ–°çš„æŠ€æœ¯é¢†åŸŸä½†æ˜¯è¿™æ¬¡æ”¹ç”¨äº† <code>ts</code>ï¼Œæ‰€ä»¥è¿˜æ˜¯è¸©äº†ä¸å°‘çš„å‘å‘¢ï¼Œä¸»è¦é›†ä¸­åœ¨ <code>d3</code> å’Œ <code>ts</code> ç»“åˆéƒ¨åˆ†ã€‚</p><p>å…¶æ¬¡åœ¨é¡¹ç›®è¯„å®¡æœŸé—´ï¼Œå‰ç«¯ä¸»è¦é—®é¢˜è¿˜æœ‰è‡ªé€‚åº”æ–¹é¢çš„é—®é¢˜ï¼Œæœ€ç»ˆæ•²å®šä½¿ç”¨æ–­ç‚¹åª’ä½“æŸ¥è¯¢çš„æ–¹å¼å®ç°ã€‚</p><p>è¿‘æœŸ <code>bug</code> ä¿®å¤è¿›å…¥å°¾å£°ï¼Œæ—¶éš”æ•°æ—¥è¿˜æ˜¯å¤ç›˜ä¸€ä¸‹ï¼Œæ¯•ç«Ÿæˆ‘çš„è„‘ç“œå­è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„å¥å¿˜ï¼Œåˆšåˆšè¢«é—®åŠä¸€ä¸ªé¡¹ç›®æ˜¯ä¸æ˜¯æˆ‘åšçš„ï¼Œæˆ‘è®°å¾—æ˜¯æˆ‘åšçš„ï¼Œä½†æ˜¯å…·ä½“å†…å®¹ä»€ä¹ˆçš„æˆ‘å·²ç»æ— åŠ›æƒ³èµ·äº†ï¼Œä¸è¿‡çœ‹åˆ°æˆ‘è¿˜æ˜¯è®¤è¯†çš„ã€‚è¨€å½’æ­£ä¼ ï¼Œä¸‹é¢å°±æ¥å›é¡¾ä¸€ä¸‹è¸©å‘æµæ°´å¸ã€‚</p><h3 id="1-Echarts-Graph"><a href="#1-Echarts-Graph" class="headerlink" title="1. Echarts Graph"></a>1. Echarts Graph</h3><p>å¦‚æœä½¿ç”¨è¿‡ <code>echart</code> ç³»åˆ—å›¾è¡¨ï¼Œé‚£ä¹ˆ <code>graph</code> å…³ç³»å›¾è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒå®¹æ˜“ä¸Šæ‰‹çš„ï¼Œæ¯•ç«Ÿæ˜¯é«˜åº¦å¯å®šåˆ¶åŒ–å¥—è·¯ä¸€æ ·åŒç±»å‹å±æ€§åä¹Ÿä¸€æ ·ã€‚</p><span id="more"></span><p>ä½†æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘è¿˜æ˜¯è¸©åˆ°äº†å‘ï¼šç”±äºæ•°æ®è¿”å›èŠ‚ç‚¹çš„ <code>name</code> å­—ç¬¦æ¯”è¾ƒé•¿ï¼Œä¸ºäº†ç¾è§‚å‰ç«¯æ˜¾ç¤ºçš„æ—¶å€™è¦åšä¸ªæ€§åŒ–æ ·å¼è®¾è®¡åŒ…æ‹¬æ¢è¡Œè¶…å‡ºå­—ç¬¦çœç•¥ç­‰ç­‰ï¼Œæˆ‘å¤©çœŸåˆç²—æš´çš„ç›´æ¥åœ¨ <code>name</code> ä¸ŠåŠ¨åˆ€äº†ï¼Œè™½ç„¶æˆ‘çŸ¥é“ <code>name</code> ä¸èƒ½æœ‰é‡å¤ï¼Œä½†æˆ‘è¿˜æ˜¯æ’äº†å—å¢™ï¼Œå› ä¸ºéƒ¨åˆ† <code>name</code> åšä¸ªæ€§åŒ–å¤„ç†ä¹‹åæ˜¾ç¤ºçš„å‰©ä½™é‚£éƒ¨åˆ†å­—ç¬¦ç›¸åŒï¼Œæ‰€ä»¥è§¦ç¢°äº† <code>name</code> ä¸èƒ½é‡å¤çš„çº¢çº¿ã€‚<br>è§£å†³ï¼š<code>name</code> æ‹¿æ¥åŸå°ä¸åŠ¨ï¼Œåœ¨ <code>label</code> ä¸Šåš <code>formatter</code> å¤„ç†ã€‚</p><blockquote><p>æ³¨æ„ï¼šæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ <code>name</code> è¦å”¯ä¸€ï¼Œå¦‚æœæœ‰é‡å¤çš„ <code>name</code> å°±ä¼šæŠ¥å¦‚ä¸‹é”™ï¼Œç±»ä¼¼äºéå†æ—¶çš„ <code>key</code> å€¼æ˜¯å”¯ä¸€çš„ã€‚</p></blockquote><p><img src="/2020/11/18/react-ts-d3/pic1.png" alt="image1"></p><h3 id="2-è¯äº‘-echarts-wordcloud"><a href="#2-è¯äº‘-echarts-wordcloud" class="headerlink" title="2. è¯äº‘ echarts-wordcloud"></a>2. è¯äº‘ echarts-wordcloud</h3><p>è¿™æ˜¯ä¸€ä¸ªåŸºäº <code>echarts</code> å°è£…çš„ç¬¬ä¸‰æ–¹åº“ï¼Œä½¿ç”¨ä¸­æ²¡æœ‰è¸©åˆ°å€¼å¾—ä¸€æçš„å‘ã€‚<br>éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">interface IWordCloud &#123;</span><br><span class="line">    <span class="attr">list</span>: ICommonProps[];</span><br><span class="line">    width: number;</span><br><span class="line">    height: number;</span><br><span class="line">    fontSizeRange: number[];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> WordCloud: React.FC&lt;IWordCloud&gt; = <span class="function">(<span class="params">props: IWordCloud</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; list, width, height, fontSizeRange &#125; = props;</span><br><span class="line"></span><br><span class="line">    useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        drawWordCloud();</span><br><span class="line">    &#125;, [list]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> drawWordCloud = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> wordElement = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;wordCloud&#x27;</span>);</span><br><span class="line">        <span class="keyword">let</span> chart = echarts.init(wordElement <span class="keyword">as</span> HTMLDivElement);</span><br><span class="line">        <span class="keyword">let</span> data = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">in</span> list) &#123;</span><br><span class="line">            data.push(&#123;</span><br><span class="line">                <span class="attr">name</span>: list[index].name,</span><br><span class="line">                <span class="attr">value</span>: <span class="built_in">Math</span>.sqrt(list[index].value)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> maskImage = <span class="keyword">new</span> Image();</span><br><span class="line">        maskImage.src = bg;</span><br><span class="line">        <span class="keyword">let</span> option = &#123;</span><br><span class="line">            <span class="attr">series</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">type</span>: <span class="string">&#x27;wordCloud&#x27;</span>,</span><br><span class="line">                    <span class="attr">left</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                    <span class="attr">top</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">                    <span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">                    <span class="attr">height</span>: <span class="string">&#x27;100%&#x27;</span>,</span><br><span class="line">                    <span class="attr">right</span>: <span class="literal">null</span>,</span><br><span class="line">                    <span class="attr">bottom</span>: <span class="literal">null</span>,</span><br><span class="line">                    <span class="attr">sizeRange</span>: fontSizeRange, <span class="comment">// å­—å·</span></span><br><span class="line">                    <span class="attr">rotationRange</span>: [-<span class="number">90</span>, <span class="number">90</span>],</span><br><span class="line">                    <span class="attr">rotationStep</span>: <span class="number">90</span>,</span><br><span class="line">                    <span class="attr">gridSize</span>: fontSizeRange[<span class="number">0</span>] - <span class="number">2</span>,</span><br><span class="line">                    <span class="attr">shape</span>: <span class="string">&#x27;circle&#x27;</span>, <span class="comment">// diamond/triangle/circle/pentagon/star</span></span><br><span class="line">                    <span class="comment">// maskImage: maskImage,</span></span><br><span class="line">                    <span class="attr">textStyle</span>: &#123;</span><br><span class="line">                        <span class="attr">normal</span>: &#123;</span><br><span class="line">                            <span class="comment">// fontFamily: &#x27;å¾®è½¯é›…é»‘&#x27;,</span></span><br><span class="line">                            <span class="comment">// fontWeight: &#x27;normal&#x27;,</span></span><br><span class="line">                            <span class="comment">// Color can be a callback function or a color string</span></span><br><span class="line">                            <span class="attr">color</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                                <span class="comment">// Random color</span></span><br><span class="line">                                <span class="keyword">return</span> WORD_CLOUD_COLORS[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">3</span>)];</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="attr">emphasis</span>: &#123;</span><br><span class="line">                            <span class="attr">shadowBlur</span>: <span class="number">2</span>,</span><br><span class="line">                            <span class="attr">shadowColor</span>: <span class="string">&#x27;#1890ff&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">data</span>: data</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;;</span><br><span class="line">        chart.setOption(option);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;wordCloud&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">height:</span> <span class="attr">height</span>, <span class="attr">width:</span> <span class="attr">width</span> &#125;&#125; /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå›¾å¦‚ä¸‹ï¼š<br><img src="/2020/11/18/react-ts-d3/pic2.png" alt="image"></p><h3 id="3-echarts-legend-ä¸ªæ€§åŒ–ç»†èŠ‚"><a href="#3-echarts-legend-ä¸ªæ€§åŒ–ç»†èŠ‚" class="headerlink" title="3.echarts legend ä¸ªæ€§åŒ–ç»†èŠ‚"></a>3.echarts legend ä¸ªæ€§åŒ–ç»†èŠ‚</h3><p>å¯èƒ½å¯¹åˆ«äººæ¥è¯´æ˜¯å°å„¿ç§‘ï¼Œåªæ˜¯å®ƒæ˜¯æˆ‘åˆæ¬¡å‘ç°çš„æ¯”è¾ƒç¬¦åˆæˆ‘é¡¹ç›®ä¸­éœ€æ±‚çš„ç‚¹ã€‚</p><p>1.<code>legend</code> å›¾ä¾‹æ ‡è®°çš„å›¾å½¢é™¤äº†å®šåˆ¶çš„å“ªå‡ ç§å½¢çŠ¶è¿˜å¯ä»¥è®¾ç½®å®½é«˜ <code>itemWidth</code>ã€<code>itemHeight</code>ã€‚ 2.<code>legend</code> æ–‡å­—å—çš„å®½å®šåˆ¶è¿™æ ·å¯ä»¥æ˜¯ <code>value</code> å·¦å¯¹é½ã€‚ 3.<code>legend</code> ä¹Ÿæœ‰ <code>tooltip</code>ã€‚<br>å¦‚ä¸‹å›¾ï¼š<br><img src="/2020/11/18/react-ts-d3/pic3.png" alt="image3"></p><h3 id="4-d3-åŠ›å¯¼å‘å›¾â€”â€”-force"><a href="#4-d3-åŠ›å¯¼å‘å›¾â€”â€”-force" class="headerlink" title="4. d3 åŠ›å¯¼å‘å›¾â€”â€” force"></a>4. d3 åŠ›å¯¼å‘å›¾â€”â€” force</h3><p>ä½¿ç”¨ <code>ts</code> æ—¶éƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“çš„å®šä¹‰çš„å„ç§ç±»å‹å®šä½èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹çƒ§è„‘çš„ã€‚<br>æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ drag å‡½æ•°çš„èŒƒå‹å¤§æ¦‚æŠ˜ç£¨äº†æˆ‘ä¸€å‘¨å·¦å³æœ€ååœ¨åº„å“¥çš„å¸®åŠ©ä¸‹ç»ˆäºè§£å†³äº†ã€‚<br><img src="/2020/11/18/react-ts-d3/pic4.png" alt="img4"></p><p>éƒ¨åˆ†ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create a force simulation</span></span><br><span class="line">    <span class="keyword">const</span> initForceSimulation = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> linkForce = d3</span><br><span class="line">                .forceLink&lt;INode, ILink&gt;(linksData)</span><br><span class="line">                .id(<span class="function">(<span class="params">data: INode</span>) =&gt;</span> data.id)</span><br><span class="line">                .distance(<span class="number">200</span>);</span><br><span class="line">            <span class="keyword">const</span> nodeCollision = d3</span><br><span class="line">                .forceCollide()</span><br><span class="line">                .radius(<span class="number">80</span>)</span><br><span class="line">                .iterations(<span class="number">0.5</span>)</span><br><span class="line">                .strength(<span class="number">0.5</span>);</span><br><span class="line">            <span class="keyword">const</span> nodeCharge = d3.forceManyBody().strength(-<span class="number">300</span>).theta(<span class="number">0.01</span>);</span><br><span class="line">            simulationRef.current = d3</span><br><span class="line">                .forceSimulation&lt;INode, ILink&gt;(nodesData)</span><br><span class="line">                .alpha(<span class="number">0.3</span>) <span class="comment">// æ´»åŠ›ï¼Œæ¸²æŸ“ä¹‹åå†è‡ªåŠ¨åŠ¨å¤šä¹…åˆ°è¾¾ç›®æ ‡ä½ç½®</span></span><br><span class="line">                .force(<span class="string">&#x27;link&#x27;</span>, linkForce) <span class="comment">// æ˜ å°„id &amp; çº¿çš„é•¿åº¦</span></span><br><span class="line">                .force(<span class="string">&#x27;x&#x27;</span>, d3.forceX())</span><br><span class="line">                .force(<span class="string">&#x27;y&#x27;</span>, d3.forceY())</span><br><span class="line">                .force(<span class="string">&#x27;center&#x27;</span>, d3.forceCenter(svgWidth / <span class="number">2</span>, svgHeight / <span class="number">2</span>))</span><br><span class="line">                .force(<span class="string">&#x27;collision&#x27;</span>, nodeCollision)<span class="comment">// é¿å…èŠ‚ç‚¹ç›¸äº’è¦†ç›–</span></span><br><span class="line">                .force(<span class="string">&#x27;charge&#x27;</span>, nodeCharge);<span class="comment">// èŠ‚ç‚¹é—´ç›¸äº’æ’æ–¥çš„ç”µç£åŠ›</span></span><br><span class="line"></span><br><span class="line">            simulationRef.current.nodes(nodesData).on(<span class="string">&#x27;tick&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                edges</span><br><span class="line">                    .attr(<span class="string">&#x27;x1&#x27;</span>, <span class="function">(<span class="params">&#123; source &#125;</span>) =&gt;</span> (source <span class="keyword">as</span> INode).x || <span class="number">0</span>)</span><br><span class="line">                    .attr(<span class="string">&#x27;y1&#x27;</span>, <span class="function">(<span class="params">&#123; source &#125;</span>) =&gt;</span> (source <span class="keyword">as</span> INode).y || <span class="number">0</span>)</span><br><span class="line">                    .attr(<span class="string">&#x27;x2&#x27;</span>, <span class="function">(<span class="params">&#123; target &#125;</span>) =&gt;</span> (target <span class="keyword">as</span> INode).x || <span class="number">0</span>)</span><br><span class="line">                    .attr(<span class="string">&#x27;y2&#x27;</span>, <span class="function">(<span class="params">&#123; target &#125;</span>) =&gt;</span> (target <span class="keyword">as</span> INode).y || <span class="number">0</span>);</span><br><span class="line">                nodes.attr(<span class="string">&#x27;transform&#x27;</span>, <span class="function">(<span class="params">data: any</span>) =&gt;</span> <span class="string">`translate(<span class="subst">$&#123;data.x&#125;</span>, <span class="subst">$&#123;data.y&#125;</span>)`</span>);</span><br><span class="line">                edgepaths.attr(</span><br><span class="line">                    <span class="string">&#x27;d&#x27;</span>,</span><br><span class="line">                    <span class="function">(<span class="params">&#123; target, source &#125;</span>) =&gt;</span></span><br><span class="line">                        <span class="string">&#x27;M &#x27;</span> +</span><br><span class="line">                        (source <span class="keyword">as</span> INode).x +</span><br><span class="line">                        <span class="string">&#x27; &#x27;</span> +</span><br><span class="line">                        (source <span class="keyword">as</span> INode).y +</span><br><span class="line">                        <span class="string">&#x27; L &#x27;</span> +</span><br><span class="line">                        (target <span class="keyword">as</span> INode).x +</span><br><span class="line">                        <span class="string">&#x27; &#x27;</span> +</span><br><span class="line">                        (target <span class="keyword">as</span> INode).y</span><br><span class="line">                );</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">const</span> edges = drewLines(); <span class="comment">// draw lines</span></span><br><span class="line">            <span class="keyword">const</span> nodes = drawNodes(); <span class="comment">// draw nodes</span></span><br><span class="line">            <span class="keyword">const</span> edgepaths = drawEdgeLabel(); <span class="comment">// draw relation label</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(error);</span><br><span class="line">            message.error(<span class="string">&#x27;å†…éƒ¨é”™è¯¯ï¼Œ&#x27;</span> + <span class="built_in">JSON</span>.stringify(error));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ¨èä¸€ä¸ªåˆ‡æ¢å…¨å±åº“ï¼š screenfullã€‚</p><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kity@2.0.4/dist/kity.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/kityminder-core@1.4.50/dist/kityminder.core.min.js"></script><script defer="true" type="text/javascript" src="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-simple-mindmap@0.6.0/dist/mindmap.min.css">]]></content>
    
    
    <summary type="html">react-ts-d3</summary>
    
    
    
    <category term="React" scheme="https://yingliyu.github.io/categories/React/"/>
    
    <category term="Typescript" scheme="https://yingliyu.github.io/categories/React/Typescript/"/>
    
    
    <category term="react" scheme="https://yingliyu.github.io/tags/react/"/>
    
    <category term="typescript" scheme="https://yingliyu.github.io/tags/typescript/"/>
    
    <category term="d3" scheme="https://yingliyu.github.io/tags/d3/"/>
    
  </entry>
  
</feed>
